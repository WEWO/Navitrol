<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>VDA 5050 - NAVITROL USER INSTRUCTIONS - Navitec Systems Oy CONFIDENTIAL</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="../../favicon.svg">
                        <link rel="shortcut icon" href="../../favicon.png">
                <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
                <link rel="stylesheet" href="../../css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="../../fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
                <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../MdBook/MdbookFrontPage.html">Front page</a></li><li class="chapter-item expanded affix "><li class="part-title">Introduction</li><li class="chapter-item expanded "><a href="../../Introduction/NavitrolUserInstructions/NavitrolUserInstructions-en.html"><strong aria-hidden="true">1.</strong> Navitrol user instructions</a></li><li class="chapter-item expanded "><a href="../../Introduction/Licensing/Licensing-en.html"><strong aria-hidden="true">2.</strong> Licensing</a></li><li class="chapter-item expanded "><a href="../../Introduction/OdometrySource/OdometrySource-en.html"><strong aria-hidden="true">3.</strong> Odometry source</a></li><li class="chapter-item expanded "><a href="../../Introduction/InitialCalibrationGuide/InitialCalibrationGuide-en.html"><strong aria-hidden="true">4.</strong> Initial calibration guide</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/ParameterReconfiguration/ParameterReconfiguration-en.html"><strong aria-hidden="true">5.</strong> Parameter reconfiguration</a></li><li class="chapter-item expanded "><a href="../../Introduction/Parameters/Parameters.html"><strong aria-hidden="true">6.</strong> Parameter listing</a></li><li class="chapter-item expanded "><a href="../../Introduction/Parameters/JsonConfigurationFile-en.html"><strong aria-hidden="true">7.</strong> JSON configuration file</a></li><li class="chapter-item expanded "><a href="../../Introduction/TeachingInstructions/TeachingInstructions-en.html"><strong aria-hidden="true">8.</strong> Teaching instructions</a></li><li class="chapter-item expanded "><a href="../../Introduction/FeatureMatrix/FeatureMatrix-en.html"><strong aria-hidden="true">9.</strong> Feature Matrix</a></li><li class="chapter-item expanded affix "><li class="part-title">Device interfaces</li><li class="chapter-item expanded "><a href="../../AgvInterfaces/SupportedDevices/SupportedDevices-en.html"><strong aria-hidden="true">10.</strong> Supported devices</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/GenericInterfaces/GenericInterfacesHeading.html"><strong aria-hidden="true">11.</strong> Generic interfaces</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../AgvInterfaces/GenericInterfaces/EthernetSupervisorInterface/EthernetSupervisorInterface-en.html"><strong aria-hidden="true">11.1.</strong> Ethernet Supervisor</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/GenericInterfaces/CanCommunication/CanCommunication-en.html"><strong aria-hidden="true">11.2.</strong> CAN communication</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../AgvInterfaces/GenericInterfaces/CanSupervisorInterface/CanSupervisorInterface-en.html"><strong aria-hidden="true">11.2.1.</strong> CAN Supervisor</a></li></ol></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/GenericInterfaces/EthercatCommunication/EthercatCommunication-en.html"><strong aria-hidden="true">11.3.</strong> EtherCAT Communication</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/GenericInterfaces/Simove/SimoveInterface-en.html"><strong aria-hidden="true">11.4.</strong> SIMOVE</a></li></ol></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/MotorControllersHeading.html"><strong aria-hidden="true">12.</strong> Motor controllers</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/MotorControllersCommon/MotorControllersCommon-en.html"><strong aria-hidden="true">12.1.</strong> Motor controller common</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Schwarzmueller/SchwarzmuellerSetupInstructions/SchwarzmuellerSetupInstructions-en.html"><strong aria-hidden="true">12.2.</strong> Schwarzmueller setup</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Schwarzmueller/SchwarzmuellerParameterSetupInstructions/SchwarzmuellerParameterSetupInstructions-en.html"><strong aria-hidden="true">12.2.1.</strong> Schwarzmueller parameters</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Schwarzmueller/SchwarzmuellerTroubleshooting/SchwarzmuellerTroubleshooting-en.html"><strong aria-hidden="true">12.2.2.</strong> Schwarzmueller troubleshooting</a></li></ol></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Curtis/CurtisMotorController-en.html"><strong aria-hidden="true">12.3.</strong> Curtis</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Engel/EngelMotorController-en.html"><strong aria-hidden="true">12.4.</strong> Engel</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Kinco/KincoMotorController-en.html"><strong aria-hidden="true">12.5.</strong> Kinco</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Nanotec/NanotecMotorController-en.html"><strong aria-hidden="true">12.6.</strong> Nanotec</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Oriental/OrientalMotorController-en.html"><strong aria-hidden="true">12.7.</strong> Oriental</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Synapticon/SynapticonMotorController-en.html"><strong aria-hidden="true">12.8.</strong> Synapticon</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Roboteq/RoboteqOpenLoopControllerConfiguration-en.html"><strong aria-hidden="true">12.9.</strong> Roboteq Open loop</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Roboteq/RoboteqClosedLoopControllerConfiguration-en.html"><strong aria-hidden="true">12.10.</strong> Roboteq Closed loop</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/MiControl/MiControlMotorController-en.html"><strong aria-hidden="true">12.11.</strong> MiControl</a></li></ol></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/ScannerConfigurations/ScannerHeading.html"><strong aria-hidden="true">13.</strong> Laser scanners</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../AgvInterfaces/ScannerConfigurations/ScannerConfigurations-en.html"><strong aria-hidden="true">13.1.</strong> Scanner configurations</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/ScannerCommunicationTroubleshoot/ScannerCommunicationTroubleshoot-en.html"><strong aria-hidden="true">13.2.</strong> Scanner communication troubleshooting</a></li></ol></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/OpticalCodeReader/OpticalCodeReader.html"><strong aria-hidden="true">14.</strong> Optical code reader</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/Encoders/EncoderHeading.html"><strong aria-hidden="true">15.</strong> Encoders</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../AgvInterfaces/Encoders/EthercatEncoders/EthercatEncoders-en.html"><strong aria-hidden="true">15.1.</strong> EtherCAT encoders</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">User interfaces</li><li class="chapter-item expanded "><a href="../../CustomerUis/NavitrolMonitor/NavitrolMonitor-en.html"><strong aria-hidden="true">16.</strong> Navitrol Monitor</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../CustomerUis/NavitrolMonitor3rdPartyLicenses/NavitrolMonitor3rdPartyLicenses-en.html"><strong aria-hidden="true">16.1.</strong> Navitrol Monitor third party licenses</a></li></ol></li><li class="chapter-item expanded "><a href="../../CustomerUis/WebInterface/WebInterface-en.html"><strong aria-hidden="true">17.</strong> Navitrol web interface</a></li><li class="chapter-item expanded "><a href="../../CustomerUis/Parameter Tool/ParameterTool-en.html"><strong aria-hidden="true">18.</strong> Parameter Tool Beta</a></li><li class="chapter-item expanded affix "><li class="part-title">Localization</li><li class="chapter-item expanded "><a href="../../Localization/PositionConfidence/PositionConfidence-en.html"><strong aria-hidden="true">19.</strong> Position confidence</a></li><li class="chapter-item expanded "><a href="../../Localization/ScannerCalibration/ScannerCalibration-en.html"><strong aria-hidden="true">20.</strong> Scanner calibration</a></li><li class="chapter-item expanded "><a href="../../Localization/EnvironmentGuidelines/EnvironmentGuidelines-en.html"><strong aria-hidden="true">21.</strong> Environment guidelines</a></li><li class="chapter-item expanded "><a href="../../Localization/AutomaticOdometryCorrection/AutomaticOdometryCorrection-en.html"><strong aria-hidden="true">22.</strong> Automatic odometry correction</a></li><li class="chapter-item expanded "><a href="../../Localization/ReflectorBasedPositionInitialization/ReflectorBasedPositionInitialization-en.html"><strong aria-hidden="true">23.</strong> Reflector based position initialization</a></li><li class="chapter-item expanded "><a href="../../Localization/PrecisionPositioning/PrecisionPositioning-en.html"><strong aria-hidden="true">24.</strong> Precision positioning</a></li><li class="chapter-item expanded "><a href="../../Localization/LocalizationScannerChangeOnTheFly/LocalizationScannerChangeOnTheFly-en.html"><strong aria-hidden="true">25.</strong> Changing scanner on the fly</a></li><li class="chapter-item expanded "><a href="../../Localization/RampZones/RampZones-en.html"><strong aria-hidden="true">26.</strong> Ramp zones</a></li><li class="chapter-item expanded "><a href="../../Localization/GpsPositioning/GpsPositioning-en.html"><strong aria-hidden="true">27.</strong> GPS Positioning</a></li><li class="chapter-item expanded "><a href="../../Localization/ImuAndSensorFusion/ImuAndSensorFusion-en.html"><strong aria-hidden="true">28.</strong> IMU and sensor fusion</a></li><li class="chapter-item expanded "><a href="../../Localization/ExternalLocalization/ExternalLocalization-en.html"><strong aria-hidden="true">29.</strong> External localization</a></li><li class="chapter-item expanded "><a href="../../Localization/DynamicMapping/DynamicMappingServer/DynamicMappingServer-en.html"><strong aria-hidden="true">30.</strong> Dynamic mapping server</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Localization/DynamicMapping/DynamicMappingServerAndClientCompatibility/DynamicMappingServerAndClientCompatibility-en.html"><strong aria-hidden="true">30.1.</strong> Dynamic mapping client/server compatibility</a></li><li class="chapter-item expanded "><a href="../../Localization/DynamicMapping/DynamicMappingServerHardwareRequirements/DynamicMappingServerHardwareRequirements.html"><strong aria-hidden="true">30.2.</strong> Dynamic mapping client/server hardware requirements</a></li></ol></li><li class="chapter-item expanded "><a href="../../Localization/WheelSlipping/WheelSlipping-en.html"><strong aria-hidden="true">31.</strong> Wheel slipping diagnostic</a></li><li class="chapter-item expanded "><a href="../../Localization/3dPositioning/3dPositioning-en.html"><strong aria-hidden="true">32.</strong> 3D positioning</a></li><li class="chapter-item expanded affix "><li class="part-title">Position control</li><li class="chapter-item expanded "><a href="../../PositionControl/StartOffsetSlowdown/StartOffsetSlowdown-en.html"><strong aria-hidden="true">33.</strong> Start offset slowdown</a></li><li class="chapter-item expanded "><a href="../../PositionControl/CoupledDriving/CoupledDrivingFeature-en.html"><strong aria-hidden="true">34.</strong> Coupled driving</a></li><li class="chapter-item expanded "><a href="../../PositionControl/MagneticLineFollowing/MagneticLineFollowing-en.html"><strong aria-hidden="true">35.</strong> Magnetic line following</a></li><li class="chapter-item expanded "><a href="../../PositionControl/TrailerTransport/TrailerTransport-en.html"><strong aria-hidden="true">36.</strong> Trailer transport</a></li><li class="chapter-item expanded "><a href="../../PositionControl/BarrierStop/BarrierStop-en.html"><strong aria-hidden="true">37.</strong> Barrier stop</a></li><li class="chapter-item expanded "><a href="../../PositionControl/DataMatrixDocking/DataMatrixDockingDMC-en.html"><strong aria-hidden="true">38.</strong> Data Matrix Code Docking V2</a></li><li class="chapter-item expanded "><a href="../../PositionControl/Docking/Docking-en.html"><strong aria-hidden="true">39.</strong> Docking</a></li><li class="chapter-item expanded affix "><li class="part-title">Drive control</li><li class="chapter-item expanded "><a href="../../DriveControl/DrivingOptions/DrivingOptions-en.html"><strong aria-hidden="true">40.</strong> Driving options</a></li><li class="chapter-item expanded "><a href="../../DriveControl/Standalone/Standalone-en.html"><strong aria-hidden="true">41.</strong> Standalone</a></li><li class="chapter-item expanded "><a href="../../DriveControl/StopAndHold/StopAndHold-en.html"><strong aria-hidden="true">42.</strong> Stop-and-hold</a></li><li class="chapter-item expanded "><a href="../../DriveControl/VDA5050/VDA5050-en.html" class="active"><strong aria-hidden="true">43.</strong> VDA 5050</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../DriveControl/VDA5050/VDA5050FeatureMatrix-en.html"><strong aria-hidden="true">43.1.</strong> VDA 5050 Support status</a></li></ol></li><li class="chapter-item expanded "><a href="../../DriveControl/ReturnToRoute/ReturnToRoute-en.html"><strong aria-hidden="true">44.</strong> Return to route</a></li><li class="chapter-item expanded "><a href="../../DriveControl/ObstacleAvoidance/ObstacleAvoidance-en.html"><strong aria-hidden="true">45.</strong> Obstacle avoidance</a></li><li class="chapter-item expanded "><a href="../../DriveControl/ObstacleAvoidanceV2/ObstacleAvoidanceV2-en.html"><strong aria-hidden="true">46.</strong> Obstacle avoidance V2</a></li><li class="chapter-item expanded "><a href="../../DriveControl/ContainerDriving/ContainerDriving-en.html"><strong aria-hidden="true">47.</strong> Container driving</a></li><li class="chapter-item expanded "><a href="../../DriveControl/RecordAndPlay/RecordAndPlay-en.html"><strong aria-hidden="true">48.</strong> Record and Play</a></li><li class="chapter-item expanded "><a href="../../DriveControl/RouteFreeNavigation/RouteFreeNavigation-en.html"><strong aria-hidden="true">49.</strong> Route free navigation</a></li><li class="chapter-item expanded affix "><li class="part-title">Kinematics</li><li class="chapter-item expanded "><a href="../../Kinematics/OmniSteerLimit/OmniSteerLimit-en.html"><strong aria-hidden="true">50.</strong> Omni steer limit</a></li><li class="chapter-item expanded "><a href="../../Kinematics/OneDriveWheelOmni/OneDriveWheelOmni-en.html"><strong aria-hidden="true">51.</strong> Omni one drive wheel</a></li><li class="chapter-item expanded affix "><li class="part-title">Pickup and drop-off</li><li class="chapter-item expanded "><a href="../../LoadHandling/ActuatorControl/ActuatorControl-en.html"><strong aria-hidden="true">52.</strong> Actuator control</a></li><li class="chapter-item expanded "><a href="../../LoadHandling/ScannerLiftActuator/ScannerLiftActuator-en.html"><strong aria-hidden="true">53.</strong> Scanner lift actuator</a></li><li class="chapter-item expanded "><a href="../../LoadHandling/Racking/Racking-en.html"><strong aria-hidden="true">54.</strong> Racking</a></li><li class="chapter-item expanded "><a href="../../LoadHandling/BufferLanes/BufferLanes-en.html"><strong aria-hidden="true">55.</strong> Buffer lanes</a></li><li class="chapter-item expanded "><a href="../../LoadHandling/StackLoading/StackLoading-en.html"><strong aria-hidden="true">56.</strong> Loading from a stack</a></li><li class="chapter-item expanded "><a href="../../LoadHandling/BlockStacking/BlockStacking-en.html"><strong aria-hidden="true">57.</strong> Unloading to a stack</a></li><li class="chapter-item expanded "><a href="../../LoadHandling/DistanceToTarget/DistanceToTarget-en.html"><strong aria-hidden="true">58.</strong> Distance to target estimation</a></li><li class="chapter-item expanded affix "><li class="part-title">Target and obstacle detection</li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/PalletDetection/PalletDetection-en.html"><strong aria-hidden="true">59.</strong> Pallet detection</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/3dTargetDetection/3dTargetDetection-en.html"><strong aria-hidden="true">60.</strong> 3D Target detection</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/PatternDetection/PatternDetection-en.html"><strong aria-hidden="true">61.</strong> Pattern detection</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/ObstacleDetection/ObstacleDetection-en.html"><strong aria-hidden="true">62.</strong> Obstacle detection</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/ExternalTargetDetection/ExternalTargetDetection-en.html"><strong aria-hidden="true">63.</strong> External target detection</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/TableDetection/TableDetection-en.html"><strong aria-hidden="true">64.</strong> Table detection</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/Wallmonitoring/Wallmonitoring-en.html"><strong aria-hidden="true">65.</strong> Wall monitoring</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/OccupancyCheck/OccupancyCheck-en.html"><strong aria-hidden="true">66.</strong> Occupancy check</a></li><li class="chapter-item expanded affix "><li class="part-title">Miscellaneous</li><li class="chapter-item expanded "><a href="../../Miscellaneous/ErrorDescriptions/ErrorDescriptions-en.html"><strong aria-hidden="true">67.</strong> Error descriptions</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/Logging/Logging-en.html"><strong aria-hidden="true">68.</strong> Logging</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/LinuxImageInstallation/LinuxImagesHeading.html"><strong aria-hidden="true">69.</strong> Linux image installation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Miscellaneous/LinuxImageInstallation/CanDrivers/CanDrivers-en.html"><strong aria-hidden="true">69.1.</strong> CAN drivers</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/LinuxImageInstallation/Clonezilla/ClonezillaInstallation-en.html"><strong aria-hidden="true">69.2.</strong> Clonezilla</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/LinuxImageInstallation/DebianBuster/DebianBusterInstallation-en.html"><strong aria-hidden="true">69.3.</strong> Debian Buster</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/LinuxImageInstallation/DebianBullseye/DebianBullseyeInstallation-en.html"><strong aria-hidden="true">69.4.</strong> Debian Bullseye</a></li></ol></li><li class="chapter-item expanded "><a href="../../Miscellaneous/ParameterZones/ParameterZones-en.html"><strong aria-hidden="true">70.</strong> Parameter zones</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/Reflectors/Reflectors-en.html"><strong aria-hidden="true">71.</strong> Reflectors</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/SslCertificates/SslCertificates-en.html"><strong aria-hidden="true">72.</strong> SSL Certificate configuration</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/BatteryOvertemperatureActions/BatteryOvertemperatureActions.html"><strong aria-hidden="true">73.</strong> Battery overtemperature actions</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/Charging/Charging-en.html"><strong aria-hidden="true">74.</strong> Charging and battery management</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/HardwareRequirements/HardwareRequirements-en.html"><strong aria-hidden="true">75.</strong> Hardware requirements</a></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="dark">Dark</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">NAVITROL USER INSTRUCTIONS - Navitec Systems Oy CONFIDENTIAL</h1>

                    <div class="right-buttons">
                                                <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="vda5050-interface"><a class="header" href="#vda5050-interface">VDA5050 interface</a></h1>
<p>Updated 26.08.2024</p>
<hr />
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>The VDA5050 interface allows the interoperability of different fleet control systems with the AGV control software.
The protocol is based on JSON data serialization format that is sent over MQTT broker. The AGV publishes status, connection and visualization topics and listens to order and instantActions topics.
The topics have the following format</p>
<blockquote>
<p>uagv/ProtocolVersion/Manufacturer/SerialNumber/topic
eg.
uagv/v1/Navitec/0001/connection</p>
</blockquote>
<p>The AGV control software implements several versions of the VDA5050 protocol for interoperability with different fleetcontrol systems. Only one of these dialects is active at a time. </p>
<p>Unfortunately, the documentation for VDA5050 protocol version 1.012 is no longer available online. The protocol version 2.0 is available at https://github.com/VDA5050/VDA5050/releases/tag/2.0.0 and version 1.1 at https://github.com/VDA5050/VDA5050/blob/1.1.0/VDA5050_EN.md</p>
<h3 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h3>
<ul>
<li>The VDA5050 interface requires separate license option.</li>
<li>The interface has to be enabled in the parameters</li>
</ul>
<h2 id="parameters"><a class="header" href="#parameters">Parameters</a></h2>
<table><thead><tr><th>Parameter name</th><th>Default value</th><th>Description</th></tr></thead><tbody>
<tr><td>vdma_version</td><td>2</td><td>VDMA version - 0 = v1.01.2, 1 = v1.1, 2 = v.2.0.</td></tr>
<tr><td>vdma_drive_order_type</td><td>2</td><td>VDMA dialect - 0 = JSON mapped segment (v.1.01.2), 1 = Segment based dialect (v1.1 and v2.0), 2 = Trajectory based (v1.1 and v2.0).</td></tr>
<tr><td>vdma_host</td><td>127.0.0.1</td><td>Hostname or IP of the MQTT broker the VDMA interface should connect to</td></tr>
<tr><td>vdma_port</td><td>1883</td><td>The port the MQTT broker for VDMA interface is on</td></tr>
<tr><td>vdma_manufacturer</td><td>Navitec</td><td>The name of the AGV manufacturer for the VDMA interface</td></tr>
<tr><td>vdma_serial_number</td><td>0001</td><td>The serial number of the AGV for the VDMA interface</td></tr>
<tr><td>vdma_visualization_interval_ms</td><td>1000</td><td>The update interval [ms] for the visualization topic. 0 to disable</td></tr>
<tr><td>vdma_mqtt_password</td><td></td><td>Password for connecting to the MQTT broker</td></tr>
<tr><td>vdma_mqtt_user</td><td></td><td>Username for connecting to the MQTT broker</td></tr>
<tr><td>vdma_area_name_override</td><td></td><td>Override the area name from map, in case the fleet control uses different name</td></tr>
<tr><td>vdma_interface_name</td><td>uagv</td><td>The interface name part of the MQTT topics</td></tr>
<tr><td>vdma_topic_override_version</td><td>0</td><td>Override the version number part of the MQTT topic name. 0 to use default (no override)</td></tr>
<tr><td>log_dump_vdma_max_files</td><td>20</td><td>Maximum number of log files triggered by VDMA to keep on disk.</td></tr>
<tr><td>fleet_control_type</td><td>0</td><td>0 - No fleet control, 1 - Our own fleet control, 2 - External fleet control, 3 - VD(M)A fleet control</td></tr>
<tr><td>vdma_default_drive_speed_m_p_s</td><td>2.0</td><td>In trajectory drive mode, the default drive speed if no drive speed is given</td></tr>
<tr><td>vdma_traj_min_radius_m</td><td>0.5</td><td>The turning radius used in the trajectory interpolation (trajectory mode only)</td></tr>
<tr><td>vdma_traj_pt_dist_m</td><td>0.1</td><td>How dense the trajectory interpolation is before the spline smoothing is applied</td></tr>
<tr><td>vdma_traj_interpolation_type</td><td>2</td><td>0 disables the trajectory interpolation (only spline smoothing), 1 uses the Dubins curves, 2 - Linear interpolation (default)</td></tr>
<tr><td>log_vdma_extra</td><td>0</td><td>1 enables extra logging for debug purposes</td></tr>
<tr><td>vdma_debug_topic_enabled</td><td>0</td><td>1 publishes extra debug information on the MQTT broker (about the interpolated trajectory)</td></tr>
<tr><td>vdma_actions_check_sp</td><td>1</td><td>Require compatible symbol point on the map to perform certain actions (eg. loading) 1 yes, 0 no</td></tr>
<tr><td>vdma_actions_sp_close_dist</td><td>0.3</td><td>How close does the symbol point have to be to be accepted (see previous parameter)</td></tr>
<tr><td>vdma_treat_all_loads_as_racks</td><td>0</td><td>In the trajectory mode, forces the VDA to treat all load&amp;unload as racks</td></tr>
<tr><td>vdma_ssl_mode</td><td>1</td><td>0 Disable, 1 use the same parameters as the rest of Navitrol (ssl_enabled, ssl_agv_certificate_file, ssl_agv_key_file, ssl_pem_password, ssl_ca_file, ssl_cipher_list), 2 Enable using separate parameters (vdma_ssl_agv_certificate_file, vdma_ssl_agv_key_file, vdma_ssl_pem_password, vdma_ssl_ca_file, vdma_ssl_cipher_list)</td></tr>
<tr><td>vdma_ssl_agv_certificate_file</td><td></td><td>The name of the certificate file to use to identify the AGV. Empty means none.</td></tr>
<tr><td>vdma_ssl_agv_key_file</td><td></td><td>The keyfile used by the AGV. Only needed if vdma_ssl_agv_certificate_file is set</td></tr>
<tr><td>vdma_ssl_pem_password</td><td></td><td>The password used to unlock the key file</td></tr>
<tr><td>vdma_ssl_ca_file</td><td>./agv_certs/root.crt</td><td>The root certificate file used to verify the server certificate</td></tr>
<tr><td>vdma_ssl_cipher_list</td><td></td><td>The list of allowed ciphers. Empty means use default cipher list</td></tr>
<tr><td>vdma_ssl_version</td><td>2</td><td>Which TLS version to use.   0 = TLS v1, 1 = TLS v1.1 and 2 = TLS v1.2</td></tr>
<tr><td>vdma_ssl_verify_hostname</td><td>1</td><td>Whether the certificate hostname is required to match the actual server hostname. 1 = Yes, 0 = No</td></tr>
<tr><td>vdma_escalate_errors_to_fatal_timeout_s</td><td>0.0</td><td>Navitrol errors are first considered 'warnings' until this time passes and then escalated to 'fatal'</td></tr>
<tr><td>vdma_error_reporting_policy</td><td>0</td><td>0 report only active Navitrol errors, 1 Keep orders that happen during drive order active for longer time</td></tr>
<tr><td>vdma_loadunload_check_load_state</td><td>1</td><td>Should vdma load&amp;unload actions check the AGV load state.</td></tr>
<tr><td>vdma_trivially_reach_multiple_nodes</td><td>1</td><td>Make the VDA5050 interface treat multiple nodes in the beginning of the order as trivially reachable.</td></tr>
<tr><td>vdma_use_symbolic_points_for_actions</td><td>0</td><td>Use virtual symbolic points to implement actions. Currently only used for racking</td></tr>
<tr><td>vdma_pivot_generation_angle_deg</td><td>30.0</td><td>Automatically generate pivots if there are sharper corners in the route than this</td></tr>
<tr><td>vdma_rotation_on_edge_margin_points</td><td>2</td><td>When rotating on an edge, reach the target orientation this many (linear interpolation) points before the end of the edge. Increase if the AGV doesn't reach the target orientation in time.</td></tr>
<tr><td>vdma_reverse_tolerance_deg</td><td>90</td><td>Tolerance for reversing on an edge, in degrees. AGV will reverse when edge has tangential orientation that deviates from PI at most by this margin</td></tr>
<tr><td>vdma_clear_order_when_losing_position</td><td>1</td><td>Make the VDA5050 interface clear the order if position is not initialized.</td></tr>
<tr><td>vdma_escalate_errors_to_fatal_timeout_s</td><td>0.0</td><td>Timeout for escalating errors to fatal. Navitrol errors are initially reported as 'warnings' and changed to 'fatal' after this time. 0 = disabled (immediately fatal).</td></tr>
</tbody></table>
<h2 id="v20-navitec-trajectory-based-dialect"><a class="header" href="#v20-navitec-trajectory-based-dialect">v2.0 Navitec trajectory based dialect</a></h2>
<h3 id="how-to-enable"><a class="header" href="#how-to-enable">How to enable</a></h3>
<p>Set <strong>fleet_control_type</strong> to 3 and <strong>vdma_version</strong> to 2 and <strong>vdma_drive_order_type</strong> to 2. <strong>vdma_host</strong> and <strong>vdma_port</strong> should be configured to the address where the fleet control software (or in some cases separate MQTT broker) is running. Navithor has a built-in MQTT broker. If the broker uses username and password to authenticate, those should be set in <strong>vdma_mqtt_user</strong> and <strong>vdma_mqtt_password</strong>. In this mode the Navitrol doesn't require a route definition file, but will still require an environment model if Navitrol is responsible for localization.</p>
<h2 id="description"><a class="header" href="#description">Description</a></h2>
<p>This is perhaps the most natural version of VDA5050 for use with third party fleet control systems. The drive is based on node coordinates and optionally edge trajectories and node and edge names don't have to encode any special information.</p>
<h3 id="trajectories-on-edges"><a class="header" href="#trajectories-on-edges">Trajectories on edges</a></h3>
<p>The edge trajectory currently only supports degree 1. It doesn't use any actual NURBS algrithm, but fits a spline to the points internally. The trajectory points can specify orientation as in v1.1 specification, but that may be dropped when the implementation evolves.</p>
<h3 id="rotationallowed-property"><a class="header" href="#rotationallowed-property">rotationAllowed property</a></h3>
<p>The rotation allowed property defaults to 'false' on edges with trajectory (contrary to what the VDA5050 specification says). If you try to specify rotationAllowed property as &quot;true&quot; on an edge with a trajectory, it will cause an error and the drive order will be rejected. We consider the rotationAllowed to be an allowance for the AGV, an option we choose not to exercise in this case. This is because rotating on a curved trajectory would require careful control to make sure the driving is smooth.</p>
<h3 id="pivot-points"><a class="header" href="#pivot-points">Pivot points</a></h3>
<p>To encode a pivot point, use two edges with the &quot;rotationAllowed&quot; property set to false. The AGV will pivot where the edges meet.</p>
<h3 id="direction-changes"><a class="header" href="#direction-changes">Direction changes</a></h3>
<p>The drive direction is determined by the orientation of the previous node or the orientation of the edge. orientationType property can be set to GLOBAL or TANGENTIAL as in v2.0 specification.
When the orientation is opposite to route orientation, the AGV will reverse. For the direction change to work, there should be a sharp corner in the route. </p>
<h3 id="route-interpolation"><a class="header" href="#route-interpolation">Route interpolation</a></h3>
<p>Navitrol will attempt to interpolate between node coordinates if the nodes are far apart. The interpolation is similar to Dubins curve: it contains only circle arcs and straight lines. These are further softened a little bit before driving.</p>
<h3 id="actuator-control"><a class="header" href="#actuator-control">Actuator control</a></h3>
<p>If the AGV has reference controlled actuator, for example a fork lift, the reference base height comes from parameter <strong>actuator_home_val_mm</strong> (default 0 mm). The actuator has also minimum and maximum height (<strong>actuator_min_val</strong> &amp;&amp; <strong>actuator_max_val</strong>) defined. A load aboard offset (<strong>actuator_load_aboard_offset_mm</strong>) is added on top of the base height when the AGV is carrying a load.</p>
<p>There are custom actuator actions supported for the trajectory based dialect called &quot;setActuator&quot; and &quot;releaseActuator&quot;. The &quot;setActuator&quot; action can be used to set for example a fork lift height according to a shelf height in a node before the pick/drop node so that the AGV has the fork's at correct height before driving to the shelf location. When the AGV has driven away from the shelf location, another node with &quot;releaseActuator&quot; action can be set to control the forks back to the normal base height i.e. home position.</p>
<p>Additionally <em>pick</em> and <em>setActuator</em> actions can override the <strong>actuator_load_aboard_offset_mm</strong>, the parameter that determines the difference between the actuator reference height when the AGV is carrying a load and when it is not. This is useful when the AGV is picking up a load that needs to be carried at a different height than the default load aboard offset. Both actions can override this parameter by setting a value for the &quot;loadAboardOffset&quot; parameter. This parameter is valid until the next <em>drop</em> actions. When AGV executes a <em>drop</em> action, the load aboard offset is set back to the default value (i.e., <strong>actuator_load_aboard_offset_mm</strong>). This feature is implemented in version 6.56.</p>
<p><em>Important: Navitrol stores actuator reference height for safety, if Navitrol is restarted between the &quot;setActuator&quot; and &quot;releaseActuator&quot; actions. To reset actuator to home position send order with &quot;releaseActuator&quot; action. Alternatively, release the height by moving the actuator manually using Navitec's UI tools (e.g., Actuator control form in Navitrol Monitor). Always drive AGV out from the rack manually before releasing the actuator!</em></p>
<table><thead><tr><th>Action</th><th>Implemented (Navitrol version)</th><th>Custom</th><th>Notes</th></tr></thead><tbody>
<tr><td>pick</td><td>Yes (6.38)</td><td>No</td><td></td></tr>
<tr><td>drop</td><td>Yes (6.38)</td><td>No</td><td></td></tr>
<tr><td>setActuator</td><td>Yes (6.52)</td><td>Yes</td><td>Set actuator base height at node and keep until released. <br> Parameter: &quot;height&quot; [m]</td></tr>
<tr><td>releaseActuator</td><td>Yes (6.52)</td><td>Yes</td><td>Release actuator height that was set with &quot;setActuator&quot; action. No parameters.</td></tr>
</tbody></table>
<h3 id="pallet-detection-and-docking"><a class="header" href="#pallet-detection-and-docking">Pallet detection and docking</a></h3>
<p>Navitrol supports docking to a pallet using action &quot;detectObject&quot; on an edge. Enable docking from parameters <strong>docking_to_target_enabled &gt; 0</strong>. The node following the edge should be the assumed pick-up location. Set the &quot;allowedDeviationXY&quot; for the node to be large enough as the actual pick-up position will vary based on the position of the pallet. The optional &quot;objectType&quot; parameter can be left out from the message or set to a string &quot;PALLET&quot;. Parameters for the pallet detection and docking should be adjusted. Read <a href="../../TargetAndObstacleDetection/PalletDetection/PalletDetection-en.html">Pallet detection</a> document to get more information.</p>
<p>There is also optional parameter called &quot;duration&quot; [s] which is a timeout for the action. If the docking has not finished in the specified time, the action will fail. By default there is no timeout for the action. The action will fail if the drive is interrupted on the edge (e.g., error is raised or docking fails for some reason). To reach the next node, it is required that the action finishes succesfully. In case of failure, cancel the current order before giving a new order.</p>
<table><thead><tr><th>Action</th><th>Navitrol version</th><th>Custom</th><th>Notes</th></tr></thead><tbody>
<tr><td>detectObject</td><td>6.54</td><td>No</td><td>Edge action used for docking to a pallet. <br> action parameters:<br> &quot;objectType&quot; (string, optional) <br> &quot;duration&quot; (Integer, optional) [s]</td></tr>
</tbody></table>
<h3 id="buffer-lanes"><a class="header" href="#buffer-lanes">Buffer lanes</a></h3>
<p><a href="../../LoadHandling/BufferLanes/BufferLanes-en.html">Buffer lane</a> is feature that allows to pickup or drop-off loads that are in a queue. To activate the feature, the order must be given to a node with either pick or drop action that has stationType &quot;buffer&quot;, and the edge leading to the node must have action &quot;detectObject&quot;. The loads are placed in a straight queue on the edge leading to the node.</p>
<p>The length of the buffer lane is determined by the allowed deviation object &quot;allowedDeviationXY&quot; of the node, and the loads should be placed within this length. Navitrol validates that the length is given and reports error with errorType &quot;invalidAction&quot; if it is not. The edge leading to the node should be long enough so that the AGV has time and space to detect the first load on the edge and possibly to dock to it.</p>
<p>There are required parameters that need to be set to use the buffer lane feature itself. Read <a href="../../LoadHandling/BufferLanes/BufferLanes-en.html">Buffer lane</a> document for more information. Specifically for VDA-5050, parameter <strong>unload_buffer_error_when_lane_full</strong> is recommended to be set to 1. This is to detect a failed state when the drop buffer lane is already full of loads.</p>
<table><thead><tr><th>Action</th><th>Navitrol version</th><th>Custom</th><th>Notes</th></tr></thead><tbody>
<tr><td>detectObject (edge) <br> <strong>And</strong> <br> pick / drop (node)</td><td>6.54</td><td>No</td><td>Buffer lane actions are started on an edge with &quot;detectObject&quot; action that leads to a node with pick/drop action having stationType &quot;buffer&quot;.</td></tr>
</tbody></table>
<h3 id="block-stacking"><a class="header" href="#block-stacking">Block stacking</a></h3>
<p>With block stacking feature the pallets can be either <a href="../../LoadHandling/StackLoading/StackLoading-en.html">picked from a stack</a> or <a href="../../LoadHandling/BlockStacking/BlockStacking-en.html">dropped to a stack</a>. Dropping to the stack always requires also a buffer lane but picking from a stack can be performed without one from a single stack. To enable these features, configure the related parameters with the help of the documentation.</p>
<p>The feature can be activated with an order to a node with pick or drop action that has stationType &quot;stack&quot;, and the edge leading to the node must have action &quot;detectObject&quot;. To incorporate the block stacking with <a href="#buffer-lanes">buffer lane</a>, the stationType should have value &quot;buffer stack&quot;.</p>
<p>The action is required to finish on the edge before the node is reached and pick/drop action can be performed. In case the action fails due to any interrupt while doing the block stacking sequence, the order should be cancelled and then new order must be given.</p>
<table><thead><tr><th>Action</th><th>Navitrol version</th><th>Custom</th><th>Notes</th></tr></thead><tbody>
<tr><td>detectObject (edge) <br> <strong>And</strong> <br> pick / drop (node)</td><td>6.56</td><td>No</td><td>Block stacking actions are started on an edge with &quot;detectObject&quot; action that leads to a node with pick/drop action having stationType &quot;buffer stack&quot; or &quot;stack&quot; (latter only for pick action).</td></tr>
</tbody></table>
<h3 id="factsheet-topic"><a class="header" href="#factsheet-topic">Factsheet topic</a></h3>
<p>Navitrol supports sending a <strong>factsheet</strong> topic to the fleet control, as specified in VDA5050 2.0. The data that is sent is currently a fixed base document describing the implementation, but manufacturer specific values can be set in vda_factsheet.json file. This file should be placed in the folder containing the Navitrol executable. The file must contain a JSON object that gets recursively merged with the base values: if a key is present in the object its value will override the value in the base factsheet unless the value is an object in which case it will get merged with the object in the base factsheet using this same recursive strategy. The base factsheet describes the trajectory based VDA5050 dialect, so the sending is automatically disabled if another dialect has been picked. <strong>Be careful when editing the factsheet as the values are not checked for standard conformance before sending them to the fleet control.</strong> See VDA5050 standard documentation for the structure of factsheet and the possible values.</p>
<p>An example of a vda_factsheet.json that overrides the seriesName property</p>
<pre><code class="language-json">{
    &quot;typeSpecification&quot;: {
        &quot;seriesName&quot;: &quot;Exampe of an override value&quot;
    }
}
</code></pre>
<h2 id="navitec-trajectory-based-dialect"><a class="header" href="#navitec-trajectory-based-dialect">Navitec trajectory based dialect</a></h2>
<h3 id="how-to-enable-1"><a class="header" href="#how-to-enable-1">How to enable</a></h3>
<p>Set <strong>fleet_control_type</strong> to 3 and <strong>vdma_version</strong> to 1 and <strong>vdma_drive_order_type</strong> to 2.  Otherwise the configuration is the same as for the <strong>v2.0 Navitec trajectory based dialect</strong></p>
<h2 id="description-1"><a class="header" href="#description-1">Description</a></h2>
<p>This is very similar to <strong>v2.0 Navitec trajectory based dialect</strong> except that it sends v1.1.0 as the version number. When receiving v1.1 orders, there are couple of small differences, such as the default value for rotationAllowed property and the coordiate system in which the route orientations are given. Please refer to the protocol specification for details if needed.</p>
<h2 id="navitec-segment-id-based-dialect"><a class="header" href="#navitec-segment-id-based-dialect">Navitec segment ID based dialect</a></h2>
<h3 id="how-to-enable-2"><a class="header" href="#how-to-enable-2">How to enable</a></h3>
<p>Set <strong>fleet_control_type</strong> to 3 and <strong>vdma_version</strong> to 1 or 2 and <strong>vdma_drive_order_type</strong> to 1. <strong>vdma_host</strong> and <strong>vdma_port</strong> should be configured to the address where the fleet control software (or in some cases separate MQTT broker) is running. Navithor has a built-in MQTT broker. If the broker uses username and password to authenticate, those should be set in <strong>vdma_mqtt_user</strong> and <strong>vdma_mqtt_password</strong>.</p>
<h3 id="description-2"><a class="header" href="#description-2">Description</a></h3>
<p>This is the first VDA5050 implementation that is interoperable with the Navithor fleet control. The Navitec segment ID based dialect is based on VDA5050 version 1.1. It uses the edge IDs to send the route segments that form the drive order. There are some custom extensions to the protocol that allow things like sending an fstop (which immediately stops the machine) and handling environment and segment files.</p>
<h3 id="edge-and-node-names"><a class="header" href="#edge-and-node-names">Edge and node names</a></h3>
<p>Navitrol doesn't depend on node names in this mode. Edge names should be either just segment IDs or, if there is an internal node in the middle of a segment, segment id followed by colon followed by a number, eg. &quot;2:2&quot;</p>
<h3 id="map-sharing"><a class="header" href="#map-sharing">Map sharing</a></h3>
<p>The VDA5050 interface doesnt at the moment specify how the maps should be shared between fleet control and AGV control software. Navitrol has its own map format for the environment, which is a binary file. The routes are stored in a proprietary XML-based format.
Navitrol implements two custom actions in the instantActions topic for the map sharing:</p>
<ol>
<li>getFileVersions is used to query the environment and route file versions. It takes no parameters and returns a string of the form actionVersion|environmentName|environmentVersion|segmentFileVersion|segmentFileMD5
<ul>
<li>actionVersion is 1 for this implementation</li>
<li>environmentName is the first 25 characters of area name, with any possible pipe characters replaced by an underscore; or empty string if no environment file is loaded</li>
<li>environmentVersion is the version of the environment file; or 0 if no environment file is loaded</li>
<li>segmentFileVersion is the version of the segment file; or 0 if no segment file exists</li>
<li>segmentFileMD5 is an md5 hash of the segment file as 32 hexadecimal numbers. All of these are 0 if no segment file is loaded.</li>
</ul>
</li>
<li>The fleet control then decides if it should send new files. Currently these files are sent with SFTP protocol, but it is intended to be replaced in the future. The drawback is that with SFTP the fleet control needs to know the IP of the AGV:s</li>
<li>The fleet control then issues reloadAreaFiles action, which causes Navitrol to read new files in. This action takes no parameters.</li>
</ol>
<h3 id="actions"><a class="header" href="#actions">Actions</a></h3>
<table><thead><tr><th>Name</th><th>Implemented (Navitrol version)</th><th>Custom</th><th>Notes</th></tr></thead><tbody>
<tr><td>initPosition</td><td>Yes (6.38)</td><td>No</td><td>MapID is the current floor ID</td></tr>
<tr><td>cancelOrder</td><td>Yes (6.38)</td><td>No</td><td></td></tr>
<tr><td>logRequest</td><td>Yes (6.38)</td><td>No</td><td>Saves the log with different name than other triggers</td></tr>
<tr><td>stateRequest</td><td>Yes (6.38)</td><td>No</td><td></td></tr>
<tr><td>startCharging</td><td>Yes (6.38)</td><td>No</td><td>Not tested</td></tr>
<tr><td>stopCharging</td><td>Yes (6.38)</td><td>No</td><td>Not tested</td></tr>
<tr><td>pick</td><td>Yes (6.38)</td><td>No</td><td>parameters not supported yet</td></tr>
<tr><td>drop</td><td>Yes (6.38)</td><td>No</td><td>parameters not supported yet</td></tr>
<tr><td>startPause</td><td>Yes (6.38)</td><td>Params</td><td>Supports also F-stop via parameter pauseType: &quot;fstop&quot;</td></tr>
<tr><td>stopPause</td><td>Yes (6.38)</td><td>Params</td><td>Supports also F-stop via parameter pauseType: &quot;fstop&quot;</td></tr>
<tr><td>reloadAreaFiles</td><td>Yes (6.38)</td><td>Yes</td><td>Reloads the segment and environment files</td></tr>
<tr><td>getFileVersions</td><td>Yes (6.38)</td><td>Yes</td><td>Return Environment and segment file versions</td></tr>
<tr><td>finePositioning</td><td>No</td><td>No</td><td></td></tr>
<tr><td>detectObject</td><td>Experimental</td><td>No</td><td>Support is implemented but has not been verified</td></tr>
</tbody></table>
<h2 id="v10-dialect"><a class="header" href="#v10-dialect">v1.0 dialect</a></h2>
<h3 id="how-to-enable-3"><a class="header" href="#how-to-enable-3">How to enable</a></h3>
<p>Set <strong>fleet_control_type</strong> to 3 and <strong>vdma_version</strong> to 0 and <strong>vdma_drive_order_type</strong> to 0. <strong>vdma_host</strong> and <strong>vdma_port</strong> should be configured to the address where the fleet control software (or in some cases separate MQTT broker) is running. If the broker uses username and password to authenticate, those should be set in <strong>vdma_mqtt_user</strong> and <strong>vdma_mqtt_password</strong>. <strong>vdma_area_name_override</strong> parameter can be set to the environment name that the fleet control is using. If not provided, the environment name is assumed to be the same as the area name in the environment file.</p>
<h3 id="description-3"><a class="header" href="#description-3">Description</a></h3>
<p>This dialect is based on VDA5050 version 1.012. It uses a JSON configuration file to convert the edge IDs to the segments that form the drive order. This file is called VDArouteNetwork.json</p>
<h2 id="background"><a class="header" href="#background">Background</a></h2>
<p>Navitrol drives based on a route network. This route network is defined in Navithor Tools and uploaded to the AGV. The routes are composed of segments and these segments have segment points. The segment point placement describes the geometrical properties of the routes and the network also contains information about the topological properties: which segments are reachable from any given other segments. On the segments, there are special points where the AGV performs functions such as charging and loading or unloading. These special points are called symbolic points in our terminology.
The fleet control traditionally gives the drive order to the AGV in the form of a list of segment IDs and a desired stopping point. The fleet control uses proprietary binary protocol for this purpose.
The AGV has limited capability to navigate outside the route network: in some obstacle avoidance scenarios the AGV may autonomously plan an avoidance route. The AGV is also capable of returning to the route network if its current location is sufficiently close to the network. Note that these functionalities have not yet been integrated with the VDMA protocol.
Because of this history, Navitrol receives a lot of the information it needs to perform actions or drive routes from the segment file. Some actions may not be available unless near a compatible symbolic point and some of the properties like frame headings etc. are read from the segment file rather than through the VDA5050 interface. Those optional properties are therefore not supported in the drive orders.
Because Navitrol implementation of VDA5050 support begun when the standard was still in its early phases, it is sometimes internally referred to as the VDMA protocol. This naming is currently used in eg. parameters.</p>
<h2 id="errors"><a class="header" href="#errors">Errors</a></h2>
<p>The VDA5050 protocol supports sending error messages to the fleet control software. How these errors are visualized to the user depends on the fleet control.
In addition to the errors specified by the standard, there are some errors that are custom to the drive control software.
Most of these internal errors are described in other documents. Here is a list of errors that you may encounter specific to the VDA interface.</p>
<table><thead><tr><th>errorType</th><th>Error Message</th><th>Explanation</th><th>Fix</th></tr></thead><tbody>
<tr><td>internalError</td><td>VDA5050 license option is missing from the AGV</td><td>VDA5050 support is sold as a separate license option and has not been enabled</td><td>Get a license with the option enabled and install it on the AGV</td></tr>
<tr><td>internalError</td><td>Failed to build route</td><td>Internal error when building a drive trajectory from the order</td><td>Send logs to support</td></tr>
<tr><td>internalError</td><td>Failed to send route</td><td>Internal error when sending the trajectory to the component controlling the drive</td><td>Send logs to support</td></tr>
<tr><td>versionMismatch</td><td>Segment file version # doesn't match route network file #</td><td>The VDArouteNetwork.json has gone offsync with the route fisegment file on the AGV</td><td>Re-export the files from Tools and upload to the AGV</td></tr>
<tr><td>modeError</td><td>Invalid mode for autodriving</td><td>AGV is in wrong mode for autodriving (eg. in manual control, driving disabled from supervisor status message 3002 section 7 Drive control)</td><td>Release manual control or enable drive orders from supervisor. If nothing else helps, restart the AGV.</td></tr>
<tr><td>noRouteError</td><td>Map id mismatch</td><td>Level ID in the order didn't match the expected value</td><td></td></tr>
<tr><td>noRouteError</td><td>Position not initialized</td><td>AGV doesn't know where it is and can't drive</td><td>Use fleet control to initialize the AGV position</td></tr>
<tr><td>noRouteError</td><td>Starting position too far</td><td>The starting position of the drive order is too far away from AGV position</td><td>Depends on fleet control</td></tr>
<tr><td>orderUpdateError</td><td>Order already active</td><td>The fleet control sent a new drive order, but previous one is still active</td><td>Cancel the previous order with cancelOrder action</td></tr>
<tr><td>invalidAction</td><td>Action type is not supported as instantAction</td><td>Some VDA5050 actions can only be used as a part of an order</td><td>Depends on fleet control</td></tr>
<tr><td>invalidAction</td><td>Action has invalid format or invalid parameters</td><td>An action was received, but it was malformed</td><td>Depends on the fleet control.</td></tr>
<tr><td>invalidAction</td><td>Action type is not supported, invalid parameters or invalid format</td><td>Fleet control sent an unsupported action or parameters as a part of the order</td><td>Depends on fleet control</td></tr>
<tr><td>noOrderToCancel</td><td></td><td>Cancel order action was sent by fleet control, but no order is active</td><td>Typically no fix needed</td></tr>
<tr><td>mapNameMismatch</td><td>Map name '' is not a valid level number</td><td>Fleet control sent a position initialization action with incorrect map ID</td><td>Make sure that the map files are in sync between the AGV and fleet control.</td></tr>
<tr><td>mapNameMismatch</td><td>Map name '' doesn't match expected ''</td><td>Fleet control sent a position initialization action with incorrect map ID</td><td>Make sure that the map files are in sync between the AGV and fleet control. Use 'vdma_area_name_override' parameter if needed</td></tr>
<tr><td>internalError</td><td>Failed to replace order</td><td>Something went wrong with order replacement</td><td>Contact support if this problem persists</td></tr>
<tr><td>orderUpdateError</td><td>Order update failed</td><td>Something went wrong in updating an existing drive order</td><td>Contact support if this problem persists</td></tr>
<tr><td>validationError</td><td><em>message depends on validation error</em></td><td>The fleetcontrol has sent an order that was somehow malformed. The problem is described in the message</td><td></td></tr>
</tbody></table>
<h2 id="critical-actions"><a class="header" href="#critical-actions">Critical actions</a></h2>
<p>A critical action is an action that has to be completed in order for the drive order to meaningfully continue. Therefore the critical actions upon failure cause the order to stop and a fatal error to be reported to the fleet control.
The actuator related actions pick, drop, setActuator and releaseActuator are critical by default. The criticality of individual actions can be configured using the <a href="../../Introduction/Parameters/JsonConfigurationFile-en.html">JSON configuration file</a> </p>
<p>Navitrol error levels are mapped to VDA5050 error levels according to the following rule:</p>
<table><thead><tr><th>Navitrol error level</th><th>VDA5050 error level</th></tr></thead><tbody>
<tr><td>Warning</td><td>Warning</td></tr>
<tr><td>Error (<strong>vdma_escalate_errors_to_fatal_timeout_s</strong> set)</td><td>First warning, then turns to fatal</td></tr>
<tr><td>Error (<strong>vdma_escalate_errors_to_fatal_timeout_s</strong> = 0)</td><td>Fatal</td></tr>
<tr><td>Fatal</td><td>Fatal</td></tr>
</tbody></table>
<h2 id="vda5050-ssl-configuration"><a class="header" href="#vda5050-ssl-configuration">VDA5050 SSL configuration</a></h2>
<p>VDA5050 supports connecting over SSL encrypted connections. Using this feture requires the server to have a certificate that is signed by a root certificate. The root certificate is placed on the AGV.
In addition the AGV itself can have a certificate and a key that are used to verify the AGV:s identity when it connects to the fleetcontrol. 
By default VDA5050 uses the same SSL configuration than the rest of the Navitrol. So if SSL is enabled according to <a href="../../Miscellaneous/SslCertificates/SslCertificates-en.html">the SSL guide</a>, it will also be enabed for VDA5050 connections.
However, it is possible to disable the SSL for VDA5050 even when it is otherwise in use by setting <strong>vdma_ssl_mode</strong> to 0 or enable it just for VDA5050 by setting <strong>vdma_ssl_mode</strong> to 2.</p>
<p>By default the VDA5050 interface checks the hostname of the server it connects to and it has to match the value in the server certificate. This can sometimes be problematic and it can be disabled by setting <strong>vdma_ssl_verify_hostname</strong> to 0.
The <strong>vdma_ssl_version</strong> parameter can be used to select the TLS version used, but there should rarely be need to change it.
The other <strong>vdma_ssl_</strong> parameters are used only when <strong>vdma_ssl_mode</strong> is set to 2 (The SSL is turned on separately for VDA5050) and each of those has a corresponding regular Navitrol SSL parameter that it replaces (eg. <strong>vdma_ssl_agv_key_file</strong> is used instead of <strong>ssl_agv_key_file</strong>).</p>
<h3 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h3>
<p>SSL errors come from the OpenSSL library and are not always the easiest to understand. Here are couple of them you might encounter, but the list is not exhaustive. </p>
<h4 id="erroneous-certificate-common-names"><a class="header" href="#erroneous-certificate-common-names">Erroneous certificate common names</a></h4>
<blockquote>
<p>OpenSSL Error: error:1416F086:SSL routines:tls_process_server_certificate:certificate verify failed</p>
</blockquote>
<p>The Certificates used (CA certificate, AGV certificate and the server certificate) need to have different Common Name (CN) field values.</p>
<h4 id="wrong-hostname-in-certificate"><a class="header" href="#wrong-hostname-in-certificate">Wrong hostname in certificate</a></h4>
<blockquote>
<p>Error: host name verification failed.
OpenSSL Error: error:1416F086:SSL routines:tls_process_server_certificate:certificate verify failed</p>
</blockquote>
<p><strong>vdma_ssl_verify_hostname</strong> is enabled and the certificate host name doesn't match the server host name. Could be due to wrong certificate, changed hostname or yuo may need to disable the <strong>vdma_ssl_verify_hostname</strong> parameter. It can also be caused by an attempt by an attacker to impersonate the server. </p>
<h4 id="agv-certificate-not-configured"><a class="header" href="#agv-certificate-not-configured">AGV certificate not configured</a></h4>
<blockquote>
<p>OpenSSL Error: error:14094410:SSL routines:ssl3_read_bytes:sslv3 alert handshake failure</p>
</blockquote>
<p>This error could be because you have not configured the AGV certificate, but the server has requested it. </p>
<h4 id="certificate-and-key-files-dont-match"><a class="header" href="#certificate-and-key-files-dont-match">Certificate and key files don't match</a></h4>
<blockquote>
<p>OpenSSL error: error:0B080074:x509 certificate routines:X509_check_private_key:key values mismatch</p>
</blockquote>
<p>The certificate file doesn't match the key file. Perhaps one of them was updated and the other one wasn't.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="../../DriveControl/StopAndHold/StopAndHold-en.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="../../DriveControl/VDA5050/VDA5050FeatureMatrix-en.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="../../DriveControl/StopAndHold/StopAndHold-en.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="../../DriveControl/VDA5050/VDA5050FeatureMatrix-en.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
