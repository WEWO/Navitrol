<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Obstacle avoidance - NAVITROL USER INSTRUCTIONS - Navitec Systems Oy CONFIDENTIAL</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="../../favicon.svg">
                        <link rel="shortcut icon" href="../../favicon.png">
                <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
                <link rel="stylesheet" href="../../css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="../../fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
                <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../MdBook/MdbookFrontPage.html">Front page</a></li><li class="chapter-item expanded affix "><li class="part-title">Introduction</li><li class="chapter-item expanded "><a href="../../Introduction/NavitrolUserInstructions/NavitrolUserInstructions-en.html"><strong aria-hidden="true">1.</strong> Navitrol user instructions</a></li><li class="chapter-item expanded "><a href="../../Introduction/Licensing/Licensing-en.html"><strong aria-hidden="true">2.</strong> Licensing</a></li><li class="chapter-item expanded "><a href="../../Introduction/OdometrySource/OdometrySource-en.html"><strong aria-hidden="true">3.</strong> Odometry source</a></li><li class="chapter-item expanded "><a href="../../Introduction/InitialCalibrationGuide/InitialCalibrationGuide-en.html"><strong aria-hidden="true">4.</strong> Initial calibration guide</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/ParameterReconfiguration/ParameterReconfiguration-en.html"><strong aria-hidden="true">5.</strong> Parameter reconfiguration</a></li><li class="chapter-item expanded "><a href="../../Introduction/Parameters/Parameters.html"><strong aria-hidden="true">6.</strong> Parameter listing</a></li><li class="chapter-item expanded "><a href="../../Introduction/Parameters/JsonConfigurationFile-en.html"><strong aria-hidden="true">7.</strong> JSON configuration file</a></li><li class="chapter-item expanded "><a href="../../Introduction/TeachingInstructions/TeachingInstructions-en.html"><strong aria-hidden="true">8.</strong> Teaching instructions</a></li><li class="chapter-item expanded "><a href="../../Introduction/FeatureMatrix/FeatureMatrix-en.html"><strong aria-hidden="true">9.</strong> Feature Matrix</a></li><li class="chapter-item expanded affix "><li class="part-title">Device interfaces</li><li class="chapter-item expanded "><a href="../../AgvInterfaces/SupportedDevices/SupportedDevices-en.html"><strong aria-hidden="true">10.</strong> Supported devices</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/GenericInterfaces/GenericInterfacesHeading.html"><strong aria-hidden="true">11.</strong> Generic interfaces</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../AgvInterfaces/GenericInterfaces/EthernetSupervisorInterface/EthernetSupervisorInterface-en.html"><strong aria-hidden="true">11.1.</strong> Ethernet Supervisor</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/GenericInterfaces/CanCommunication/CanCommunication-en.html"><strong aria-hidden="true">11.2.</strong> CAN communication</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../AgvInterfaces/GenericInterfaces/CanSupervisorInterface/CanSupervisorInterface-en.html"><strong aria-hidden="true">11.2.1.</strong> CAN Supervisor</a></li></ol></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/GenericInterfaces/EthercatCommunication/EthercatCommunication-en.html"><strong aria-hidden="true">11.3.</strong> EtherCAT Communication</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/GenericInterfaces/Simove/SimoveInterface-en.html"><strong aria-hidden="true">11.4.</strong> SIMOVE</a></li></ol></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/MotorControllersHeading.html"><strong aria-hidden="true">12.</strong> Motor controllers</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/MotorControllersCommon/MotorControllersCommon-en.html"><strong aria-hidden="true">12.1.</strong> Motor controller common</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Schwarzmueller/SchwarzmuellerSetupInstructions/SchwarzmuellerSetupInstructions-en.html"><strong aria-hidden="true">12.2.</strong> Schwarzmueller setup</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Schwarzmueller/SchwarzmuellerParameterSetupInstructions/SchwarzmuellerParameterSetupInstructions-en.html"><strong aria-hidden="true">12.2.1.</strong> Schwarzmueller parameters</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Schwarzmueller/SchwarzmuellerTroubleshooting/SchwarzmuellerTroubleshooting-en.html"><strong aria-hidden="true">12.2.2.</strong> Schwarzmueller troubleshooting</a></li></ol></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Curtis/CurtisMotorController-en.html"><strong aria-hidden="true">12.3.</strong> Curtis</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Engel/EngelMotorController-en.html"><strong aria-hidden="true">12.4.</strong> Engel</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Kinco/KincoMotorController-en.html"><strong aria-hidden="true">12.5.</strong> Kinco</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Nanotec/NanotecMotorController-en.html"><strong aria-hidden="true">12.6.</strong> Nanotec</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Oriental/OrientalMotorController-en.html"><strong aria-hidden="true">12.7.</strong> Oriental</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Synapticon/SynapticonMotorController-en.html"><strong aria-hidden="true">12.8.</strong> Synapticon</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Roboteq/RoboteqOpenLoopControllerConfiguration-en.html"><strong aria-hidden="true">12.9.</strong> Roboteq Open loop</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Roboteq/RoboteqClosedLoopControllerConfiguration-en.html"><strong aria-hidden="true">12.10.</strong> Roboteq Closed loop</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/MiControl/MiControlMotorController-en.html"><strong aria-hidden="true">12.11.</strong> MiControl</a></li></ol></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/ScannerConfigurations/ScannerHeading.html"><strong aria-hidden="true">13.</strong> Laser scanners</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../AgvInterfaces/ScannerConfigurations/ScannerConfigurations-en.html"><strong aria-hidden="true">13.1.</strong> Scanner configurations</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/ScannerCommunicationTroubleshoot/ScannerCommunicationTroubleshoot-en.html"><strong aria-hidden="true">13.2.</strong> Scanner communication troubleshooting</a></li></ol></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/OpticalCodeReader/OpticalCodeReader.html"><strong aria-hidden="true">14.</strong> Optical code reader</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/Encoders/EncoderHeading.html"><strong aria-hidden="true">15.</strong> Encoders</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../AgvInterfaces/Encoders/EthercatEncoders/EthercatEncoders-en.html"><strong aria-hidden="true">15.1.</strong> EtherCAT encoders</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">User interfaces</li><li class="chapter-item expanded "><a href="../../CustomerUis/NavitrolMonitor/NavitrolMonitor-en.html"><strong aria-hidden="true">16.</strong> Navitrol Monitor</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../CustomerUis/NavitrolMonitor3rdPartyLicenses/NavitrolMonitor3rdPartyLicenses-en.html"><strong aria-hidden="true">16.1.</strong> Navitrol Monitor third party licenses</a></li></ol></li><li class="chapter-item expanded "><a href="../../CustomerUis/WebInterface/WebInterface-en.html"><strong aria-hidden="true">17.</strong> Navitrol web interface</a></li><li class="chapter-item expanded "><a href="../../CustomerUis/Parameter Tool/ParameterTool-en.html"><strong aria-hidden="true">18.</strong> Parameter Tool Beta</a></li><li class="chapter-item expanded affix "><li class="part-title">Localization</li><li class="chapter-item expanded "><a href="../../Localization/PositionConfidence/PositionConfidence-en.html"><strong aria-hidden="true">19.</strong> Position confidence</a></li><li class="chapter-item expanded "><a href="../../Localization/ScannerCalibration/ScannerCalibration-en.html"><strong aria-hidden="true">20.</strong> Scanner calibration</a></li><li class="chapter-item expanded "><a href="../../Localization/EnvironmentGuidelines/EnvironmentGuidelines-en.html"><strong aria-hidden="true">21.</strong> Environment guidelines</a></li><li class="chapter-item expanded "><a href="../../Localization/AutomaticOdometryCorrection/AutomaticOdometryCorrection-en.html"><strong aria-hidden="true">22.</strong> Automatic odometry correction</a></li><li class="chapter-item expanded "><a href="../../Localization/ReflectorBasedPositionInitialization/ReflectorBasedPositionInitialization-en.html"><strong aria-hidden="true">23.</strong> Reflector based position initialization</a></li><li class="chapter-item expanded "><a href="../../Localization/PrecisionPositioning/PrecisionPositioning-en.html"><strong aria-hidden="true">24.</strong> Precision positioning</a></li><li class="chapter-item expanded "><a href="../../Localization/LocalizationScannerChangeOnTheFly/LocalizationScannerChangeOnTheFly-en.html"><strong aria-hidden="true">25.</strong> Changing scanner on the fly</a></li><li class="chapter-item expanded "><a href="../../Localization/RampZones/RampZones-en.html"><strong aria-hidden="true">26.</strong> Ramp zones</a></li><li class="chapter-item expanded "><a href="../../Localization/GpsPositioning/GpsPositioning-en.html"><strong aria-hidden="true">27.</strong> GPS Positioning</a></li><li class="chapter-item expanded "><a href="../../Localization/ImuAndSensorFusion/ImuAndSensorFusion-en.html"><strong aria-hidden="true">28.</strong> IMU and sensor fusion</a></li><li class="chapter-item expanded "><a href="../../Localization/ExternalLocalization/ExternalLocalization-en.html"><strong aria-hidden="true">29.</strong> External localization</a></li><li class="chapter-item expanded "><a href="../../Localization/DynamicMapping/DynamicMappingServer/DynamicMappingServer-en.html"><strong aria-hidden="true">30.</strong> Dynamic mapping server</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Localization/DynamicMapping/DynamicMappingServerAndClientCompatibility/DynamicMappingServerAndClientCompatibility-en.html"><strong aria-hidden="true">30.1.</strong> Dynamic mapping client/server compatibility</a></li><li class="chapter-item expanded "><a href="../../Localization/DynamicMapping/DynamicMappingServerHardwareRequirements/DynamicMappingServerHardwareRequirements.html"><strong aria-hidden="true">30.2.</strong> Dynamic mapping client/server hardware requirements</a></li></ol></li><li class="chapter-item expanded "><a href="../../Localization/WheelSlipping/WheelSlipping-en.html"><strong aria-hidden="true">31.</strong> Wheel slipping diagnostic</a></li><li class="chapter-item expanded "><a href="../../Localization/3dPositioning/3dPositioning-en.html"><strong aria-hidden="true">32.</strong> 3D positioning</a></li><li class="chapter-item expanded affix "><li class="part-title">Position control</li><li class="chapter-item expanded "><a href="../../PositionControl/StartOffsetSlowdown/StartOffsetSlowdown-en.html"><strong aria-hidden="true">33.</strong> Start offset slowdown</a></li><li class="chapter-item expanded "><a href="../../PositionControl/CoupledDriving/CoupledDrivingFeature-en.html"><strong aria-hidden="true">34.</strong> Coupled driving</a></li><li class="chapter-item expanded "><a href="../../PositionControl/MagneticLineFollowing/MagneticLineFollowing-en.html"><strong aria-hidden="true">35.</strong> Magnetic line following</a></li><li class="chapter-item expanded "><a href="../../PositionControl/TrailerTransport/TrailerTransport-en.html"><strong aria-hidden="true">36.</strong> Trailer transport</a></li><li class="chapter-item expanded "><a href="../../PositionControl/BarrierStop/BarrierStop-en.html"><strong aria-hidden="true">37.</strong> Barrier stop</a></li><li class="chapter-item expanded "><a href="../../PositionControl/DataMatrixDocking/DataMatrixDockingDMC-en.html"><strong aria-hidden="true">38.</strong> Data Matrix Code Docking V2</a></li><li class="chapter-item expanded "><a href="../../PositionControl/Docking/Docking-en.html"><strong aria-hidden="true">39.</strong> Docking</a></li><li class="chapter-item expanded affix "><li class="part-title">Drive control</li><li class="chapter-item expanded "><a href="../../DriveControl/DrivingOptions/DrivingOptions-en.html"><strong aria-hidden="true">40.</strong> Driving options</a></li><li class="chapter-item expanded "><a href="../../DriveControl/Standalone/Standalone-en.html"><strong aria-hidden="true">41.</strong> Standalone</a></li><li class="chapter-item expanded "><a href="../../DriveControl/StopAndHold/StopAndHold-en.html"><strong aria-hidden="true">42.</strong> Stop-and-hold</a></li><li class="chapter-item expanded "><a href="../../DriveControl/VDA5050/VDA5050-en.html"><strong aria-hidden="true">43.</strong> VDA 5050</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../DriveControl/VDA5050/VDA5050FeatureMatrix-en.html"><strong aria-hidden="true">43.1.</strong> VDA 5050 Support status</a></li></ol></li><li class="chapter-item expanded "><a href="../../DriveControl/ReturnToRoute/ReturnToRoute-en.html"><strong aria-hidden="true">44.</strong> Return to route</a></li><li class="chapter-item expanded "><a href="../../DriveControl/ObstacleAvoidance/ObstacleAvoidance-en.html" class="active"><strong aria-hidden="true">45.</strong> Obstacle avoidance</a></li><li class="chapter-item expanded "><a href="../../DriveControl/ObstacleAvoidanceV2/ObstacleAvoidanceV2-en.html"><strong aria-hidden="true">46.</strong> Obstacle avoidance V2</a></li><li class="chapter-item expanded "><a href="../../DriveControl/ContainerDriving/ContainerDriving-en.html"><strong aria-hidden="true">47.</strong> Container driving</a></li><li class="chapter-item expanded "><a href="../../DriveControl/RecordAndPlay/RecordAndPlay-en.html"><strong aria-hidden="true">48.</strong> Record and Play</a></li><li class="chapter-item expanded "><a href="../../DriveControl/RouteFreeNavigation/RouteFreeNavigation-en.html"><strong aria-hidden="true">49.</strong> Route free navigation</a></li><li class="chapter-item expanded affix "><li class="part-title">Kinematics</li><li class="chapter-item expanded "><a href="../../Kinematics/OmniSteerLimit/OmniSteerLimit-en.html"><strong aria-hidden="true">50.</strong> Omni steer limit</a></li><li class="chapter-item expanded "><a href="../../Kinematics/OneDriveWheelOmni/OneDriveWheelOmni-en.html"><strong aria-hidden="true">51.</strong> Omni one drive wheel</a></li><li class="chapter-item expanded affix "><li class="part-title">Pickup and drop-off</li><li class="chapter-item expanded "><a href="../../LoadHandling/ActuatorControl/ActuatorControl-en.html"><strong aria-hidden="true">52.</strong> Actuator control</a></li><li class="chapter-item expanded "><a href="../../LoadHandling/ScannerLiftActuator/ScannerLiftActuator-en.html"><strong aria-hidden="true">53.</strong> Scanner lift actuator</a></li><li class="chapter-item expanded "><a href="../../LoadHandling/Racking/Racking-en.html"><strong aria-hidden="true">54.</strong> Racking</a></li><li class="chapter-item expanded "><a href="../../LoadHandling/BufferLanes/BufferLanes-en.html"><strong aria-hidden="true">55.</strong> Buffer lanes</a></li><li class="chapter-item expanded "><a href="../../LoadHandling/StackLoading/StackLoading-en.html"><strong aria-hidden="true">56.</strong> Loading from a stack</a></li><li class="chapter-item expanded "><a href="../../LoadHandling/BlockStacking/BlockStacking-en.html"><strong aria-hidden="true">57.</strong> Unloading to a stack</a></li><li class="chapter-item expanded "><a href="../../LoadHandling/DistanceToTarget/DistanceToTarget-en.html"><strong aria-hidden="true">58.</strong> Distance to target estimation</a></li><li class="chapter-item expanded affix "><li class="part-title">Target and obstacle detection</li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/PalletDetection/PalletDetection-en.html"><strong aria-hidden="true">59.</strong> Pallet detection</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/3dTargetDetection/3dTargetDetection-en.html"><strong aria-hidden="true">60.</strong> 3D Target detection</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/PatternDetection/PatternDetection-en.html"><strong aria-hidden="true">61.</strong> Pattern detection</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/ObstacleDetection/ObstacleDetection-en.html"><strong aria-hidden="true">62.</strong> Obstacle detection</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/ExternalTargetDetection/ExternalTargetDetection-en.html"><strong aria-hidden="true">63.</strong> External target detection</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/TableDetection/TableDetection-en.html"><strong aria-hidden="true">64.</strong> Table detection</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/Wallmonitoring/Wallmonitoring-en.html"><strong aria-hidden="true">65.</strong> Wall monitoring</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/OccupancyCheck/OccupancyCheck-en.html"><strong aria-hidden="true">66.</strong> Occupancy check</a></li><li class="chapter-item expanded affix "><li class="part-title">Miscellaneous</li><li class="chapter-item expanded "><a href="../../Miscellaneous/ErrorDescriptions/ErrorDescriptions-en.html"><strong aria-hidden="true">67.</strong> Error descriptions</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/Logging/Logging-en.html"><strong aria-hidden="true">68.</strong> Logging</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/LinuxImageInstallation/LinuxImagesHeading.html"><strong aria-hidden="true">69.</strong> Linux image installation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Miscellaneous/LinuxImageInstallation/CanDrivers/CanDrivers-en.html"><strong aria-hidden="true">69.1.</strong> CAN drivers</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/LinuxImageInstallation/Clonezilla/ClonezillaInstallation-en.html"><strong aria-hidden="true">69.2.</strong> Clonezilla</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/LinuxImageInstallation/DebianBuster/DebianBusterInstallation-en.html"><strong aria-hidden="true">69.3.</strong> Debian Buster</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/LinuxImageInstallation/DebianBullseye/DebianBullseyeInstallation-en.html"><strong aria-hidden="true">69.4.</strong> Debian Bullseye</a></li></ol></li><li class="chapter-item expanded "><a href="../../Miscellaneous/ParameterZones/ParameterZones-en.html"><strong aria-hidden="true">70.</strong> Parameter zones</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/Reflectors/Reflectors-en.html"><strong aria-hidden="true">71.</strong> Reflectors</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/SslCertificates/SslCertificates-en.html"><strong aria-hidden="true">72.</strong> SSL Certificate configuration</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/BatteryOvertemperatureActions/BatteryOvertemperatureActions.html"><strong aria-hidden="true">73.</strong> Battery overtemperature actions</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/Charging/Charging-en.html"><strong aria-hidden="true">74.</strong> Charging and battery management</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/HardwareRequirements/HardwareRequirements-en.html"><strong aria-hidden="true">75.</strong> Hardware requirements</a></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="dark">Dark</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">NAVITROL USER INSTRUCTIONS - Navitec Systems Oy CONFIDENTIAL</h1>

                    <div class="right-buttons">
                                                <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="obstacle-avoidance"><a class="header" href="#obstacle-avoidance">Obstacle Avoidance</a></h1>
<hr />
<h2 id="introduction"><a class="header" href="#introduction">Introduction</a></h2>
<p>Obstacle avoidance is an algorithm that detects collisions and drives around the obstacles to continue the mission. Thus, the AGV may react dynamically to changes in the environment. The collision detection uses 2D safety scanners to predict whether there are any upcoming collisions.
Upon a collision detection, the AGV will begin to plan a new route.</p>
<p>If there is enough space to perform the bypass, fleet control is sent a message to request the bypass and reserve the area from other AGVs in the fleet. After getting the permission the AGV will begin the bypass and continue to poll the environment for other obstacles.</p>
<p>To ensure controlled behavior there are several constraints under which obstacle avoidance plans the paths such as time spent planning and the area in which the bypass must happen. These are discussed in more detail below.</p>
<p>The complete list of obstacle avoidance parameters, their valid values and explanations is in the end of this document. The obstacle avoidance parameters are marked with bold when referenced in text. They always begin with prefix <strong>obst_</strong>.</p>
<h3 id="obstacle-avoidance-modes"><a class="header" href="#obstacle-avoidance-modes">Obstacle Avoidance Modes</a></h3>
<p>There are two modes of obstacle avoidance that can be used in Navitrol.
By setting <strong>obst_av_mode</strong> parameter to 1, only detection mode of obstacles is activated, meaning that the AGV will detect obstacles on its path and stop a certain distance before collision, but will not attempt to plan a route to avoid obstacles.</p>
<p>Setting <strong>obst_av_mode</strong> to 2 enables obstacle detection and avoidance mode. With this mode, AGV will detect obstacles on its path and plan a bypass route avoiding them.</p>
<p>Note for those using coupled driving feature: Both obstacle detection and obstacle avoidance will be disabled for the duration of coupled driving, but they will work normally when the AGVs are uncoupled.</p>
<h3 id="obstacle-avoidance-zones"><a class="header" href="#obstacle-avoidance-zones">Obstacle avoidance zones</a></h3>
<p>By default, obstacles may be detected and avoided only if the AGV is inside an obstacle avoidance zone. There may be one or many obstacle avoidance zones. The zones hold information on direction policy, or in other words, which direction the AGV may use to drive around the obstacle. The AGV must be always inside an obstacle avoidance zone when
it is driving around the obstacle. Thus, if the obstacle is too close to obstacle zone boundaries, the AGV may not drive around it. The zones can be ignored, allowing obstacle avoidance anywhere by setting the value of the parameter <strong>obst_use_zones</strong> to 0.</p>
<p>With default value of 1 <strong>obst_use_zones</strong> obstacles are bypassed only if the bypass route can be planned inside the zone according to zone rules. Obstacles themselves are however detected everywhere also outside zones, and AGV is stopped according to the obstacle avoidance related parameters. With <strong>obst_use_zones</strong> in value 2 obstacles are not only bypassed, but also only detected inside zones. This option makes it possible to configure obstacle avoidance to be used only in certain areas, without affecting the AGV driving globally. It should be noted that this option also ignores the scanner points outside of the obstacle zones, meaning that even when the AGV is inside a zone, obstacles outside of a zone will not be detected or avoided.</p>
<p><img src="./media-en/image3.png" alt="" /></p>
<blockquote>
<p>Figure 1: the AGV (grey) sees an obstacle (red) because the AGV is inside an obstacle avoidance zone (blue). There is enough space to bypass the obstacle inside the obstacle avoidance zone. The route around the obstacle is shown with green dashed line; the nominal route is shown with black dashed line.</p>
</blockquote>
<p><img src="./media-en/image4.png" alt="" /></p>
<blockquote>
<p>Figure 2: The AGV will detect the obstacle but there is not enough space to bypass the obstacle because the obstacle is close to obstacle avoidance zone boundaries. The route around the obstacle would be outside the obstacle avoidance zone (red dashed line). Thus, driving around the obstacle is not possible. In this scenario, AGV will stop and wait for the obstacle to disappear.</p>
</blockquote>
<h3 id="detecting-collisions"><a class="header" href="#detecting-collisions">Detecting collisions</a></h3>
<p>The seamless functioning of obstacle detection is crucial for obstacle avoidance. If no obstacles are detected, it is impossible to drive around them.</p>
<p>The parameter <strong>obst_detection_scanners</strong> determines which localization scanners are used for obstacle detection. Different scanners may be used for localization and obstacle detection. Please see the Appendix for instructions on how to set this parameter for different scanners.</p>
<p>Similarly, the parameter <strong>obst_detection_meas_scanners</strong> determines which measurement-only scanners are used for obstacle avoidance.</p>
<p>For each route point, if there are at least <strong>obst_detect_min_scan_points</strong> number of scanner measurements close to the AGV, a collision is detected in that route point. Being &quot;close&quot; to the AGV is determined by <strong>obst_free_zone_left</strong>, <strong>obst_free_zone_right, obst_free_zone_front</strong> and <strong>obst_free_zone_rear</strong> parameters, which determine the zone that must be obstacle-free around the vehicle.</p>
<p>Note that the distance to the obstacle and its size determines the number of scanner beams that hit it. Thus, obstacles that are seen as less than <strong>obst_detect_min_scan_points</strong> number of points are not detected as obstacles.</p>
<p><img src="./media-en/image5.png" alt="" /></p>
<blockquote>
<p>Figure 3: the AGV (grey) with the safety margin (red). Increasing the value of the parameters makes the required free zone grow in the specified direction.</p>
</blockquote>
<p><img src="./media-en/image6.png" alt="" /></p>
<blockquote>
<p>Figure 4: Left: collision is not detected because there are no obstacles inside the safety zone (red). Right: collision is detected because the wall is inside the safety zone.</p>
</blockquote>
<p><img src="./media-en/image7.png" alt="" /></p>
<blockquote>
<p>Figure 5: The AGV (left) is driving towards an obstacle (right). The environment points are shown with brown lines whereas the front scanner measurements are shown with green dots. As more than <strong>obst_detect_min_scan_points</strong> (here, the value is 4) points are inside the red rectangle, the AGV would collide in that route point.
Note that for bigger values of <strong>defined obstacle free zone parameters</strong>, the collision is detected in an earlier point in the route than for smaller values.</p>
</blockquote>
<p>The parameter <strong>obst_detect_obstacles_dist</strong> determines the range of obstacle detection. If an obstacle is farther than this limit from the AGV, it will not be detected. All obstacles closer than this limit are detected.</p>
<p><img src="./media-en/image8.png" alt="" /></p>
<blockquote>
<p>Figure 6: Obstacle is not detected (up) as the distance to the obstacle is larger than <strong>obst_detect_obstacles_dist</strong> (value of 9.0 meters was used). As the AGV moves closer than the limit, the obstacle is eventually detected (down). The side of a big square is 1.0 meters.</p>
</blockquote>
<h3 id="detecting-moving-obstacles"><a class="header" href="#detecting-moving-obstacles">Detecting moving obstacles</a></h3>
<p>If the velocity of the obstacle is more than <strong>obst_moving_det_treshold</strong> meters per second, it is interpreted as moving. If the obstacle is detected as moving, the AGV must wait <strong>obst_moving_time_ms</strong> milliseconds before it may continue to plan a route around the obstacle.</p>
<h3 id="planning-the-route"><a class="header" href="#planning-the-route">Planning the route</a></h3>
<p>When the AGV is closer to the collision than <strong>obst_distance_to_begin_planning</strong> meters, it may begin planning a route around the obstacle. The angle to the obstacle edge to be bypassed must be at most <strong>obst_bypass_trajectory_max_angle_deg</strong> degrees.
The reason for this is to prevent the AGV from driving around obstacles that are too wide, too far away from the nominal route and obstacles that require the AGV to make sharp turns.</p>
<p><img src="./media-en/image9.png" alt="" /></p>
<blockquote>
<p>Figure 7: Visualization of how the angle between the AGV and obstacle edge is calculated. If the AGV is close to the obstacle or if the obstacle is wide, the angle will be large. In both cases, driving around such obstacle could be dangerous as the AGV would have to make sharp turns and the whole area behind the obstacle would be occluded and thus
unknown.</p>
</blockquote>
<p>The maximum AGV velocity during the bypass is determined by the parameter <strong>obst_bypass_velocity</strong>.</p>
<p>Because there is some noise in scanner measurements, the obstacle edges may appear in different places depending on the time when the
measurement is taken. The parameter <strong>obst_bypass_edge_safety_addition</strong> determines, how much additional free space there will be between the AGV with safety limits when the
route around the obstacle is planned.</p>
<p><img src="./media-en/image10.png" alt="" /></p>
<blockquote>
<p>Figure 8: Up: Driving around an obstacle, <strong>obst_bypass_safety_addition</strong> = 0.1 meters Down: Driving around an obstacle, <strong>obst_bypass_safety_addition</strong> = 0.5 meters. In this case, driving farther from the obstacle would be safer but it also requires more free space around the obstacle in order to successfully plan the route.</p>
</blockquote>
<p>If the replan fails, the algorithm must wait at least <strong>obst_replan_wait_time_ms</strong> milliseconds before trying again.</p>
<p>The parameter <strong>obst_return_wait_time_s</strong> limits, how many seconds the AGV may try to replan at maximum. The time is calculated when the AGV is not on nominal route and is standing still. Every time the AGV manages to get forwards, the timer is reset. In other words, the purpose of this parameter and condition is to prevent the AGV getting stuck in one place when driving around the obstacle.</p>
<p><img src="./media-en/image11.png" alt="" /></p>
<blockquote>
<p>Figure 9: (1) The AGV begins to drive around an obstacle (2) After driving further, the AGV sees another obstacle around which it does not find a route (3) After trying to find a route around the obstacle for <strong>obst_return_wait_time_s</strong> seconds, the AGV reverses back to nominal route the same way it came. After that, it is possible to try drive around the obstacle from the other direction or try again until the obstacle disappears.</p>
</blockquote>
<p>After planning the route, a permission must be gotten from the fleet control. In order to send smaller messages, not every route point has to be sent to fleet control. The parameter <strong>obst_send_fleet_every_nth_point</strong> determines, how many points are sent: 1 = every point, 2 = every second point, etc. This can be beneficial if the wireless connection is not fast.</p>
<p>The AGV may wait at most <strong>obst_wait_time_for_answer_s</strong> seconds for answer from fleet control. If it doesn't get an answer, it must begin planning a route around the obstacle again from scratch and send a new request before beginning the bypass. The reason to limit the time waiting for answer from fleet control is to avoid that the AGV would be standing and waiting for the permission for a long time when, for example, the wireless connection is not good.</p>
<p><img src="./media-en/image12.png" alt="" /></p>
<blockquote>
<p>Figure 10: The effect of obstacle avoidance parameters when the AGV is moving from right to left towards the obstacle. The side of each square is 1.0 meters. (1) Point after which obstacle detection is active (2) Point where the obstacle is detected (<strong>obst_detect_obstacles_dist</strong> = 9.0 meters). (3) Point where planning a route around the obstacle is begun (<strong>obst_distance_to_begin_planning</strong> = 8.0 meters) (4) Point where the AGV would begin driving around the obstacle. This depends from the obstacle apparent width, the AGV size, <strong>obst_free_zone_front</strong>, <strong>obst_free_zone_left,</strong> <strong>obst_bypass_safety_addition</strong> and <strong>obst_bypass_trajectory_max_angle_deg</strong> (5). The distance of the bypass route from the obstacle is (6) in the figure.</p>
</blockquote>
<p>When the AGV gets permission from fleet control, the fleet control has automatically reserved exclusive area for the AGV to drive around the obstacle. Fleet control will not give the AGV permission for bypass until the area is clear from other AGVs. During the bypass, other AGVs may not drive in this area.</p>
<h3 id="limitations"><a class="header" href="#limitations">Limitations</a></h3>
<p>There are several cases where obstacle detection or driving around the obstacle is not possible. Before installing obstacle avoidance, positioning and navigating should be calibrated. The map must be accurate enough so that the AGV will never lose its position -- even if some features would occlude environment features temporarily.</p>
<p>Obstacle detection is not able to see through walls. It cannot deduce how big the obstacle really is because part of the obstacle is always occluded.</p>
<p>Obstacle detection is not able to recognize <em>what</em> the obstacle is: it does not know whether the measurements represent a box, human, forklift driven by a human or an AGV. The algorithm may not predict where a moving obstacle is going next.</p>
<p>Driving around moving obstacles is not possible. If a moving obstacle is detected, the AGV will always stop and wait until the obstacle has stopped.</p>
<p>Driving around obstacles is not allowed in a curve. In other words, it is possible only in a relatively straight route with a small curvature.
In addition, the route ahead the AGV must be long enough so that the AGV may return to the nominal route after the bypass. If the obstacle is near trajectory end, it may not be bypassed.</p>
<p>Driving around obstacles that appear less wide than they really are is not supported. After the AGV has chosen the route around the obstacle, it cannot change the distance to the nominal route.</p>
<p>From Navitrol version 6.34.00, bypassing obstacles with an omni-type AGV on a route that has a frame heading is supported. However, it needs to be a static frame heading and not a linearly changing one. Furthermore, only cases where the avoidance starts and ends at the same frame heading are supported.</p>
<p><img src="./media-en/image13.png" alt="" /></p>
<blockquote>
<p>Figure 11: bypassing obstacles (1) and (2) is possible because they do not get wider from what the AGV initially sees when it begins planning a route around the obstacle.</p>
</blockquote>
<p><img src="./media-en/image14.png" alt="" /></p>
<blockquote>
<p>Figure 12: Bypassing obstacle (3) is possible because the AGV sees that the obstacle gets wider when it begins the bypass. Bypassing obstacle (4) is not supported because it gets wider along the route from what the AGV initially sees. The parameter <strong>obst_detect_obstacles_dist</strong> determines, how far the AGV sees obstacles. The parameter <strong>obst_distance_to_begin_planning</strong> determines, at which distance to the obstacle the AGV begins planning for the bypass.</p>
</blockquote>
<p><img src="./media-en/image15.png" alt="" /></p>
<blockquote>
<p>Figure 13: driving around an obstacle in a curve is not possible. Obstacles may only be bypassed in straight or almost straight paths.</p>
</blockquote>
<h2 id="setup-guide"><a class="header" href="#setup-guide">Setup guide</a></h2>
<p>After obtaining a license for obstacle avoidance, only the environment file and parameters must be set up to begin using obstacle avoidance.</p>
<h3 id="setting-up-the-navithortools-project"><a class="header" href="#setting-up-the-navithortools-project">Setting up the NavithorTools project</a></h3>
<p>To set up a NavithorTools project to support obstacle avoidance, first create the environment from teach data and routes as usual or open an existing project with environment and route data. After those steps are done, choose the Zones tab and Feature Zone underneath it.</p>
<p><img src="./media-en/image16.png" alt="" /></p>
<p>From the Feature Zone tab, several zones may be specified. In general, a zone encodes certain properties and allowed actions for an area in the environment. In case of obstacle avoidance, the zones are the only allowed areas for obstacle bypassing (unless the value of the parameter <strong>obst_use_zones</strong> is 0). No routes are generated outside the
boundaries. In addition, a unique direction policy of the bypass may be specified for each obstacle avoidance zone. This is discussed in detail below.</p>
<p>To create an obstacle avoidance zone, choose ObstacleAvoidance from the Zone type drop menu. After that, obstacle avoidance zones may be drawn over the environment and routes when the Edit areas button is active.
This is indicated by the yellow color of the button. After choosing ObstacleAvoidance zone type, the Edit areas will turn automatically on.</p>
<p>Note that obstacle avoidance zones may not overlap as such situation would result into undefined bypass behavior. If any zones overlap, they will be drawn with red color and the project may not be exported before fixing the issue.</p>
<p>Obstacle avoidance zones should not be placed over routes with high curvature. Behavior of obstacle avoidance at such locations is undefined. The AGV may not drive from one obstacle avoidance zone to another during a bypass -- the whole bypass route must be inside one obstacle avoidance zone.</p>
<p><img src="./media-en/image17.png" alt="" /></p>
<p>After drawing the obstacle avoidance zone, the zone data may be specified from the table below the Zone type drop menu and description text. Any number of zones may be first drawn, and the zone data may be specified later.</p>
<p>First, select an obstacle avoidance zone by clicking on it. Obstacle avoidance zones are drawn as purple polygons. Obstacle avoidance zones may be selected whether the Edit areas is selected or not.</p>
<p>After selecting a zone, you may browse and edit the zone data in the table simply by clicking on any cell on the right column and typing with the keyboard. A zone may be deleted by double clicking it.</p>
<p><img src="./media-en/image18.png" alt="" /></p>
<table><thead><tr><th>Field</th><th>Explanation</th><th>Valid values</th></tr></thead><tbody>
<tr><td>LeftPassAllowed</td><td>Can bypass from left in this zone</td><td>True/False or 1/0</td></tr>
<tr><td>RightPassAllowed</td><td>Can to bypass from right in this zone</td><td>True/False or 1/0</td></tr>
<tr><td>PrioritizeLeft</td><td>When both left and right pass are allowed, selecting this option will make the AGV try bypass from left first. When only one direction is allowed, this property has no effect.</td><td>True/False or 1/0</td></tr>
<tr><td>ID</td><td>Unique identifier for each zone</td><td>Not modifiable by the user</td></tr>
</tbody></table>
<p>An example of two valid zones and their zone data below. Only zone data for the selected zone is visualized in the table.</p>
<p><img src="./media-en/image19.png" alt="" /></p>
<p>Finally, after finishing the zones, the file must be exported and uploaded to Navitrol, and to Database if using fleet control.Â­</p>
<h3 id="setting-up-parameters"><a class="header" href="#setting-up-parameters">Setting up parameters</a></h3>
<p>Obstacle avoidance may be used with either standalone production or with fleet control. The required parameters when using fleet control are</p>
<table><thead><tr><th>Parameters</th></tr></thead><tbody>
<tr><td>I,agv_status_message_version, 2</td></tr>
<tr><td>I,fleet_control_type, 1</td></tr>
<tr><td>I,obst_av_mode, 2</td></tr>
</tbody></table>
<p>The required parameters when using standalone are</p>
<table><thead><tr><th>Parameters</th></tr></thead><tbody>
<tr><td>I,fleet_control_type, 0</td></tr>
<tr><td>I,obst_av_mode, 2</td></tr>
</tbody></table>
<p><strong>If any other values for these parameters are used, the AGV may not leave the nominal trajectory to drive around the obstacle.</strong></p>
<p>In addition to these parameters, the obstacle avoidance parameters should be set up according to <strong>Chapter 1</strong>. A complete list of all obstacle avoidance parameter is in the end of this document.</p>
<h2 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h2>
<h3 id="general"><a class="header" href="#general">General</a></h3>
<p>Always use the latest version of Navitrol, Navithor and Navithor Tools when using obstacle avoidance. There is no support for obstacle avoidance in older versions of the software. Use the feature in outdated versions at your own risk.</p>
<p>In each case, see which warnings and errors are raised. Most situations either are features or byproducts of certain parameter values and thus may be avoided by setting the parameters correctly.</p>
<p>Obstacle avoidance will never be able to bypass every possible obstacle as it prioritizes safety over getting to the goal. Moving obstacles will never be bypassed.</p>
<p>If there are some parsing problems when using a map or parameters, errors will show up in Navitrol.</p>
<p>Make sure by reading the parameters with a text editor that you have the right file.</p>
<p>Ensure that your AGV has a high position confidence in every part of the map, even if there would be some obstacles that would occlude environment features.</p>
<p>Check the height of your 2D safety scanner. Acknowledge the fact that the environment may appear partial viewing from that height: some objects may appear smaller than they really are because only one height is sensed by the scanner.</p>
<p>Make sure the scanners do not see additional points such as dust in the lens, AGV chassis or other noise.</p>
<p>It is not recommended to have two scanners that are of different type.
Note that when using such configuration, front and rear scanner may sense the same environment in different ways.</p>
<p>Safety zones should be used with obstacle avoidance for safety measures.
Obstacle avoidance does not replace or implement the existing safety standards.</p>
<p>If the value of <strong>obst_free_zone_(corresponding direction)</strong> is smaller than the safety zones of the scanner, the safety logic will prevent driving around any obstacles as the AGV would drive too close to the obstacles. The obstacle avoidance parameters should always be tuned according to the scanner settings.</p>
<p>Triggering safety zones is seen as red and yellow circle around the scanner in Navitrol Monitor. In addition, warnings will be set.</p>
<h3 id="an-obstacle-avoidance-error-is-raised-upon-startup"><a class="header" href="#an-obstacle-avoidance-error-is-raised-upon-startup">An obstacle avoidance error is raised upon startup</a></h3>
<p>Make sure that you have the correct license that enables obstacle avoidance.</p>
<p>Make sure that you have a version of Navitrol, Navithor Client and Navithor Server that supports obstacle avoidance.</p>
<p>Make sure that you have defined at least one obstacle avoidance zone in NavithorTools and that the environment and segment files are available and loaded correctly by Navitrol.</p>
<h3 id="the-agv-stops-before-the-obstacle-but-does-not-bypass-it"><a class="header" href="#the-agv-stops-before-the-obstacle-but-does-not-bypass-it">The AGV stops before the obstacle but does not bypass it</a></h3>
<p>The AGV may also not be inside an obstacle avoidance zone and thus the obstacle bypass is not allowed. This may only be fixed by editing the obstacle avoidance zones.</p>
<p>If the value of the parameters <strong>obst_av_mode</strong> is 1, AGV will not attempt to bypass the obstacle.</p>
<p>If the collision is too close to the AGV, driving around obstacles is not allowed. See parameters</p>
<table><thead><tr><th>Parameters</th></tr></thead><tbody>
<tr><td>obst_free_zone_left</td></tr>
<tr><td>obst_free_zone_right</td></tr>
<tr><td>obst_free_zone_front</td></tr>
<tr><td>obst_free_zone_rear</td></tr>
<tr><td>obst_bypass_trajectory_max_angle_deg</td></tr>
</tbody></table>
<p>Additionally, if the collision is at the very end of the drive order, there might not be enough space to place the whole bypass route before its end.
If the obstacle is moving, the AGV has to stop and wait until the obstacle stops.
If the obstacle is close enough to trigger the safety zones, driving around the obstacle is impossible.</p>
<h3 id="there-is-an-obstacle-on-the-route-but-obstacles-are-not-detected"><a class="header" href="#there-is-an-obstacle-on-the-route-but-obstacles-are-not-detected">There is an obstacle on the route, but obstacles are not detected</a></h3>
<p>Look if the obstacle is seen by the scanners in monitor. Make sure that the measurements seem as red or green dots for localization scanners, or orange or pink ones for measurement scanners. Grey dots mean that the points are &quot;not ok&quot; and thus not used for obstacle detection. If there are no points in monitor where the obstacle should be or if the points are grey, obstacle avoidance has no means to detect these obstacles.</p>
<p>Please note that if the <strong>obst_use_zones</strong> parameter is set to 2 only the scanner points from within the obstacle avoidance zones are used for obstacle detection.</p>
<p>See the values of</p>
<table><thead><tr><th>Parameters</th></tr></thead><tbody>
<tr><td>obst_detect_obstacles_dist</td></tr>
<tr><td>obst_detect_min_scan_points</td></tr>
</tbody></table>
<p>and see the documentation of these parameters below in the Appendix. If the obstacles are not visible as scanner points in monitor, obstacle avoidance may not sense those points either.</p>
<p>If the obstacles are visible, most likely there are not enough scanner points to count the points as an obstacle as per the parameter values.
See the parameter <strong>obst_detect_min_scan_points</strong>.</p>
<h3 id="there-are-not-any-obstacles-on-the-route-but-obstacles-are-detected"><a class="header" href="#there-are-not-any-obstacles-on-the-route-but-obstacles-are-detected">There are not any obstacles on the route, but obstacles are detected</a></h3>
<p>This is known as false positive detected obstacles. This may result from safety scanner noise or too sensitive obstacle detection.</p>
<p>Increase the value of <strong>obst_detect_min_scan_points</strong> to make sure that a small number of scan points does not trigger obstacle avoidance.</p>
<h3 id="it-seems-there-is-enough-space-to-bypass-the-obstacle-but-the-algorithm-will-not-begin-bypass"><a class="header" href="#it-seems-there-is-enough-space-to-bypass-the-obstacle-but-the-algorithm-will-not-begin-bypass">It seems there is enough space to bypass the obstacle, but the algorithm will not begin bypass</a></h3>
<p>See the parameters</p>
<table><thead><tr><th>Parameters</th></tr></thead><tbody>
<tr><td>obst_free_zone_left</td></tr>
<tr><td>obst_free_zone_right</td></tr>
<tr><td>obst_free_zone_front</td></tr>
<tr><td>obst_free_zone_rear</td></tr>
</tbody></table>
<p>Also see if the bypass happens too close to obstacle avoidance zone boundaries. The bypass route must be inside one and only one such zone.</p>
<p>Note that 2D safety scanners sense the 3D environment at only one height and angle. Thus, some obstacles may seem smaller or larger than they really are.</p>
<h2 id="appendix-list-of-parameters"><a class="header" href="#appendix-list-of-parameters">Appendix: List of parameters</a></h2>
<table><thead><tr><th>Type</th><th>Name</th><th>Minimum value</th><th>Default value</th><th>Maximum value</th><th>Information</th></tr></thead><tbody>
<tr><td>int</td><td>obst_av_mode</td><td>0</td><td>0</td><td>2</td><td>0 = disabled 1 = only detect obstacles 2 = detect and drive around the obstacles</td></tr>
<tr><td>float</td><td>obst_free_zone_left</td><td>0</td><td>0.25</td><td>2.0</td><td>The margin (m) at AGV left dimension that has to be free of obstacles</td></tr>
<tr><td>float</td><td>obst_free_zone_right</td><td>0</td><td>0.25</td><td>2.0</td><td>The margin (m) at AGV fright dimensions that has to be free of obstacles</td></tr>
<tr><td>float</td><td>obst_free_zone_front</td><td>0</td><td>0.25</td><td>2.0</td><td>The margin (m) at AGV front dimension that has to be free of obstacles</td></tr>
<tr><td>float</td><td>obst_free_zone_rear</td><td>0</td><td>0.25</td><td>2.0</td><td>The margin (m) at AGV rear dimension that has to be free of obstacles</td></tr>
<tr><td>float</td><td>obst_distance_to_begin_planning</td><td>0.05</td><td>8.0</td><td>40.0</td><td>Distance (m) along the trajectory from AGV to obstacle to begin planning the bypass</td></tr>
<tr><td>float</td><td>obst_bypass_velocity</td><td>0.01</td><td>0.3</td><td>3.0</td><td>Maximum velocity (m/s) during the obstacle bypass when out of nominal route</td></tr>
<tr><td>float</td><td>obst_detect_obstacles_dist</td><td>1.0</td><td>9.0</td><td>20.0</td><td>Maximum distance (m) from which obstacles are polled along the trajectory</td></tr>
<tr><td>float</td><td>obst_moving_det_treshold</td><td>0.01</td><td>0.5</td><td>10.0</td><td>Minimum obstacle velocity (m/s) to count it as moving</td></tr>
<tr><td>int</td><td>obst_detect_min_scan_points</td><td>1</td><td>4</td><td>30</td><td>Amount of colliding scan points required to start obstacle avoidance</td></tr>
<tr><td>int</td><td>obst_moving_wait_time_ms</td><td>10</td><td>4000</td><td>10000</td><td>Number of milliseconds to wait if obstacle moves before replanning</td></tr>
<tr><td>int</td><td>obst_return_wait_time_s</td><td>5</td><td>10</td><td>900</td><td>Number of seconds to try replanning before aborting and returning to nominal route</td></tr>
<tr><td>int</td><td>obst_replan_wait_time_ms</td><td>10</td><td>2000</td><td>10000</td><td>Amount of milliseconds to wait between consecutive replans</td></tr>
<tr><td>int</td><td>obst_send_fleet_every_nth_point</td><td>1</td><td>1</td><td>20</td><td>When sending obstacle bypass trajectory to fleet control, send every nth point to send less data</td></tr>
<tr><td>int</td><td>obst_wait_time_for_answer_s</td><td>1</td><td>10</td><td>60</td><td>Maximum time (s) for waiting an answer from the fleet control. After that obstacle avoidance status will be reset</td></tr>
<tr><td>float</td><td>obst_bypass_edge_safety_addition</td><td>0.0</td><td>0.25</td><td>5.0</td><td>Additional free space between obstacle and AGV during bypass for the trajectory</td></tr>
<tr><td>float</td><td>obst_bypass_trajectory_max_angle_deg</td><td>0.0</td><td>45.0</td><td>90.0</td><td>Maximum angle (deg) that the AGV may turn when bypassing</td></tr>
<tr><td>Int</td><td>obst_detection_scanners</td><td>0</td><td>3</td><td>3</td><td>Defines which localization scanners are used for obstacle detection:<br>0 = none<br>1 = rear scanner only<br>2 = front scanner only<br>3 = both scanners</td></tr>
<tr><td>Int</td><td>obst_detection_meas_scanners</td><td>0</td><td>0</td><td>3</td><td>Defines which measurement scanners are used for obstacle detection:<br>0 = none<br>1 = first scanner only<br>2 = second scanner only<br>3 = both scanners</td></tr>
<tr><td>Int</td><td>obst_use_zones</td><td>0</td><td>1</td><td>2</td><td>1 = Only bypass in obstacle avoidance zones defined in tools<br>2 = Detect and bypass obstacles only inside zones</td></tr>
<tr><td>Int</td><td>obst_detect_moving</td><td>0</td><td>1</td><td>1</td><td>Detect if obstacles are moving.<br>0 = disabled<br>1 = enabled</td></tr>
<tr><td>Int</td><td>obst_omni_constant_frame_heading</td><td>0</td><td>1</td><td>1</td><td>For omni machine type, use constant frame heading when driving around the obstacle</td></tr>
<tr><td>Int</td><td>obst_drive_near_close_obstacle</td><td>0</td><td>0</td><td>1</td><td>Whether to keep going when an obstacle is too close but not clashing directly with agv frame.<br>0 = stop<br>1 = keep going</td></tr>
<tr><td>float</td><td>obst_close_obstacle_safety_zone</td><td>0.00</td><td>0.05</td><td>5.00</td><td>Distance around the agv in meters that is used to check close obstacles when obst_drive_near_close_obstacle is set to 1</td></tr>
</tbody></table>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="../../DriveControl/ReturnToRoute/ReturnToRoute-en.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="../../DriveControl/ObstacleAvoidanceV2/ObstacleAvoidanceV2-en.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="../../DriveControl/ReturnToRoute/ReturnToRoute-en.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="../../DriveControl/ObstacleAvoidanceV2/ObstacleAvoidanceV2-en.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
