<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Coupled driving - NAVITROL USER INSTRUCTIONS - Navitec Systems Oy CONFIDENTIAL</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="../../favicon.svg">
                        <link rel="shortcut icon" href="../../favicon.png">
                <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
                <link rel="stylesheet" href="../../css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="../../fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
                <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../MdBook/MdbookFrontPage.html">Front page</a></li><li class="chapter-item expanded affix "><li class="part-title">Introduction</li><li class="chapter-item expanded "><a href="../../Introduction/NavitrolUserInstructions/NavitrolUserInstructions-en.html"><strong aria-hidden="true">1.</strong> Navitrol user instructions</a></li><li class="chapter-item expanded "><a href="../../Introduction/Licensing/Licensing-en.html"><strong aria-hidden="true">2.</strong> Licensing</a></li><li class="chapter-item expanded "><a href="../../Introduction/OdometrySource/OdometrySource-en.html"><strong aria-hidden="true">3.</strong> Odometry source</a></li><li class="chapter-item expanded "><a href="../../Introduction/InitialCalibrationGuide/InitialCalibrationGuide-en.html"><strong aria-hidden="true">4.</strong> Initial calibration guide</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/ParameterReconfiguration/ParameterReconfiguration-en.html"><strong aria-hidden="true">5.</strong> Parameter reconfiguration</a></li><li class="chapter-item expanded "><a href="../../Introduction/Parameters/Parameters.html"><strong aria-hidden="true">6.</strong> Parameter listing</a></li><li class="chapter-item expanded "><a href="../../Introduction/Parameters/JsonConfigurationFile-en.html"><strong aria-hidden="true">7.</strong> JSON configuration file</a></li><li class="chapter-item expanded "><a href="../../Introduction/TeachingInstructions/TeachingInstructions-en.html"><strong aria-hidden="true">8.</strong> Teaching instructions</a></li><li class="chapter-item expanded "><a href="../../Introduction/FeatureMatrix/FeatureMatrix-en.html"><strong aria-hidden="true">9.</strong> Feature Matrix</a></li><li class="chapter-item expanded affix "><li class="part-title">Device interfaces</li><li class="chapter-item expanded "><a href="../../AgvInterfaces/SupportedDevices/SupportedDevices-en.html"><strong aria-hidden="true">10.</strong> Supported devices</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/GenericInterfaces/GenericInterfacesHeading.html"><strong aria-hidden="true">11.</strong> Generic interfaces</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../AgvInterfaces/GenericInterfaces/EthernetSupervisorInterface/EthernetSupervisorInterface-en.html"><strong aria-hidden="true">11.1.</strong> Ethernet Supervisor</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/GenericInterfaces/CanCommunication/CanCommunication-en.html"><strong aria-hidden="true">11.2.</strong> CAN communication</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../AgvInterfaces/GenericInterfaces/CanSupervisorInterface/CanSupervisorInterface-en.html"><strong aria-hidden="true">11.2.1.</strong> CAN Supervisor</a></li></ol></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/GenericInterfaces/EthercatCommunication/EthercatCommunication-en.html"><strong aria-hidden="true">11.3.</strong> EtherCAT Communication</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/GenericInterfaces/Simove/SimoveInterface-en.html"><strong aria-hidden="true">11.4.</strong> SIMOVE</a></li></ol></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/MotorControllersHeading.html"><strong aria-hidden="true">12.</strong> Motor controllers</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/MotorControllersCommon/MotorControllersCommon-en.html"><strong aria-hidden="true">12.1.</strong> Motor controller common</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Schwarzmueller/SchwarzmuellerSetupInstructions/SchwarzmuellerSetupInstructions-en.html"><strong aria-hidden="true">12.2.</strong> Schwarzmueller setup</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Schwarzmueller/SchwarzmuellerParameterSetupInstructions/SchwarzmuellerParameterSetupInstructions-en.html"><strong aria-hidden="true">12.2.1.</strong> Schwarzmueller parameters</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Schwarzmueller/SchwarzmuellerTroubleshooting/SchwarzmuellerTroubleshooting-en.html"><strong aria-hidden="true">12.2.2.</strong> Schwarzmueller troubleshooting</a></li></ol></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Curtis/CurtisMotorController-en.html"><strong aria-hidden="true">12.3.</strong> Curtis</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Engel/EngelMotorController-en.html"><strong aria-hidden="true">12.4.</strong> Engel</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Kinco/KincoMotorController-en.html"><strong aria-hidden="true">12.5.</strong> Kinco</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Nanotec/NanotecMotorController-en.html"><strong aria-hidden="true">12.6.</strong> Nanotec</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Oriental/OrientalMotorController-en.html"><strong aria-hidden="true">12.7.</strong> Oriental</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Synapticon/SynapticonMotorController-en.html"><strong aria-hidden="true">12.8.</strong> Synapticon</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Roboteq/RoboteqOpenLoopControllerConfiguration-en.html"><strong aria-hidden="true">12.9.</strong> Roboteq Open loop</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Roboteq/RoboteqClosedLoopControllerConfiguration-en.html"><strong aria-hidden="true">12.10.</strong> Roboteq Closed loop</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/MiControl/MiControlMotorController-en.html"><strong aria-hidden="true">12.11.</strong> MiControl</a></li></ol></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/ScannerConfigurations/ScannerHeading.html"><strong aria-hidden="true">13.</strong> Laser scanners</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../AgvInterfaces/ScannerConfigurations/ScannerConfigurations-en.html"><strong aria-hidden="true">13.1.</strong> Scanner configurations</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/ScannerCommunicationTroubleshoot/ScannerCommunicationTroubleshoot-en.html"><strong aria-hidden="true">13.2.</strong> Scanner communication troubleshooting</a></li></ol></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/OpticalCodeReader/OpticalCodeReader.html"><strong aria-hidden="true">14.</strong> Optical code reader</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/Encoders/EncoderHeading.html"><strong aria-hidden="true">15.</strong> Encoders</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../AgvInterfaces/Encoders/EthercatEncoders/EthercatEncoders-en.html"><strong aria-hidden="true">15.1.</strong> EtherCAT encoders</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">User interfaces</li><li class="chapter-item expanded "><a href="../../CustomerUis/NavitrolMonitor/NavitrolMonitor-en.html"><strong aria-hidden="true">16.</strong> Navitrol Monitor</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../CustomerUis/NavitrolMonitor3rdPartyLicenses/NavitrolMonitor3rdPartyLicenses-en.html"><strong aria-hidden="true">16.1.</strong> Navitrol Monitor third party licenses</a></li></ol></li><li class="chapter-item expanded "><a href="../../CustomerUis/WebInterface/WebInterface-en.html"><strong aria-hidden="true">17.</strong> Navitrol web interface</a></li><li class="chapter-item expanded "><a href="../../CustomerUis/Parameter Tool/ParameterTool-en.html"><strong aria-hidden="true">18.</strong> Parameter Tool Beta</a></li><li class="chapter-item expanded affix "><li class="part-title">Localization</li><li class="chapter-item expanded "><a href="../../Localization/PositionConfidence/PositionConfidence-en.html"><strong aria-hidden="true">19.</strong> Position confidence</a></li><li class="chapter-item expanded "><a href="../../Localization/ScannerCalibration/ScannerCalibration-en.html"><strong aria-hidden="true">20.</strong> Scanner calibration</a></li><li class="chapter-item expanded "><a href="../../Localization/EnvironmentGuidelines/EnvironmentGuidelines-en.html"><strong aria-hidden="true">21.</strong> Environment guidelines</a></li><li class="chapter-item expanded "><a href="../../Localization/AutomaticOdometryCorrection/AutomaticOdometryCorrection-en.html"><strong aria-hidden="true">22.</strong> Automatic odometry correction</a></li><li class="chapter-item expanded "><a href="../../Localization/ReflectorBasedPositionInitialization/ReflectorBasedPositionInitialization-en.html"><strong aria-hidden="true">23.</strong> Reflector based position initialization</a></li><li class="chapter-item expanded "><a href="../../Localization/PrecisionPositioning/PrecisionPositioning-en.html"><strong aria-hidden="true">24.</strong> Precision positioning</a></li><li class="chapter-item expanded "><a href="../../Localization/LocalizationScannerChangeOnTheFly/LocalizationScannerChangeOnTheFly-en.html"><strong aria-hidden="true">25.</strong> Changing scanner on the fly</a></li><li class="chapter-item expanded "><a href="../../Localization/RampZones/RampZones-en.html"><strong aria-hidden="true">26.</strong> Ramp zones</a></li><li class="chapter-item expanded "><a href="../../Localization/GpsPositioning/GpsPositioning-en.html"><strong aria-hidden="true">27.</strong> GPS Positioning</a></li><li class="chapter-item expanded "><a href="../../Localization/ImuAndSensorFusion/ImuAndSensorFusion-en.html"><strong aria-hidden="true">28.</strong> IMU and sensor fusion</a></li><li class="chapter-item expanded "><a href="../../Localization/ExternalLocalization/ExternalLocalization-en.html"><strong aria-hidden="true">29.</strong> External localization</a></li><li class="chapter-item expanded "><a href="../../Localization/DynamicMapping/DynamicMappingServer/DynamicMappingServer-en.html"><strong aria-hidden="true">30.</strong> Dynamic mapping server</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Localization/DynamicMapping/DynamicMappingServerAndClientCompatibility/DynamicMappingServerAndClientCompatibility-en.html"><strong aria-hidden="true">30.1.</strong> Dynamic mapping client/server compatibility</a></li><li class="chapter-item expanded "><a href="../../Localization/DynamicMapping/DynamicMappingServerHardwareRequirements/DynamicMappingServerHardwareRequirements.html"><strong aria-hidden="true">30.2.</strong> Dynamic mapping client/server hardware requirements</a></li></ol></li><li class="chapter-item expanded "><a href="../../Localization/WheelSlipping/WheelSlipping-en.html"><strong aria-hidden="true">31.</strong> Wheel slipping diagnostic</a></li><li class="chapter-item expanded "><a href="../../Localization/3dPositioning/3dPositioning-en.html"><strong aria-hidden="true">32.</strong> 3D positioning</a></li><li class="chapter-item expanded affix "><li class="part-title">Position control</li><li class="chapter-item expanded "><a href="../../PositionControl/StartOffsetSlowdown/StartOffsetSlowdown-en.html"><strong aria-hidden="true">33.</strong> Start offset slowdown</a></li><li class="chapter-item expanded "><a href="../../PositionControl/CoupledDriving/CoupledDrivingFeature-en.html" class="active"><strong aria-hidden="true">34.</strong> Coupled driving</a></li><li class="chapter-item expanded "><a href="../../PositionControl/MagneticLineFollowing/MagneticLineFollowing-en.html"><strong aria-hidden="true">35.</strong> Magnetic line following</a></li><li class="chapter-item expanded "><a href="../../PositionControl/TrailerTransport/TrailerTransport-en.html"><strong aria-hidden="true">36.</strong> Trailer transport</a></li><li class="chapter-item expanded "><a href="../../PositionControl/BarrierStop/BarrierStop-en.html"><strong aria-hidden="true">37.</strong> Barrier stop</a></li><li class="chapter-item expanded "><a href="../../PositionControl/DataMatrixDocking/DataMatrixDockingDMC-en.html"><strong aria-hidden="true">38.</strong> Data Matrix Code Docking V2</a></li><li class="chapter-item expanded "><a href="../../PositionControl/Docking/Docking-en.html"><strong aria-hidden="true">39.</strong> Docking</a></li><li class="chapter-item expanded affix "><li class="part-title">Drive control</li><li class="chapter-item expanded "><a href="../../DriveControl/DrivingOptions/DrivingOptions-en.html"><strong aria-hidden="true">40.</strong> Driving options</a></li><li class="chapter-item expanded "><a href="../../DriveControl/Standalone/Standalone-en.html"><strong aria-hidden="true">41.</strong> Standalone</a></li><li class="chapter-item expanded "><a href="../../DriveControl/StopAndHold/StopAndHold-en.html"><strong aria-hidden="true">42.</strong> Stop-and-hold</a></li><li class="chapter-item expanded "><a href="../../DriveControl/VDA5050/VDA5050-en.html"><strong aria-hidden="true">43.</strong> VDA 5050</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../DriveControl/VDA5050/VDA5050FeatureMatrix-en.html"><strong aria-hidden="true">43.1.</strong> VDA 5050 Support status</a></li></ol></li><li class="chapter-item expanded "><a href="../../DriveControl/ReturnToRoute/ReturnToRoute-en.html"><strong aria-hidden="true">44.</strong> Return to route</a></li><li class="chapter-item expanded "><a href="../../DriveControl/ObstacleAvoidance/ObstacleAvoidance-en.html"><strong aria-hidden="true">45.</strong> Obstacle avoidance</a></li><li class="chapter-item expanded "><a href="../../DriveControl/ObstacleAvoidanceV2/ObstacleAvoidanceV2-en.html"><strong aria-hidden="true">46.</strong> Obstacle avoidance V2</a></li><li class="chapter-item expanded "><a href="../../DriveControl/ContainerDriving/ContainerDriving-en.html"><strong aria-hidden="true">47.</strong> Container driving</a></li><li class="chapter-item expanded "><a href="../../DriveControl/RecordAndPlay/RecordAndPlay-en.html"><strong aria-hidden="true">48.</strong> Record and Play</a></li><li class="chapter-item expanded "><a href="../../DriveControl/RouteFreeNavigation/RouteFreeNavigation-en.html"><strong aria-hidden="true">49.</strong> Route free navigation</a></li><li class="chapter-item expanded affix "><li class="part-title">Kinematics</li><li class="chapter-item expanded "><a href="../../Kinematics/OmniSteerLimit/OmniSteerLimit-en.html"><strong aria-hidden="true">50.</strong> Omni steer limit</a></li><li class="chapter-item expanded "><a href="../../Kinematics/OneDriveWheelOmni/OneDriveWheelOmni-en.html"><strong aria-hidden="true">51.</strong> Omni one drive wheel</a></li><li class="chapter-item expanded affix "><li class="part-title">Pickup and drop-off</li><li class="chapter-item expanded "><a href="../../LoadHandling/ActuatorControl/ActuatorControl-en.html"><strong aria-hidden="true">52.</strong> Actuator control</a></li><li class="chapter-item expanded "><a href="../../LoadHandling/ScannerLiftActuator/ScannerLiftActuator-en.html"><strong aria-hidden="true">53.</strong> Scanner lift actuator</a></li><li class="chapter-item expanded "><a href="../../LoadHandling/Racking/Racking-en.html"><strong aria-hidden="true">54.</strong> Racking</a></li><li class="chapter-item expanded "><a href="../../LoadHandling/BufferLanes/BufferLanes-en.html"><strong aria-hidden="true">55.</strong> Buffer lanes</a></li><li class="chapter-item expanded "><a href="../../LoadHandling/StackLoading/StackLoading-en.html"><strong aria-hidden="true">56.</strong> Loading from a stack</a></li><li class="chapter-item expanded "><a href="../../LoadHandling/BlockStacking/BlockStacking-en.html"><strong aria-hidden="true">57.</strong> Unloading to a stack</a></li><li class="chapter-item expanded "><a href="../../LoadHandling/DistanceToTarget/DistanceToTarget-en.html"><strong aria-hidden="true">58.</strong> Distance to target estimation</a></li><li class="chapter-item expanded affix "><li class="part-title">Target and obstacle detection</li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/PalletDetection/PalletDetection-en.html"><strong aria-hidden="true">59.</strong> Pallet detection</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/3dTargetDetection/3dTargetDetection-en.html"><strong aria-hidden="true">60.</strong> 3D Target detection</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/PatternDetection/PatternDetection-en.html"><strong aria-hidden="true">61.</strong> Pattern detection</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/ObstacleDetection/ObstacleDetection-en.html"><strong aria-hidden="true">62.</strong> Obstacle detection</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/ExternalTargetDetection/ExternalTargetDetection-en.html"><strong aria-hidden="true">63.</strong> External target detection</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/TableDetection/TableDetection-en.html"><strong aria-hidden="true">64.</strong> Table detection</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/Wallmonitoring/Wallmonitoring-en.html"><strong aria-hidden="true">65.</strong> Wall monitoring</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/OccupancyCheck/OccupancyCheck-en.html"><strong aria-hidden="true">66.</strong> Occupancy check</a></li><li class="chapter-item expanded affix "><li class="part-title">Miscellaneous</li><li class="chapter-item expanded "><a href="../../Miscellaneous/ErrorDescriptions/ErrorDescriptions-en.html"><strong aria-hidden="true">67.</strong> Error descriptions</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/Logging/Logging-en.html"><strong aria-hidden="true">68.</strong> Logging</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/LinuxImageInstallation/LinuxImagesHeading.html"><strong aria-hidden="true">69.</strong> Linux image installation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Miscellaneous/LinuxImageInstallation/CanDrivers/CanDrivers-en.html"><strong aria-hidden="true">69.1.</strong> CAN drivers</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/LinuxImageInstallation/Clonezilla/ClonezillaInstallation-en.html"><strong aria-hidden="true">69.2.</strong> Clonezilla</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/LinuxImageInstallation/DebianBuster/DebianBusterInstallation-en.html"><strong aria-hidden="true">69.3.</strong> Debian Buster</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/LinuxImageInstallation/DebianBullseye/DebianBullseyeInstallation-en.html"><strong aria-hidden="true">69.4.</strong> Debian Bullseye</a></li></ol></li><li class="chapter-item expanded "><a href="../../Miscellaneous/ParameterZones/ParameterZones-en.html"><strong aria-hidden="true">70.</strong> Parameter zones</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/Reflectors/Reflectors-en.html"><strong aria-hidden="true">71.</strong> Reflectors</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/SslCertificates/SslCertificates-en.html"><strong aria-hidden="true">72.</strong> SSL Certificate configuration</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/BatteryOvertemperatureActions/BatteryOvertemperatureActions.html"><strong aria-hidden="true">73.</strong> Battery overtemperature actions</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/Charging/Charging-en.html"><strong aria-hidden="true">74.</strong> Charging and battery management</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/HardwareRequirements/HardwareRequirements-en.html"><strong aria-hidden="true">75.</strong> Hardware requirements</a></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="dark">Dark</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">NAVITROL USER INSTRUCTIONS - Navitec Systems Oy CONFIDENTIAL</h1>

                    <div class="right-buttons">
                                                <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="coupled-driving"><a class="header" href="#coupled-driving">Coupled Driving</a></h1>
<p>Updated 26.01.2024</p>
<hr />
<h2 id="glossary"><a class="header" href="#glossary">Glossary</a></h2>
<table><thead><tr><th>Term</th><th>Description</th></tr></thead><tbody>
<tr><td>Formation</td><td>AGVs coupled together driving as a single unit</td></tr>
<tr><td>Formation Error</td><td>Error between nominal and actual position of an AGV within formation</td></tr>
<tr><td>Coupling</td><td>Switching AGV from individual driving state to coupled/formation driving state</td></tr>
<tr><td>Decoupling</td><td>Switching AGV from coupled/formation driving state to individual driving state</td></tr>
<tr><td>Formation Navigation Point</td><td>Formation or Load navigation point is the point on load that should follow route defined for coupled driving</td></tr>
</tbody></table>
<hr />
<h2 id="introduction"><a class="header" href="#introduction">Introduction</a></h2>
<p>Coupled driving in Navitrol allows two AGVs to drive in a formation maintaining fix relative position to each other.
This feature enables transportation of large objects with multiple AGVs.</p>
<p>Navitrol uses a Leader-Follower architecture for coordinated motion of the AGVs, one of the AGV in formation is designated as Leader whereas other is Follower.
Leader AGV ensures position control and route following of the formation by commanding all AGVs with reference drive commands.
Follower AGVs in addition to following drive commands from Leader, try to minimize the relative error from load all the time.</p>
<h2 id="system-requirements"><a class="header" href="#system-requirements">System Requirements</a></h2>
<p>Coupled driving requires all AGVs in formation to drive synchronously and keep the formation intact. To ensure this, the system must fulfil following requirements:</p>
<ul>
<li><strong>Omni Kinematics</strong></li>
</ul>
<p>Coupled Driving is supported only for Omni kinematic AGVs</p>
<ul>
<li><strong>Identical control response</strong></li>
</ul>
<p>It is critical that response of AGVs to drive command is similar. It is therefore recommended to use identical AGVs for coupled driving.</p>
<ul>
<li><strong>Error measurement on each machine relative to Load</strong></li>
</ul>
<p>To keep the formation intact during driving, Follower AGVs need error measurement relative to their nominal position in formation. More details in <em>Formation Error Sensor Setup</em> section.</p>
<ul>
<li><strong>Fast and reliable communication between AGVs</strong></li>
</ul>
<p>Leader-Follower architecture requires continuous flow of data between AGVs. It is essential to have a reliable communication between AGVs.
More details in <em>Communication Between Coupled AGVs</em> section.</p>
<ul>
<li>
<p><strong>Identical Navitrol version</strong>  All AGVs in coupled driving must be running identical Navitrol version.</p>
</li>
<li>
<p><strong>Unique machine_id</strong> All AGVs must have unique machine_id parameter value.</p>
</li>
<li>
<p><strong>Identical mapping and localization</strong> All AGVs must have identical coordinate reference for localizations. Additionally, during coupled driving, each AGV must have correct position fix.</p>
</li>
</ul>
<h2 id="coupled-driving-1"><a class="header" href="#coupled-driving-1">Coupled Driving</a></h2>
<p>Coupled driving allows AGVs to transport load larger than possible with a single AGV. When in formation, AGVs need to move in coordination and navigation has to be done for load instead of for individual AGVs. This requires defining a navigation point on load, which will follow route defined for coupled driving.</p>
<h3 id="coupling-formation-configuration"><a class="header" href="#coupling-formation-configuration">Coupling Formation Configuration</a></h3>
<p>Formation configuration is defined in formation frame of reference with origin at navigation point of the load and x-axis in the direction of desired load heading.</p>
<p>Formation configuration include:</p>
<ul>
<li>
<p>Nominal pose of AGVs relative to formation navigation point</p>
</li>
<li>
<p>Dimensions of the load</p>
</li>
<li>
<p>IPs for establishing communication between AGVs</p>
</li>
</ul>
<p>Configurations is specified as part of coupling command through Navithor or Supervisor interface. Please see corresponding interface documentation for more details.</p>
<p>Figure 1 below shows a simple formation setup and associated dimensions. Nominal pose of AGVs is specified in Load reference frame; i.e., in Figure 1 AGV1 and AGV2 have nominal pose (x, y, h) to be (X, 0, 0) and (-X, 0, 0) respectively; where X is the AGV distance from origin on x axis.</p>
<p><img src="./media-en/image3.png" alt="" /></p>
<blockquote>
<p>Figure 1 Simple coupled drive formation</p>
</blockquote>
<p>It is also possible to define a formation with non-zero AGV nominal headings. &gt; Figure 2 shows an example of such formation where AGVs are on Y axis on the load and have a nominal heading of 180 degrees with the load. The nominal position in formation reference frame for AGV1 and AGV2 in this case will be (0, -Y, 180°) and (0, Y, 180°)  respectively.</p>
<p><img src="./media-en/image4.png" alt="" /></p>
<blockquote>
<p>Figure 2 Coupled formation with 180 degrees difference between Load and AGV heading</p>
</blockquote>
<p>It is recommended to have AGVs symmetric around the load in formation.
AGVs must also be collinear with the Load navigation point. Furthermore, it is recommended to define formation with heading along the length of the load (as in Figure 1).Figure 2 Coupled formation with 180 degrees difference between Load and AGV heading</p>
<h3 id="coupled-state"><a class="header" href="#coupled-state">COUPLED state</a></h3>
<p>All AGVs in formation are in COUPLED state during coupled driving. This state is activated by sending coupling command to Navitrol from Fleet control or Supervisor interface. Transition to COUPLED state is only possible from STANDBY state.</p>
<p>Transition to and from COUPLED state is further described in Coupling Commands section.</p>
<p>In COUPLED state, Navitrol uses a different segment file than normal driving. The segment file for coupled drive is named with <strong>segCD_</strong> prefix. Navithor tools can be used to generate coupled driving segment file.</p>
<h3 id="coupling-modes"><a class="header" href="#coupling-modes">Coupling Modes</a></h3>
<p>Navitrol is in one of the Coupling Modes when COUPLED state is active.
Coupling mode defines AGV's role within coupled drive. Desired mode for an AGV is specified at the time of coupling in coupling command.</p>
<p>Following are three possible coupling modes:</p>
<ul>
<li>
<p><strong>Decoupled</strong>
When coupled driving is not active, coupling mode is Decoupled.</p>
</li>
<li>
<p><strong>Follower</strong>
AGV in Follower coupling mode follows drive commands from the Leader AGV. During driving, Follower AGV also minimizes error from nominal position in formation using a local PI controller.</p>
</li>
<li>
<p><strong>Leader</strong>
Leader AGV is the brain of coupled formation. Responsibilities of Leader include localization and position control of formation, and coordination between all AGVs in formation. All communication related to drive orders and status messages with fleet control or supervisor system are also done through Leader AGV. Since position control for coupled formation is running on the Leader, it has a coupled driving state (STANDBY/AUTO/FSTOP etc.) in addition to normal Navitrol state that stays COUPLED during coupled driving.</p>
</li>
</ul>
<h3 id="coupling-commands"><a class="header" href="#coupling-commands">Coupling Commands</a></h3>
<p>To start coupled driving, machines must be switched to COUPLED state.
This is done through coupling commands. The command can be sent through fleet control or supervisor interface. Detailed command structure could be found in relevant communication interface specifications.</p>
<p>Coupling commands include:</p>
<ul>
<li>
<p><strong>Coupling Command</strong> Coupling command is required to switch to COUPLED state. The command specifies mode of coupling and other details required to establish the coupled formation. Following are the important points to consider for coupling command:</p>
<ul>
<li>
<p>Coupling is possible only in STANDBY state</p>
</li>
<li>
<p>Both Follower and Leader must be commanded to COUPLED state individually. It is recommended to first command Follower to COUPLED state.</p>
</li>
<li>
<p>Coupling as Leader requires details about formation (size, configuration, Follower IPs, machine ids etc.)</p>
</li>
<li>
<p>Command could get rejected if coupling with specified configuration is not possible</p>
</li>
<li>
<p>Response indicates success or failure of coupling command</p>
</li>
</ul>
</li>
<li>
<p><strong>Decoupling Command</strong> Decoupling command is needed to switch from COUPLED state back to STANDBY state. Following are a few points to consider when Decoupling:</p>
<ul>
<li>
<p>Decoupling is possible only when coupled driving state is STANDBY, FSTOP or START</p>
</li>
<li>
<p>All AGVs in formation must be decoupled individually</p>
</li>
<li>
<p>Response indicates success or failure of decoupling</p>
</li>
</ul>
</li>
<li>
<p><strong>Coupling Status</strong>
When Navitrol is in COUPLED state, a Coupling Status message indicates status of coupled driving. Though both Leader and Follower AGVs can send coupling status message, complete information is available only in the status from Leader machine. Coupling status can be received through both Navithor or Supervisor interface.</p>
</li>
</ul>
<h3 id="communication-between-coupled-agvs"><a class="header" href="#communication-between-coupled-agvs">Communication Between Coupled AGVs</a></h3>
<p>Coupled driving required a fast and reliable communication link between Leader and Followers at all times. Leader machine connects to Follower with a TCP stream connection. IP of the Follower machine must be provided in coupling command to Leader machine. For reliable communication, there should be a peer-to-peer communication link between Leader and Follower AGVs.</p>
<p>Navitrol establishes a one-to-one TCP connection between Leader and Follower AGVs to enable communication. In each control cycle, Leader sends a status request to Followers and expects a status response in return. On receiving response from all AGVs, a drive command is computed and sent to each AGV. For smooth coupled control, it is essential that request-to-response time between AGVs is no more than 40ms.</p>
<p>In addition to IPs in coupling command, following parameters should be configured properly in parameters:</p>
<ul>
<li>
<p>navicomm_inte_ip: Required when using Navithor fleet control and IP for coupled driving communication is different than Navitrol-Navithor communication.</p>
</li>
<li>
<p>navicomm_inte_port: Must be same on all AGVs to be coupled.</p>
</li>
</ul>
<h3 id="formation-error-measurements"><a class="header" href="#formation-error-measurements">Formation Error Measurements</a></h3>
<p>During coupled driving, formation error measurements are used to keep the machine close to their nominal orientations within the formation. A formation error control actively minimizes these errors.</p>
<p>Formation error measurement is the measure of AGV pose relative to its nominal pose in formation. Since nominal pose is fixed relative to the load, formation error measurement is also a load relative measurement.
Figure 3 shows formation error measurement for one AGV in the formation.</p>
<p>Different option to configure these measurements are described in Section <em>Formation Error Sensor Setup</em>.</p>
<p><img src="./media-en/image5.png" alt="" /></p>
<blockquote>
<p>Figure 3: Formation Error Measurement for one AGV</p>
</blockquote>
<p>In a two AGV formation, Leader AGV can only have header error, whereas the follower can have error in heading and the axis aligned with leader.
Figure 4 shows one such formation where AGV-1 is the Leader-</p>
<p><img src="./media-en/image6.png" alt="" /></p>
<blockquote>
<p>Figure 4: Formation Error measurements for 2 AGV formation</p>
</blockquote>
<h3 id="driving-in-coupled-state"><a class="header" href="#driving-in-coupled-state">Driving in COUPLED State</a></h3>
<p>Once all AGVs are in coupled mode and communication between AGVs has been established, it is possible to drive the formation. Drive commands and status related communication is possible only through Leader. Drive commands can be sent from Fleet control, Supervisor interface or Navitrol Monitor in the same way as done for a single AGV.</p>
<p>During the driving, a 2-layered control is executed to follow the driving route and keep the formation intact. The two layers are formation position control on Leader AGV and formation error control individually on all AGVs in the formation.</p>
<h3 id="position-control"><a class="header" href="#position-control">Position Control</a></h3>
<p>Position control during coupled drive needs to ensures that the navigation point on load follows defined route. As described in communication section, Leader AGV requests status update from all AGVs in each cycle. Once status update is received from all AGVs, following steps are executed for position control:</p>
<ul>
<li>
<p><strong>Formation Localization</strong>: Position of load is estimated from position of the AGVs and formation error measurements</p>
</li>
<li>
<p><strong>Formation Position Control</strong>: Drive reference is computed for formation.</p>
</li>
<li>
<p><strong>Drive Commands for each AGV</strong>: Formation drive reference is transformed to drive reference for each AGV.</p>
</li>
</ul>
<h3 id="minor-features"><a class="header" href="#minor-features">Minor features</a></h3>
<p><strong>Direction change delay</strong>
Direction change delay can be used to define a period of zero speed reference when the formation speed reference changes direction and when pivot starts or ends. The delay is defined by the <strong>pc_direction_change_wait_ms</strong>-parameter and by default it is 500 milliseconds.</p>
<h3 id="formation-error-control"><a class="header" href="#formation-error-control">Formation Error Control</a></h3>
<p>To keep each AGV at it nominal position within formation, an additional formation error PI control tries to minimize <em>Formation Error Measurements</em>. This controller continuously adjusts the drive command from Leader Position control; thereby reducing the formation error alongside following the Leader drive command.</p>
<p>It is essential to monitor formation errors and tune controller gains such that the error remains within acceptable range during driving.
Controller gain parameters are listed in Section <em>Parameters</em>. Formation errors of both Leader and Follower AGVs can be monitored through &quot;Coupled Drive Formation Errors&quot; chart in Navitrol Monitor as shown in Figure 5. Error measurements are available only through Leader AGV.</p>
<p><img src="./media-en/image7.png" alt="" /></p>
<blockquote>
<p>Figure 5: Formation Errors chart in Navitrol Monitor on Leader AGV</p>
</blockquote>
<h4 id="override-formation-error-controller"><a class="header" href="#override-formation-error-controller">Override Formation Error Controller</a></h4>
<p>To better tune the controller around small formation errors, it is possible to define an override region around zero error where a separate set of formation error control gains will be used by the controller. These override gains are used only if non-zero limits are defined for override region. The relevant parameter for override controller can be found in Section <em>Parameters</em>, group <em>Override Formation Error Control Parameters</em>.</p>
<h4 id="disable-formation-error-controller"><a class="header" href="#disable-formation-error-controller">Disable Formation Error Controller</a></h4>
<p>It is possible to disable formation error control on specific route segments by setting a disable property in route custom properties using Navithor Tools. This might be needed on short segments where either formation error measurement is not possible or formation error control is not needed for any other reason. However, it is not recommended to
disable it for long drive segments since that may result in AGVs drift away from their nominal position in formation.</p>
<p>Custom route property name for disabling formation error control is &quot;FormationErrCtrlDisabled&quot; by default. Property value must be set to 1 through Navithor Tools for disabling formation error control on specific route segments.</p>
<h2 id="formation-error-sensor-setup"><a class="header" href="#formation-error-sensor-setup">Formation Error Sensor Setup</a></h2>
<p>Three types of sensor setups are possible for formation error measurements. Appropriate sensor setup can be configured through coupled_formation_err_sensor parameter.</p>
<h3 id="simulated-formation-error-sensor"><a class="header" href="#simulated-formation-error-sensor">Simulated formation error sensor</a></h3>
<p>Navitrol compares coupling configuration and localization from each AGV to estimate the formation error. However, due to possible imprecisions and low frequency of measurements, this is only recommended for simulations or preliminary testing.
Parameter coupled_formation_err_sensor should be set to 0 on all AGVs for simulated error measurements.</p>
<h3 id="load-relative-sensor"><a class="header" href="#load-relative-sensor">Load relative sensor</a></h3>
<p>AGV can have on-board sensors (e.g., laser measurements) to continuously measure distance and heading errors relative to load after coupling. These measurements can be sent to Navitrol through CAN or Supervisor interface. To configure load relative sensor measurements for formation error, coupled_formation_err_sensor parameter must be set to 1 on all AGVs.</p>
<h3 id="formation-error-from-pattern-detection"><a class="header" href="#formation-error-from-pattern-detection">Formation error from pattern detection</a></h3>
<p>Pattern-detection based formation error measurement requires reflector pattern installed on Follower machine that can be seen by the Leader during coupled drive. Based on coupling and pattern configurations, Leader AGV computes relative distance and heading error between AGVs and transforms it to formation error measurements.</p>
<p>Following parameters must be configured correctly to use pattern detection for formation errors:</p>
<ul>
<li>
<p>On Leader AGV:</p>
<ul>
<li>
<p>Sensor type: coupled_formation_err_sensor to 2</p>
</li>
<li>
<p>Reflector Pattern: See pattern detection document.</p>
</li>
</ul>
</li>
<li>
<p>On Follower AGV:</p>
<ul>
<li>
<p>Sensor type: coupled_formation_err_sensor to 2</p>
</li>
<li>
<p>Reflector board position in vehicle reference frame:
<em>pattern_detection_refl_board_pos_x</em>
<em>pattern_detection_refl_board_pos_y</em>
<em>pattern_detection_refl_board_pos_angle_deg</em></p>
</li>
</ul>
</li>
</ul>
<h2 id="actuator-control"><a class="header" href="#actuator-control">Actuator Control</a></h2>
<p>Navitrol supports binary actuator control during coupled driving.
Actuator control signals are sent through Leader AGV only and status signals are also expected from Leader AGV. Additionally, actuator control is supported only when formation is in LOAD state at load/unload points. There will be no actuator action during coupled AUTO driving.</p>
<p>Actuator control in coupled driving is disabled by default. It could be enabled by setting the parameter coupled_actuator_control to 1. Note that despite this parameter being set to 1, coupled actuator control will work only if actuator_type parameter is set to binary actuator control (value 3).</p>
<h2 id="external-localization-in-coupled-driving"><a class="header" href="#external-localization-in-coupled-driving">External Localization in Coupled Driving</a></h2>
<p>Basic concept of external localization remains the same in coupled drive system. There are no extra parameters either. In coupled drive, it is required that both AGVs have two PGV cameras installed. The cameras should be installed in machine coordinates to the X-axis or to the Y-axis passing navigation point. The cameras should be in the opposite
sides relative to navigation point (see &gt; Figure 6). External localization is active when at least 3 out of 4 PGVs can read measurements from the data matrix.</p>
<p>The AGVs must also be in the coupled configuration so that their navigation point lies on the coupled system's X-axis or Y-axis (see Figure 7). The heading of AGVs relative to the coupled system can be freely chosen as longs as the previous conditions hold. Coupled system can be driven longitudinally or transversally and it can follow one to four data matrix tapes depending on the configuration. The more data matrix tapes it must follow, the more burdensome is the teaching process of the lines into map. Define only one connection per data matrix tape in Navithor Tools. A few example configurations are shown in Figure 8.</p>
<p><img src="./media-en/image8.png" alt="" /></p>
<blockquote>
<p>Figure 6: Possible camera placements</p>
</blockquote>
<p><img src="./media-en/image9.png" alt="" /></p>
<blockquote>
<p>Figure 7: AGV positions on X-axis or Y-axis of coupled system</p>
</blockquote>
<p><img src="./media-en/image10.png" alt="" /></p>
<blockquote>
<p>Figure 8: Different possible configurations of AGVs in the coupled system. There can be one to four data matrix lines that the coupled system can follow.</p>
</blockquote>
<h2 id="obstacle-detection-and-obstacle-avoidance-during-coupled-driving"><a class="header" href="#obstacle-detection-and-obstacle-avoidance-during-coupled-driving">Obstacle detection and obstacle avoidance during Coupled driving</a></h2>
<p>If obstacle detection and obstacle avoidance features are enabled for a single AGV, they will be disabled for the duration of coupled driving.</p>
<h2 id="warnings-and-errors"><a class="header" href="#warnings-and-errors">Warnings and Errors</a></h2>
<p>In addition to normal position control warnings and errors, following are coupled driving specific errors.</p>
<table><thead><tr><th>Error</th><th>Description</th><th>Comments</th></tr></thead><tbody>
<tr><td>ERROR_COUPLED_DRIVE_COMMS</td><td>Communication error with one or more machines in coupled drive</td><td>Make sure that IPs and machine ids in coupling command are correct and AGVs are able to ping each other over configured network.</td></tr>
<tr><td>ERROR_NAVI_COMM_VERSION</td><td>Version mismatch in Navitrol-Navitrol communication</td><td>Check Navitrol versions on coupling machines and ensure that they are the same.</td></tr>
<tr><td>ERROR_COUPLED_DRIVE_CONFIG</td><td>Invalid configuration for coupled drive</td><td>Make machine types and load configurations are supported by Navitrol.</td></tr>
<tr><td>ERROR_LARGE_FORMATION_ERR</td><td>Formation error is larger than configured limits</td><td>If active at the time of coupling, ensure that AGVs are at correct positions and formation configuration is correct.<br>If recurring during driving, tune coupled control parameters.</td></tr>
<tr><td>ERROR_COUPLED_FORMATION_OFFSET_DETECTION</td><td>Coupled formation offset detection measurement failure</td><td>Formation error measurements not received by Navitrol. Check error sensor setup.</td></tr>
<tr><td>ERROR_COUPLED_DRIVE_ACTIVE_ERRORS</td><td>Errors are active on one or more machines in coupled drive</td><td>Resolve any active errors on coupled AGVs before coupled driving.</td></tr>
</tbody></table>
<h2 id="parameters"><a class="header" href="#parameters">Parameters</a></h2>
<p>Coupled drive related Navitrol parameters are listed in table below:</p>
<table><thead><tr><th>Name</th><th>Data Type</th><th>Default Value</th><th>Comments</th></tr></thead><tbody>
<tr><td><strong>Basic Configurations</strong></td><td></td><td></td><td></td></tr>
<tr><td>coupled_drive_enabled</td><td>Int</td><td>0: disabled</td><td>Enable/disable coupled driving feature</td></tr>
<tr><td>coupled_max_drive_v</td><td>Float</td><td>0.3 m/s</td><td>Maximum allowed driving velocity in coupled driving</td></tr>
<tr><td>coupled_actuator_control</td><td>Int</td><td>0: disabled</td><td>Enable/disable actuator control in coupled driving</td></tr>
<tr><td><strong>Formation Error Sensor configuration</strong></td><td></td><td></td><td></td></tr>
<tr><td>coupled_formation_err_sensor</td><td>UInt</td><td>0: Simulated from localization</td><td>Configures the type of sensor setup used for formation error measurements.<br><br>0: Simulated<br>1: Measurements from CAN/Supervisor interface<br>2: Pattern-detection based error calculation</td></tr>
<tr><td>coupled_formation_err_disable_route_property</td><td>String</td><td>FormationErrCtrlDisabled</td><td>Name of route property that can be used to disable coupled formation error on specific routes.</td></tr>
<tr><td>coupled_formation_offset_max_read_fail_count</td><td>Int</td><td>5</td><td></td></tr>
<tr><td><strong>CAN sensors for Formation Err</strong></td><td></td><td></td><td></td></tr>
<tr><td>coupled_formation_err_x_can_enc_idx</td><td>Int</td><td>-1</td><td></td></tr>
<tr><td>coupled_formation_err_h_can_enc_idx</td><td>Int</td><td>-1</td><td></td></tr>
<tr><td><strong>Reflector Pattern for Formation Err</strong></td><td></td><td></td><td></td></tr>
<tr><td>pattern_detection_refl_board_pos_x</td><td>Float</td><td>0.0 m</td><td>X position of reflector pattern in vehicle coordinate frame</td></tr>
<tr><td>pattern_detection_refl_board_pos_y</td><td>Float</td><td>0.0 m</td><td>Y position of reflector pattern in vehicle coordinate frame</td></tr>
<tr><td>pattern_detection_refl_board_angle_deg</td><td>Float</td><td>0.0 m</td><td>Angle of reflector pattern in vehicle coordinate frame</td></tr>
<tr><td><strong>Communication Parameters</strong></td><td></td><td></td><td></td></tr>
<tr><td>navicomm_inte_ip</td><td>String</td><td></td><td>IP for AGV-to-AGV communication -- empty bydefault.<br>Required only when AGV-to-AGV communication has a dedicated network and Navithor fleet control is in use.</td></tr>
<tr><td>navicomm_inte_port</td><td>Int</td><td>1236</td><td>Port used for AGV-to-AGV communication.<br>Must be identical on all AGVs in coupled driving</td></tr>
<tr><td>coupled_comm_status_update_interval_ms</td><td>Int</td><td>100 ms</td><td></td></tr>
<tr><td>coupled_comm_control_ref_timeout_ms</td><td>Int</td><td>200 ms</td><td></td></tr>
<tr><td>coupled_comm_loss_stop_time</td><td>Float</td><td>2.0 sec</td><td></td></tr>
<tr><td>coupled_comm_loss_fstop_timeout</td><td>Float</td><td>5.0 sec</td><td></td></tr>
<tr><td><strong>Formation Error Control Parameters</strong></td><td></td><td></td><td></td></tr>
<tr><td>coupled_pid_heading_err_p</td><td>Float</td><td>1.0</td><td>Proportional gain for heading error</td></tr>
<tr><td>coupled_pid_heading_err_i</td><td>Float</td><td>0.0</td><td>Integral gain for heading error</td></tr>
<tr><td>coupled_pid_lon_dist_err_p</td><td>Float</td><td>2.0</td><td>Proportional gain for distance error in the direction of motion</td></tr>
<tr><td>coupled_pid_lon_dist_err_i</td><td>Float</td><td>0.0</td><td>Integral gain for distance error in the direction of motion</td></tr>
<tr><td>coupled_pid_trans_dist_err_p</td><td>Float</td><td>2.0</td><td>Proportional gain for distance error perpendicular to direction of motion</td></tr>
<tr><td>coupled_pid_trans_dist_err_i</td><td>Float</td><td>0.0</td><td>Integral gain for distance error perpendicular to direction of motion</td></tr>
<tr><td>coupled_pid_delta_v_lim</td><td>Float</td><td>0.2 m/s</td><td>Maximum allowed change in velocity due to formation error compensation</td></tr>
<tr><td>coupled_pid_delta_c_lim</td><td>Float</td><td>0.3</td><td>Maximum allowed change in curvature due to formation error compensation</td></tr>
<tr><td><strong>Override Formation Error Control Parameters</strong></td><td></td><td></td><td></td></tr>
<tr><td>coupled_pid_override_lon_dist_err_cm</td><td>Float</td><td>0.0</td><td>Coupled drive longitudinal distance error controller will use override gains if error is below this distance</td></tr>
<tr><td>coupled_pid_override_trans_dist_err_cm</td><td>Float</td><td>0.0</td><td>Coupled drive transversal distance error controller will use override gains if error is below this distance</td></tr>
<tr><td>coupled_pid_override_head_err_deg</td><td>Float</td><td>0.0</td><td>Coupled drive heading error controller will use override gains if error is below this limit</td></tr>
<tr><td>coupled_pid_override_heading_err_p</td><td>Float</td><td>0.0</td><td>Coupled drive controller gain for heading error control in override control region</td></tr>
<tr><td>coupled_pid_override_lon_dist_err_p</td><td>Float</td><td>0.0</td><td>Coupled drive controller gain for longitudinal distance error control in override control region</td></tr>
<tr><td>coupled_pid_override_trans_dist_err_p</td><td>Float</td><td>0.0</td><td>Coupled drive controller gain for transversal distance error control in override control region</td></tr>
<tr><td><strong>Formation Error Diagnostics Parameters</strong></td><td></td><td></td><td></td></tr>
<tr><td>coupled_max_dist_err_cm</td><td>Float</td><td>3.0 cm</td><td>An error will be raised if error between nominal and current AGV position exceeds this limit</td></tr>
<tr><td>coupled_max_head_err_deg</td><td>Float</td><td>2.0 degree</td><td>An error will be raised if error between nominal and current AGV heading exceeds this limit</td></tr>
</tbody></table>
<h2 id="quick-start-guide"><a class="header" href="#quick-start-guide">Quick Start Guide</a></h2>
<p>Please ensure system requirements listed in Section <em>System Requirements</em> before starting this guide. Follow the steps below to start coupled driving.</p>
<ol>
<li>
<p>Enable coupled driving on each AGV
Copy the parameter below in params.txt file
<strong>I,coupled_drive_enabled, 1</strong>
Note that this requires feature license for coupled driving.</p>
</li>
<li>
<p>Check Formation Error Sensor Settings
For preliminary testing, localization-based simulation of sensor setup can be used with following parameter:
<strong>U,coupled_formation_err_sensor, 0</strong>
Refer to Section <em>Formation Error Sensor Setup</em> for correct configuration according to formation error sensors present on AGVs.</p>
</li>
<li>
<p>Drive AGVs to coupling start position
Drive individual AGVs to coupled driving start positions on the map.
Start positions must correspond to desired coupling formation configuration as specified in Section <em>Coupling Formation Configuration</em>.</p>
</li>
<li>
<p>Command AGVs to COUPLED state
AGVs can be commanded to coupled state from Navithor or Supervisor interface. Navitrol state will change to COUPLED if coupling command was successful.</p>
</li>
<li>
<p>Ensure that machines are coupled and no errors are active
COUPLED state indicates that an individual AGV is in coupled driving mode; however, it may not be connected to formation yet. Leader AGV will load coupled driving segment file when switched to COUPLED state.
<strong>ERROR_COUPLED_DRIVE_COMMS</strong> remains active until communication is established between the AGVs. If communication error is active after all AGVs has been switched to COUPLED state, it may indicate an error in IP configurations or communication network.
Before starting coupled driving, ensure that no errors are active on any AGV in formation. Formation state can be monitored through Leader AGV (from Monitor, Supervisor or Navithor). Formation must be in STANDBY state for auto driving.</p>
</li>
<li>
<p>Drive Order
Once coupling has been successful and there are no active errors, drive orders can be sent to Leader AGV the same way as sent to a single AGV. This can be done through Monitor, Navithor or Supervisor interface.</p>
</li>
<li>
<p>Tune formation error controllers
When configuring the feature for first time, it is essential to monitor formation errors and calibrate error control parameters accordingly for acceptable machine response. List of controller parameters can be found in Section <em>Parameters</em>.</p>
</li>
<li>
<p>Adjust Coupled Driving Configuration
A list of settings for coupled driving including maximum allowed formation errors, max drive velocity, actuator control etc. can be configured through parameters. All coupled driving parameters are listed in Section <em>Parameters</em>.</p>
</li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="../../PositionControl/StartOffsetSlowdown/StartOffsetSlowdown-en.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="../../PositionControl/MagneticLineFollowing/MagneticLineFollowing-en.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="../../PositionControl/StartOffsetSlowdown/StartOffsetSlowdown-en.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="../../PositionControl/MagneticLineFollowing/MagneticLineFollowing-en.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
