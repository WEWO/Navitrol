<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Magnetic line following - NAVITROL USER INSTRUCTIONS - Navitec Systems Oy CONFIDENTIAL</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="../../favicon.svg">
                        <link rel="shortcut icon" href="../../favicon.png">
                <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
                <link rel="stylesheet" href="../../css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="../../fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
                <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../MdBook/MdbookFrontPage.html">Front page</a></li><li class="chapter-item expanded affix "><li class="part-title">Introduction</li><li class="chapter-item expanded "><a href="../../Introduction/NavitrolUserInstructions/NavitrolUserInstructions-en.html"><strong aria-hidden="true">1.</strong> Navitrol user instructions</a></li><li class="chapter-item expanded "><a href="../../Introduction/Licensing/Licensing-en.html"><strong aria-hidden="true">2.</strong> Licensing</a></li><li class="chapter-item expanded "><a href="../../Introduction/OdometrySource/OdometrySource-en.html"><strong aria-hidden="true">3.</strong> Odometry source</a></li><li class="chapter-item expanded "><a href="../../Introduction/InitialCalibrationGuide/InitialCalibrationGuide-en.html"><strong aria-hidden="true">4.</strong> Initial calibration guide</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/ParameterReconfiguration/ParameterReconfiguration-en.html"><strong aria-hidden="true">5.</strong> Parameter reconfiguration</a></li><li class="chapter-item expanded "><a href="../../Introduction/Parameters/Parameters.html"><strong aria-hidden="true">6.</strong> Parameter listing</a></li><li class="chapter-item expanded "><a href="../../Introduction/Parameters/JsonConfigurationFile-en.html"><strong aria-hidden="true">7.</strong> JSON configuration file</a></li><li class="chapter-item expanded "><a href="../../Introduction/TeachingInstructions/TeachingInstructions-en.html"><strong aria-hidden="true">8.</strong> Teaching instructions</a></li><li class="chapter-item expanded "><a href="../../Introduction/FeatureMatrix/FeatureMatrix-en.html"><strong aria-hidden="true">9.</strong> Feature Matrix</a></li><li class="chapter-item expanded affix "><li class="part-title">Device interfaces</li><li class="chapter-item expanded "><a href="../../AgvInterfaces/SupportedDevices/SupportedDevices-en.html"><strong aria-hidden="true">10.</strong> Supported devices</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/GenericInterfaces/GenericInterfacesHeading.html"><strong aria-hidden="true">11.</strong> Generic interfaces</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../AgvInterfaces/GenericInterfaces/EthernetSupervisorInterface/EthernetSupervisorInterface-en.html"><strong aria-hidden="true">11.1.</strong> Ethernet Supervisor</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/GenericInterfaces/CanCommunication/CanCommunication-en.html"><strong aria-hidden="true">11.2.</strong> CAN communication</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../AgvInterfaces/GenericInterfaces/CanSupervisorInterface/CanSupervisorInterface-en.html"><strong aria-hidden="true">11.2.1.</strong> CAN Supervisor</a></li></ol></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/GenericInterfaces/EthercatCommunication/EthercatCommunication-en.html"><strong aria-hidden="true">11.3.</strong> EtherCAT Communication</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/GenericInterfaces/Simove/SimoveInterface-en.html"><strong aria-hidden="true">11.4.</strong> SIMOVE</a></li></ol></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/MotorControllersHeading.html"><strong aria-hidden="true">12.</strong> Motor controllers</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/MotorControllersCommon/MotorControllersCommon-en.html"><strong aria-hidden="true">12.1.</strong> Motor controller common</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Schwarzmueller/SchwarzmuellerSetupInstructions/SchwarzmuellerSetupInstructions-en.html"><strong aria-hidden="true">12.2.</strong> Schwarzmueller setup</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Schwarzmueller/SchwarzmuellerParameterSetupInstructions/SchwarzmuellerParameterSetupInstructions-en.html"><strong aria-hidden="true">12.2.1.</strong> Schwarzmueller parameters</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Schwarzmueller/SchwarzmuellerTroubleshooting/SchwarzmuellerTroubleshooting-en.html"><strong aria-hidden="true">12.2.2.</strong> Schwarzmueller troubleshooting</a></li></ol></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Curtis/CurtisMotorController-en.html"><strong aria-hidden="true">12.3.</strong> Curtis</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Engel/EngelMotorController-en.html"><strong aria-hidden="true">12.4.</strong> Engel</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Kinco/KincoMotorController-en.html"><strong aria-hidden="true">12.5.</strong> Kinco</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Nanotec/NanotecMotorController-en.html"><strong aria-hidden="true">12.6.</strong> Nanotec</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Oriental/OrientalMotorController-en.html"><strong aria-hidden="true">12.7.</strong> Oriental</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Synapticon/SynapticonMotorController-en.html"><strong aria-hidden="true">12.8.</strong> Synapticon</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Roboteq/RoboteqOpenLoopControllerConfiguration-en.html"><strong aria-hidden="true">12.9.</strong> Roboteq Open loop</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/Roboteq/RoboteqClosedLoopControllerConfiguration-en.html"><strong aria-hidden="true">12.10.</strong> Roboteq Closed loop</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/MotorControllers/MiControl/MiControlMotorController-en.html"><strong aria-hidden="true">12.11.</strong> MiControl</a></li></ol></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/ScannerConfigurations/ScannerHeading.html"><strong aria-hidden="true">13.</strong> Laser scanners</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../AgvInterfaces/ScannerConfigurations/ScannerConfigurations-en.html"><strong aria-hidden="true">13.1.</strong> Scanner configurations</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/ScannerCommunicationTroubleshoot/ScannerCommunicationTroubleshoot-en.html"><strong aria-hidden="true">13.2.</strong> Scanner communication troubleshooting</a></li></ol></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/OpticalCodeReader/OpticalCodeReader.html"><strong aria-hidden="true">14.</strong> Optical code reader</a></li><li class="chapter-item expanded "><a href="../../AgvInterfaces/Encoders/EncoderHeading.html"><strong aria-hidden="true">15.</strong> Encoders</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../AgvInterfaces/Encoders/EthercatEncoders/EthercatEncoders-en.html"><strong aria-hidden="true">15.1.</strong> EtherCAT encoders</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">User interfaces</li><li class="chapter-item expanded "><a href="../../CustomerUis/NavitrolMonitor/NavitrolMonitor-en.html"><strong aria-hidden="true">16.</strong> Navitrol Monitor</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../CustomerUis/NavitrolMonitor3rdPartyLicenses/NavitrolMonitor3rdPartyLicenses-en.html"><strong aria-hidden="true">16.1.</strong> Navitrol Monitor third party licenses</a></li></ol></li><li class="chapter-item expanded "><a href="../../CustomerUis/WebInterface/WebInterface-en.html"><strong aria-hidden="true">17.</strong> Navitrol web interface</a></li><li class="chapter-item expanded "><a href="../../CustomerUis/Parameter Tool/ParameterTool-en.html"><strong aria-hidden="true">18.</strong> Parameter Tool Beta</a></li><li class="chapter-item expanded affix "><li class="part-title">Localization</li><li class="chapter-item expanded "><a href="../../Localization/PositionConfidence/PositionConfidence-en.html"><strong aria-hidden="true">19.</strong> Position confidence</a></li><li class="chapter-item expanded "><a href="../../Localization/ScannerCalibration/ScannerCalibration-en.html"><strong aria-hidden="true">20.</strong> Scanner calibration</a></li><li class="chapter-item expanded "><a href="../../Localization/EnvironmentGuidelines/EnvironmentGuidelines-en.html"><strong aria-hidden="true">21.</strong> Environment guidelines</a></li><li class="chapter-item expanded "><a href="../../Localization/AutomaticOdometryCorrection/AutomaticOdometryCorrection-en.html"><strong aria-hidden="true">22.</strong> Automatic odometry correction</a></li><li class="chapter-item expanded "><a href="../../Localization/ReflectorBasedPositionInitialization/ReflectorBasedPositionInitialization-en.html"><strong aria-hidden="true">23.</strong> Reflector based position initialization</a></li><li class="chapter-item expanded "><a href="../../Localization/PrecisionPositioning/PrecisionPositioning-en.html"><strong aria-hidden="true">24.</strong> Precision positioning</a></li><li class="chapter-item expanded "><a href="../../Localization/LocalizationScannerChangeOnTheFly/LocalizationScannerChangeOnTheFly-en.html"><strong aria-hidden="true">25.</strong> Changing scanner on the fly</a></li><li class="chapter-item expanded "><a href="../../Localization/RampZones/RampZones-en.html"><strong aria-hidden="true">26.</strong> Ramp zones</a></li><li class="chapter-item expanded "><a href="../../Localization/GpsPositioning/GpsPositioning-en.html"><strong aria-hidden="true">27.</strong> GPS Positioning</a></li><li class="chapter-item expanded "><a href="../../Localization/ImuAndSensorFusion/ImuAndSensorFusion-en.html"><strong aria-hidden="true">28.</strong> IMU and sensor fusion</a></li><li class="chapter-item expanded "><a href="../../Localization/ExternalLocalization/ExternalLocalization-en.html"><strong aria-hidden="true">29.</strong> External localization</a></li><li class="chapter-item expanded "><a href="../../Localization/DynamicMapping/DynamicMappingServer/DynamicMappingServer-en.html"><strong aria-hidden="true">30.</strong> Dynamic mapping server</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Localization/DynamicMapping/DynamicMappingServerAndClientCompatibility/DynamicMappingServerAndClientCompatibility-en.html"><strong aria-hidden="true">30.1.</strong> Dynamic mapping client/server compatibility</a></li><li class="chapter-item expanded "><a href="../../Localization/DynamicMapping/DynamicMappingServerHardwareRequirements/DynamicMappingServerHardwareRequirements.html"><strong aria-hidden="true">30.2.</strong> Dynamic mapping client/server hardware requirements</a></li></ol></li><li class="chapter-item expanded "><a href="../../Localization/WheelSlipping/WheelSlipping-en.html"><strong aria-hidden="true">31.</strong> Wheel slipping diagnostic</a></li><li class="chapter-item expanded "><a href="../../Localization/3dPositioning/3dPositioning-en.html"><strong aria-hidden="true">32.</strong> 3D positioning</a></li><li class="chapter-item expanded affix "><li class="part-title">Position control</li><li class="chapter-item expanded "><a href="../../PositionControl/StartOffsetSlowdown/StartOffsetSlowdown-en.html"><strong aria-hidden="true">33.</strong> Start offset slowdown</a></li><li class="chapter-item expanded "><a href="../../PositionControl/CoupledDriving/CoupledDrivingFeature-en.html"><strong aria-hidden="true">34.</strong> Coupled driving</a></li><li class="chapter-item expanded "><a href="../../PositionControl/MagneticLineFollowing/MagneticLineFollowing-en.html" class="active"><strong aria-hidden="true">35.</strong> Magnetic line following</a></li><li class="chapter-item expanded "><a href="../../PositionControl/TrailerTransport/TrailerTransport-en.html"><strong aria-hidden="true">36.</strong> Trailer transport</a></li><li class="chapter-item expanded "><a href="../../PositionControl/BarrierStop/BarrierStop-en.html"><strong aria-hidden="true">37.</strong> Barrier stop</a></li><li class="chapter-item expanded "><a href="../../PositionControl/DataMatrixDocking/DataMatrixDockingDMC-en.html"><strong aria-hidden="true">38.</strong> Data Matrix Code Docking V2</a></li><li class="chapter-item expanded "><a href="../../PositionControl/Docking/Docking-en.html"><strong aria-hidden="true">39.</strong> Docking</a></li><li class="chapter-item expanded affix "><li class="part-title">Drive control</li><li class="chapter-item expanded "><a href="../../DriveControl/DrivingOptions/DrivingOptions-en.html"><strong aria-hidden="true">40.</strong> Driving options</a></li><li class="chapter-item expanded "><a href="../../DriveControl/Standalone/Standalone-en.html"><strong aria-hidden="true">41.</strong> Standalone</a></li><li class="chapter-item expanded "><a href="../../DriveControl/StopAndHold/StopAndHold-en.html"><strong aria-hidden="true">42.</strong> Stop-and-hold</a></li><li class="chapter-item expanded "><a href="../../DriveControl/VDA5050/VDA5050-en.html"><strong aria-hidden="true">43.</strong> VDA 5050</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../DriveControl/VDA5050/VDA5050FeatureMatrix-en.html"><strong aria-hidden="true">43.1.</strong> VDA 5050 Support status</a></li></ol></li><li class="chapter-item expanded "><a href="../../DriveControl/ReturnToRoute/ReturnToRoute-en.html"><strong aria-hidden="true">44.</strong> Return to route</a></li><li class="chapter-item expanded "><a href="../../DriveControl/ObstacleAvoidance/ObstacleAvoidance-en.html"><strong aria-hidden="true">45.</strong> Obstacle avoidance</a></li><li class="chapter-item expanded "><a href="../../DriveControl/ObstacleAvoidanceV2/ObstacleAvoidanceV2-en.html"><strong aria-hidden="true">46.</strong> Obstacle avoidance V2</a></li><li class="chapter-item expanded "><a href="../../DriveControl/ContainerDriving/ContainerDriving-en.html"><strong aria-hidden="true">47.</strong> Container driving</a></li><li class="chapter-item expanded "><a href="../../DriveControl/RecordAndPlay/RecordAndPlay-en.html"><strong aria-hidden="true">48.</strong> Record and Play</a></li><li class="chapter-item expanded "><a href="../../DriveControl/RouteFreeNavigation/RouteFreeNavigation-en.html"><strong aria-hidden="true">49.</strong> Route free navigation</a></li><li class="chapter-item expanded affix "><li class="part-title">Kinematics</li><li class="chapter-item expanded "><a href="../../Kinematics/OmniSteerLimit/OmniSteerLimit-en.html"><strong aria-hidden="true">50.</strong> Omni steer limit</a></li><li class="chapter-item expanded "><a href="../../Kinematics/OneDriveWheelOmni/OneDriveWheelOmni-en.html"><strong aria-hidden="true">51.</strong> Omni one drive wheel</a></li><li class="chapter-item expanded affix "><li class="part-title">Pickup and drop-off</li><li class="chapter-item expanded "><a href="../../LoadHandling/ActuatorControl/ActuatorControl-en.html"><strong aria-hidden="true">52.</strong> Actuator control</a></li><li class="chapter-item expanded "><a href="../../LoadHandling/ScannerLiftActuator/ScannerLiftActuator-en.html"><strong aria-hidden="true">53.</strong> Scanner lift actuator</a></li><li class="chapter-item expanded "><a href="../../LoadHandling/Racking/Racking-en.html"><strong aria-hidden="true">54.</strong> Racking</a></li><li class="chapter-item expanded "><a href="../../LoadHandling/BufferLanes/BufferLanes-en.html"><strong aria-hidden="true">55.</strong> Buffer lanes</a></li><li class="chapter-item expanded "><a href="../../LoadHandling/StackLoading/StackLoading-en.html"><strong aria-hidden="true">56.</strong> Loading from a stack</a></li><li class="chapter-item expanded "><a href="../../LoadHandling/BlockStacking/BlockStacking-en.html"><strong aria-hidden="true">57.</strong> Unloading to a stack</a></li><li class="chapter-item expanded "><a href="../../LoadHandling/DistanceToTarget/DistanceToTarget-en.html"><strong aria-hidden="true">58.</strong> Distance to target estimation</a></li><li class="chapter-item expanded affix "><li class="part-title">Target and obstacle detection</li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/PalletDetection/PalletDetection-en.html"><strong aria-hidden="true">59.</strong> Pallet detection</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/3dTargetDetection/3dTargetDetection-en.html"><strong aria-hidden="true">60.</strong> 3D Target detection</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/PatternDetection/PatternDetection-en.html"><strong aria-hidden="true">61.</strong> Pattern detection</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/ObstacleDetection/ObstacleDetection-en.html"><strong aria-hidden="true">62.</strong> Obstacle detection</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/ExternalTargetDetection/ExternalTargetDetection-en.html"><strong aria-hidden="true">63.</strong> External target detection</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/TableDetection/TableDetection-en.html"><strong aria-hidden="true">64.</strong> Table detection</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/Wallmonitoring/Wallmonitoring-en.html"><strong aria-hidden="true">65.</strong> Wall monitoring</a></li><li class="chapter-item expanded "><a href="../../TargetAndObstacleDetection/OccupancyCheck/OccupancyCheck-en.html"><strong aria-hidden="true">66.</strong> Occupancy check</a></li><li class="chapter-item expanded affix "><li class="part-title">Miscellaneous</li><li class="chapter-item expanded "><a href="../../Miscellaneous/ErrorDescriptions/ErrorDescriptions-en.html"><strong aria-hidden="true">67.</strong> Error descriptions</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/Logging/Logging-en.html"><strong aria-hidden="true">68.</strong> Logging</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/LinuxImageInstallation/LinuxImagesHeading.html"><strong aria-hidden="true">69.</strong> Linux image installation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Miscellaneous/LinuxImageInstallation/CanDrivers/CanDrivers-en.html"><strong aria-hidden="true">69.1.</strong> CAN drivers</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/LinuxImageInstallation/Clonezilla/ClonezillaInstallation-en.html"><strong aria-hidden="true">69.2.</strong> Clonezilla</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/LinuxImageInstallation/DebianBuster/DebianBusterInstallation-en.html"><strong aria-hidden="true">69.3.</strong> Debian Buster</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/LinuxImageInstallation/DebianBullseye/DebianBullseyeInstallation-en.html"><strong aria-hidden="true">69.4.</strong> Debian Bullseye</a></li></ol></li><li class="chapter-item expanded "><a href="../../Miscellaneous/ParameterZones/ParameterZones-en.html"><strong aria-hidden="true">70.</strong> Parameter zones</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/Reflectors/Reflectors-en.html"><strong aria-hidden="true">71.</strong> Reflectors</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/SslCertificates/SslCertificates-en.html"><strong aria-hidden="true">72.</strong> SSL Certificate configuration</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/BatteryOvertemperatureActions/BatteryOvertemperatureActions.html"><strong aria-hidden="true">73.</strong> Battery overtemperature actions</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/Charging/Charging-en.html"><strong aria-hidden="true">74.</strong> Charging and battery management</a></li><li class="chapter-item expanded "><a href="../../Miscellaneous/HardwareRequirements/HardwareRequirements-en.html"><strong aria-hidden="true">75.</strong> Hardware requirements</a></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="dark">Dark</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">NAVITROL USER INSTRUCTIONS - Navitec Systems Oy CONFIDENTIAL</h1>

                    <div class="right-buttons">
                                                <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="line-following-with-a-magnetic-tape-sensor"><a class="header" href="#line-following-with-a-magnetic-tape-sensor">Line following with a magnetic tape sensor</a></h1>
<p>Updated 26.01.2024</p>
<hr />
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<h3 id="introduction"><a class="header" href="#introduction">Introduction</a></h3>
<p>The feature is used for following a magnetic tape, allowing for more precise docking and position control. It is used for position control, but not for localization. For localization and position control or for accurate stopping when docking, the data matrix feature is required. The sensor provides a lateral error and is of use when the route segment requires high lateral accuracy. The AGV drives with laser scanner localization until the tape is detected. Then it disables the horizontal laser scanner corrections and uses the magnetic line instead until the drive is finished or the magnetic tape is no longer detected. The AGV follows the magnetic tape when present and the feature is enabled for the route segment and therefore limits the versatility of the AGV.</p>
<h3 id="requirements"><a class="header" href="#requirements">Requirements</a></h3>
<ul>
<li>SICK MLS magnetic tape sensor</li>
<li>External localization license</li>
<li>Web UI for teaching</li>
<li>Magnetic tape. See SICK MLS manual for more information</li>
</ul>
<h3 id="limitations"><a class="header" href="#limitations">Limitations</a></h3>
<ul>
<li>Not supported in curved routes and intersections</li>
<li>Teaching of line points only with Web UI</li>
</ul>
<h2 id="setup"><a class="header" href="#setup">Setup</a></h2>
<h3 id="quick-start"><a class="header" href="#quick-start">Quick start</a></h3>
<p>The sensor measures the offset to the sensor's geometrical center point in millimeters. A measurement is obtained if a magnetic tape is detected, and its track level (induction) is above a certain threshold. The sensor has two LEDs, when the magnetic tape is detected with sufficient field strength the first LED is yellow and the second one is green or blue. The light of the second LED depends on which side of the sensor's centre point the magnetic line is detected. Avoid initializing the sensor on magnetic tape, as this might result in non-deterministic measurements. Powering off the device can fix the issue. See Sick MLS manual for more information.</p>
<p>The AGV will minimize its the error with respect to the magnetic tape, and follow the magnetic tape instead of the route if the two diverge. During docking with magnetic line following, a magnetic tape equaling a distance of at least <strong>line_following_sensor_pos_x[0]</strong> or <strong>line_following_sensor_pos_x[1]</strong>, depending on which sensor is first to detect the magnetic tape, is assumed after the last trajectory point. </p>
<p>The nominal sensor position is determined by parameters <strong>line_following_sensor_pos_x</strong> and <strong>line_following_sensor_pos_y</strong> with respect to the AGV's navigation point for each sensor. Negative measurements are obtained from the centre towards the cable outlet. </p>
<p>In the below Figure <strong>line_following_sensor_flipped[0]</strong> is 0 and <strong>line_following_sensor_flipped[1]</strong> would be 1.  The navigation point is represented as a black circle and the nominal sensor position line as a dashed orange line in the below Figure. The y-deviation with respect to the nominal sensor position (dashed orange line) is defined by parameter <strong>line_following_sensor_offset_y</strong> for each sensor, visualized as offset1 y in the Figure</p>
<p><img src="./media-en/sensor_pos.png" alt="" />
&gt;&gt; Line following sensor positions</p>
<table><thead><tr><th>Name</th><th>Type</th><th>Default value</th><th>Description</th></tr></thead><tbody>
<tr><td>line_following_sensor_communication</td><td>Int</td><td>0</td><td>0 - disabled, 1 - CAN, 2 - Ethernet</td></tr>
<tr><td>line_following_sensor_model[]</td><td>Int</td><td>0</td><td>0 - disabled, 1 - Sick MLS</td></tr>
<tr><td>line_following_sensor_pos_x[]</td><td>Float</td><td>0.0</td><td>The sensor X-position with respect to navigation point. See above Figure for reference</td></tr>
<tr><td>line_following_sensor_pos_y[]</td><td>Float</td><td>0.0</td><td>The sensor Y-position with respect to navigation point. See above Figure for reference</td></tr>
<tr><td>line_following_sensor_offset_y[]</td><td>Float</td><td>0.0</td><td>The y deviation from the nominal sensor position. See above Figure for reference</td></tr>
<tr><td>line_following_sensor_flipped[]</td><td>Int</td><td>0</td><td>A flipped sensor will give wrong signs for the measurements, to transform the measurements to machine coordinate frame, parameter <strong>line_following_sensor_flipped</strong> is introduced. See above Figure for reference</td></tr>
<tr><td>line_following_max_dist_since_last_meas</td><td>Float</td><td>0.1</td><td>Maximum allowed driven distance between two measurements before error</td></tr>
</tbody></table>
<h4 id="teaching-the-magnetic-line"><a class="header" href="#teaching-the-magnetic-line">Teaching the magnetic line</a></h4>
<p>The principle of teaching the magnetic line is the same as for teaching external localization tape. The basis of saving teach points, can be time, distance or user input. The parameters introduced below are for saving on a distance basis. For more information on the parameters and the procedure, see document <a href="../../Localization/ExternalLocalization/ExternalLocalization-en.html">External localization</a></p>
<p>Teaching is done via web UI. Drive the AGV along the magnetic tape with the feature enabled and the parameters set. The below parameters are for teaching the magnetic line points based on distance.</p>
<table><thead><tr><th>Name</th><th>Type</th><th>Required value</th><th>Description</th></tr></thead><tbody>
<tr><td>teach_file_format</td><td>Int</td><td>5</td><td>Required for teaching magnetic tapes. See external localization document for more information</td></tr>
<tr><td>ext_loc_teach_mode</td><td>Int</td><td>3</td><td>Distance based teaching of points. See external localization document for more information</td></tr>
<tr><td>ext_loc_teach_interval_dist</td><td>Float</td><td>0.1</td><td>Distance between teach points. See external localization document for more information</td></tr>
</tbody></table>
<p>Add the teach file into Tools. Under Routes → Route properties, select 'MagneticLineFollowing' as visualized in the Figure below.</p>
<p><img src="./media-en/teach_file_tools.PNG" alt="" />
&gt;&gt; Teach points in Tools</p>
<h4 id="can-setup"><a class="header" href="#can-setup">CAN setup</a></h4>
<p>The baud-rate and node-id must be modified for allowing CAN communication with Navitrol. The default node-id for the sensor is 10, in decimal, and the default baud rate is 125k. Changing the default node id and baudrate can be done via e.g. CANKing. Set the device to pre-operational state with the following instructions in the below Figure</p>
<p><img src="./media-en/can_setup.png" alt="" />
&gt;&gt; Setup of node-id and baudrate in CANKing</p>
<p>Send the following commands to the device to change node-id and baudrate. Baudrate 250 Bd corresponds to 03. Restart the device after saving the new parameters. The below table is described in hexadecimal.</p>
<p><strong>Setting node-id and baudrate via CAN</strong></p>
<table><thead><tr><th>CAN identifier</th><th>Byte 0</th><th>Byte 1</th><th>Byte 2</th></tr></thead><tbody>
<tr><td>7E5</td><td>04</td><td>01</td><td>00</td></tr>
<tr><td>7E5</td><td>5E</td><td>00</td><td>00</td></tr>
<tr><td>7E5</td><td>11</td><td>NodeId</td><td>00</td></tr>
<tr><td>7E5</td><td>13</td><td>00</td><td>Baudrate</td></tr>
<tr><td>7E5</td><td>17</td><td>00</td><td>00</td></tr>
<tr><td>7E5</td><td>04</td><td>00</td><td>00</td></tr>
</tbody></table>
<p>See Sick MLS manual for more information regarding Sick MLS specific parameters.</p>
<h4 id="ethernet-protocol"><a class="header" href="#ethernet-protocol">Ethernet protocol</a></h4>
<p>The message structure for each sensor is the same, only the port differs for the ethernet communication. The endianness can be configured by parameter, <strong>line_following_swap_bytes</strong>.</p>
<p>The message protocol is a direct copy of the CAN message PDO1 and is sent to Navitrol in UDP format, separately for each sensor.
The IPC will act as a server and the default port is 5333, but can be changed via parameter <strong>line_following_sensor_eth_port</strong>.</p>
<p><strong>Ethernet UDP message</strong></p>
<table><thead><tr><th>Data field</th><th>Type</th><th>Length (bytes)</th><th>Comment</th></tr></thead><tbody>
<tr><td>Sending count</td><td>Uint_16</td><td>2</td><td>Incremented for each message, to verify if the received message is valid</td></tr>
<tr><td>LCP1</td><td>Int_16</td><td>2</td><td>Position of Line Center Point 1 [mm]</td></tr>
<tr><td>LCP2</td><td>Int_16</td><td>2</td><td>Position of Line Center Point 2 [mm]</td></tr>
<tr><td>LCP3</td><td>Int_16</td><td>2</td><td>Position of Line Center Point 3  [mm]</td></tr>
<tr><td>Line info</td><td>Uint_8</td><td>1</td><td><strong>Bits0...2</strong>:<br>0 - No track found<br>2 - One track found<br>3 - Two tracks found: Left diverter<br>6 - Two tracks found: Right diverter<br>7 - Three tracks found or 90° intersection<br></td></tr>
<tr><td>Status</td><td>Uint_8</td><td>1</td><td><strong>Bits0...3</strong><br>7 - Field level 4500-2000<br>6 - Field level 1750<br>5 - Field level 1500<br>4 - Field level 1250<br>3 - Field level 1000<br>2 - Field level 750<br>1 - Field level 500<br>0 - Field level 450<br>0 - Field level 350<br></td></tr>
</tbody></table>
<p>In case of one magnetic line present, the measurement reading will be read from LCP2</p>
<h3 id="parameters"><a class="header" href="#parameters">Parameters</a></h3>
<h4 id="can-parameters"><a class="header" href="#can-parameters">CAN parameters</a></h4>
<table><thead><tr><th>Name</th><th>Type</th><th>Recommended value</th><th>Description</th></tr></thead><tbody>
<tr><td>line_following_sensor_nodeid[]</td><td>Int</td><td>10</td><td>CAN node id (decimal)</td></tr>
<tr><td>can_sick_mls_event_timer_ms</td><td>Int</td><td>10</td><td>Time between two transmissions. See MLS document</td></tr>
<tr><td>can_sick_mls_calibrate_offset[]</td><td>Int</td><td>0</td><td>Trigger offset calibration. See MLS document</td></tr>
<tr><td>can_sick_mls_factory_reset[]</td><td>Int</td><td>0</td><td>Factory reset the sensor. See MLS document</td></tr>
</tbody></table>
<p>For more information about the <strong>can_sick_mls</strong> parameters see the SICK MLS manual.</p>
<h4 id="ethernet-parameters"><a class="header" href="#ethernet-parameters">Ethernet parameters</a></h4>
<table><thead><tr><th>Name</th><th>Type</th><th>Recommended value</th><th>Description</th></tr></thead><tbody>
<tr><td>line_following_sensor_eth_port[]</td><td>Int</td><td>5333</td><td>Port of the device</td></tr>
<tr><td>line_following_swap_bytes</td><td>Int</td><td>0</td><td>Swap bytes in line following ethernet interface. 0 = Little endian, 1 = Big endian</td></tr>
</tbody></table>
<h2 id="how-to-use"><a class="header" href="#how-to-use">How to use</a></h2>
<p>The line following is active when the sensor in the direction of motion, as seen from the navigation point, detects the tape and when the driven route has line following tag. If these conditions are met Navitrol Monitor will print <em>Line following active</em> in the top left corner while in AUTO state.</p>
<p><img src="./media-en/line_following_active.PNG" alt="" />
&gt;&gt; Line following active in Monitor</p>
<h2 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h2>
<h3 id="errors-and-warnings"><a class="header" href="#errors-and-warnings">Errors and warnings</a></h3>
<h4 id="225---error_no_data_from_line_following_sensor"><a class="header" href="#225---error_no_data_from_line_following_sensor">225 - ERROR_NO_DATA_FROM_LINE_FOLLOWING_SENSOR</a></h4>
<p>No valid data received for ethernet procotol. Verify that the received data is valid by setting parameter <strong>log_veh_inte_eth</strong> to 4. Setting the parameter allows to see the received raw data in the log with prefix <em>SICK_MLS_ERROR byte</em>. Reset after received valid data. </p>
<h4 id="226---error_msg_parse_line_following_sensor"><a class="header" href="#226---error_msg_parse_line_following_sensor">226 - ERROR_MSG_PARSE_LINE_FOLLOWING_SENSOR</a></h4>
<p>The error is triggered for the Ethernet protocol if the sending counter is invalid or error parsing the measurement data, and for CAN if there is an error parsing the measurement data. Verify that the sent data is valid and there is connection to the device, and that the sending counter, if using Ethernet, is valid from <em>SICK MLS ethernet - current sending counter</em>. Error is reset after received valid data.</p>
<h4 id="227---error_line_following_no_measurement"><a class="header" href="#227---error_line_following_no_measurement">227 - ERROR_LINE_FOLLOWING_NO_MEASUREMENT</a></h4>
<p>The AGV has driven a distance of <strong>line_following_max_dist_since_last_meas</strong> since last measurement on a route with magnetic line following tag. <em>Line following active</em> will be visualized in Navitrol Monitor if measurements are received on the magnetic tape. In case there are 2 sensors an error is triggered if the second sensor to detect the tape does not detect the tape after driving a distance equaling the sum of <strong>line_following_sensor_pos_x[0]</strong>, <strong>line_following_sensor_pos_x[1]</strong> and <strong>line_following_max_dist_since_last_meas</strong> after the first sensor has reached the line following route tag start point. The error is reset by driving manually or by setting parameter <strong>line_following_sensor_communication</strong> to 0.</p>
<h3 id="advanced-troubleshooting"><a class="header" href="#advanced-troubleshooting">Advanced troubleshooting</a></h3>
<p>The parsed data for ethernet and CAN is logged as follows:<br />
<em>SICK MLS - LCP1, LCP2 (raw), LCP2, LCP3, LCP status, Measurement status, Track status</em>,<br />
where LCP1-3 is the sensor reading in millimeter, LCP status is the line info (how many tracks are detected), measurement status is a Boolean describing if the track is detected and track status is the induction level of the track (range 0 to 7). LCP is logged twice, the raw data and the potentially flipped data.</p>
<h4 id="line-following-is-not-active-although-the-sensor-is-on-the-magnetic-tape"><a class="header" href="#line-following-is-not-active-although-the-sensor-is-on-the-magnetic-tape">Line following is not active although the sensor is on the magnetic tape</a></h4>
<p>Under the assumption that the trajectory has magnetic line following tag, that the curvature of the trajectory is negligible and the AGV is not currently pivoting, the root cause is invalid sensor measurements. A measurement (LCP) of 0 is valid and can mean it is in the center of the sensor, or that no measurement was received. To differentiate between these, see output of Measurement status and/or Track status, with the above mentioned log line. The measurement status and/or track status will be non-zero if a measurement was received and the magnetic tape was detected. LCP1 and LCP3 are used to detect multiple magnetic lines and should be zero if there is only one detectable line. Place the sensor closer to the magnetic tape to see if the track status changes to non-zero. If issue persists, verify that the wiring is correct. </p>
<h4 id="line-following-is-active-but-the-driving-is-not-robust"><a class="header" href="#line-following-is-active-but-the-driving-is-not-robust">Line following is active but the driving is not robust</a></h4>
<p>The <strong>line_following_sensor_flipped</strong> parameter might be wrong for one or more sensors. Another possible cause is that the sensor has been initialized on the magnetic line, which might result in infeasible measurements. A feasible measurement range is sensor dependent, and is within [-range / 2, range / 2], if the centre offset has not been altered. The measuring range for the MLSE-0300 is -15000 and 15000. If the Measurement status or Track status is non-zero but the measurement value for LCP2 remains 0 regardless of where the magnetic line is with respect to the sensor's centre point, the measurements is invalid.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="../../PositionControl/CoupledDriving/CoupledDrivingFeature-en.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="../../PositionControl/TrailerTransport/TrailerTransport-en.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="../../PositionControl/CoupledDriving/CoupledDrivingFeature-en.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="../../PositionControl/TrailerTransport/TrailerTransport-en.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
