<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Curtis - NAVITROL USER INSTRUCTIONS - Navitec Systems Oy CONFIDENTIAL</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="../../../favicon.svg">
                        <link rel="shortcut icon" href="../../../favicon.png">
                <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
                <link rel="stylesheet" href="../../../css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="../../../fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
                <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../../MdBook/MdbookFrontPage.html">Front page</a></li><li class="chapter-item expanded affix "><li class="part-title">Introduction</li><li class="chapter-item expanded "><a href="../../../Introduction/NavitrolUserInstructions/NavitrolUserInstructions-en.html"><strong aria-hidden="true">1.</strong> Navitrol user instructions</a></li><li class="chapter-item expanded "><a href="../../../Introduction/Licensing/Licensing-en.html"><strong aria-hidden="true">2.</strong> Licensing</a></li><li class="chapter-item expanded "><a href="../../../Introduction/OdometrySource/OdometrySource-en.html"><strong aria-hidden="true">3.</strong> Odometry source</a></li><li class="chapter-item expanded "><a href="../../../Introduction/InitialCalibrationGuide/InitialCalibrationGuide-en.html"><strong aria-hidden="true">4.</strong> Initial calibration guide</a></li><li class="chapter-item expanded "><a href="../../../Miscellaneous/ParameterReconfiguration/ParameterReconfiguration-en.html"><strong aria-hidden="true">5.</strong> Parameter reconfiguration</a></li><li class="chapter-item expanded "><a href="../../../Introduction/Parameters/Parameters.html"><strong aria-hidden="true">6.</strong> Parameter listing</a></li><li class="chapter-item expanded "><a href="../../../Introduction/Parameters/JsonConfigurationFile-en.html"><strong aria-hidden="true">7.</strong> JSON configuration file</a></li><li class="chapter-item expanded "><a href="../../../Introduction/TeachingInstructions/TeachingInstructions-en.html"><strong aria-hidden="true">8.</strong> Teaching instructions</a></li><li class="chapter-item expanded "><a href="../../../Introduction/FeatureMatrix/FeatureMatrix-en.html"><strong aria-hidden="true">9.</strong> Feature Matrix</a></li><li class="chapter-item expanded affix "><li class="part-title">Device interfaces</li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/SupportedDevices/SupportedDevices-en.html"><strong aria-hidden="true">10.</strong> Supported devices</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/GenericInterfaces/GenericInterfacesHeading.html"><strong aria-hidden="true">11.</strong> Generic interfaces</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../AgvInterfaces/GenericInterfaces/EthernetSupervisorInterface/EthernetSupervisorInterface-en.html"><strong aria-hidden="true">11.1.</strong> Ethernet Supervisor</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/GenericInterfaces/CanCommunication/CanCommunication-en.html"><strong aria-hidden="true">11.2.</strong> CAN communication</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../AgvInterfaces/GenericInterfaces/CanSupervisorInterface/CanSupervisorInterface-en.html"><strong aria-hidden="true">11.2.1.</strong> CAN Supervisor</a></li></ol></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/GenericInterfaces/EthercatCommunication/EthercatCommunication-en.html"><strong aria-hidden="true">11.3.</strong> EtherCAT Communication</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/GenericInterfaces/Simove/SimoveInterface-en.html"><strong aria-hidden="true">11.4.</strong> SIMOVE</a></li></ol></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/MotorControllersHeading.html"><strong aria-hidden="true">12.</strong> Motor controllers</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/MotorControllersCommon/MotorControllersCommon-en.html"><strong aria-hidden="true">12.1.</strong> Motor controller common</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/Schwarzmueller/SchwarzmuellerSetupInstructions/SchwarzmuellerSetupInstructions-en.html"><strong aria-hidden="true">12.2.</strong> Schwarzmueller setup</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/Schwarzmueller/SchwarzmuellerParameterSetupInstructions/SchwarzmuellerParameterSetupInstructions-en.html"><strong aria-hidden="true">12.2.1.</strong> Schwarzmueller parameters</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/Schwarzmueller/SchwarzmuellerTroubleshooting/SchwarzmuellerTroubleshooting-en.html"><strong aria-hidden="true">12.2.2.</strong> Schwarzmueller troubleshooting</a></li></ol></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/Curtis/CurtisMotorController-en.html" class="active"><strong aria-hidden="true">12.3.</strong> Curtis</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/Engel/EngelMotorController-en.html"><strong aria-hidden="true">12.4.</strong> Engel</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/Kinco/KincoMotorController-en.html"><strong aria-hidden="true">12.5.</strong> Kinco</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/Nanotec/NanotecMotorController-en.html"><strong aria-hidden="true">12.6.</strong> Nanotec</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/Oriental/OrientalMotorController-en.html"><strong aria-hidden="true">12.7.</strong> Oriental</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/Synapticon/SynapticonMotorController-en.html"><strong aria-hidden="true">12.8.</strong> Synapticon</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/Roboteq/RoboteqOpenLoopControllerConfiguration-en.html"><strong aria-hidden="true">12.9.</strong> Roboteq Open loop</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/Roboteq/RoboteqClosedLoopControllerConfiguration-en.html"><strong aria-hidden="true">12.10.</strong> Roboteq Closed loop</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/MiControl/MiControlMotorController-en.html"><strong aria-hidden="true">12.11.</strong> MiControl</a></li></ol></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/ScannerConfigurations/ScannerHeading.html"><strong aria-hidden="true">13.</strong> Laser scanners</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../AgvInterfaces/ScannerConfigurations/ScannerConfigurations-en.html"><strong aria-hidden="true">13.1.</strong> Scanner configurations</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/ScannerCommunicationTroubleshoot/ScannerCommunicationTroubleshoot-en.html"><strong aria-hidden="true">13.2.</strong> Scanner communication troubleshooting</a></li></ol></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/OpticalCodeReader/OpticalCodeReader.html"><strong aria-hidden="true">14.</strong> Optical code reader</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/Encoders/EncoderHeading.html"><strong aria-hidden="true">15.</strong> Encoders</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../AgvInterfaces/Encoders/EthercatEncoders/EthercatEncoders-en.html"><strong aria-hidden="true">15.1.</strong> EtherCAT encoders</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">User interfaces</li><li class="chapter-item expanded "><a href="../../../CustomerUis/NavitrolMonitor/NavitrolMonitor-en.html"><strong aria-hidden="true">16.</strong> Navitrol Monitor</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../CustomerUis/NavitrolMonitor3rdPartyLicenses/NavitrolMonitor3rdPartyLicenses-en.html"><strong aria-hidden="true">16.1.</strong> Navitrol Monitor third party licenses</a></li></ol></li><li class="chapter-item expanded "><a href="../../../CustomerUis/WebInterface/WebInterface-en.html"><strong aria-hidden="true">17.</strong> Navitrol web interface</a></li><li class="chapter-item expanded "><a href="../../../CustomerUis/Parameter Tool/ParameterTool-en.html"><strong aria-hidden="true">18.</strong> Parameter Tool Beta</a></li><li class="chapter-item expanded affix "><li class="part-title">Localization</li><li class="chapter-item expanded "><a href="../../../Localization/PositionConfidence/PositionConfidence-en.html"><strong aria-hidden="true">19.</strong> Position confidence</a></li><li class="chapter-item expanded "><a href="../../../Localization/ScannerCalibration/ScannerCalibration-en.html"><strong aria-hidden="true">20.</strong> Scanner calibration</a></li><li class="chapter-item expanded "><a href="../../../Localization/EnvironmentGuidelines/EnvironmentGuidelines-en.html"><strong aria-hidden="true">21.</strong> Environment guidelines</a></li><li class="chapter-item expanded "><a href="../../../Localization/AutomaticOdometryCorrection/AutomaticOdometryCorrection-en.html"><strong aria-hidden="true">22.</strong> Automatic odometry correction</a></li><li class="chapter-item expanded "><a href="../../../Localization/ReflectorBasedPositionInitialization/ReflectorBasedPositionInitialization-en.html"><strong aria-hidden="true">23.</strong> Reflector based position initialization</a></li><li class="chapter-item expanded "><a href="../../../Localization/PrecisionPositioning/PrecisionPositioning-en.html"><strong aria-hidden="true">24.</strong> Precision positioning</a></li><li class="chapter-item expanded "><a href="../../../Localization/LocalizationScannerChangeOnTheFly/LocalizationScannerChangeOnTheFly-en.html"><strong aria-hidden="true">25.</strong> Changing scanner on the fly</a></li><li class="chapter-item expanded "><a href="../../../Localization/RampZones/RampZones-en.html"><strong aria-hidden="true">26.</strong> Ramp zones</a></li><li class="chapter-item expanded "><a href="../../../Localization/GpsPositioning/GpsPositioning-en.html"><strong aria-hidden="true">27.</strong> GPS Positioning</a></li><li class="chapter-item expanded "><a href="../../../Localization/ImuAndSensorFusion/ImuAndSensorFusion-en.html"><strong aria-hidden="true">28.</strong> IMU and sensor fusion</a></li><li class="chapter-item expanded "><a href="../../../Localization/ExternalLocalization/ExternalLocalization-en.html"><strong aria-hidden="true">29.</strong> External localization</a></li><li class="chapter-item expanded "><a href="../../../Localization/DynamicMapping/DynamicMappingServer/DynamicMappingServer-en.html"><strong aria-hidden="true">30.</strong> Dynamic mapping server</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../Localization/DynamicMapping/DynamicMappingServerAndClientCompatibility/DynamicMappingServerAndClientCompatibility-en.html"><strong aria-hidden="true">30.1.</strong> Dynamic mapping client/server compatibility</a></li><li class="chapter-item expanded "><a href="../../../Localization/DynamicMapping/DynamicMappingServerHardwareRequirements/DynamicMappingServerHardwareRequirements.html"><strong aria-hidden="true">30.2.</strong> Dynamic mapping client/server hardware requirements</a></li></ol></li><li class="chapter-item expanded "><a href="../../../Localization/WheelSlipping/WheelSlipping-en.html"><strong aria-hidden="true">31.</strong> Wheel slipping diagnostic</a></li><li class="chapter-item expanded "><a href="../../../Localization/3dPositioning/3dPositioning-en.html"><strong aria-hidden="true">32.</strong> 3D positioning</a></li><li class="chapter-item expanded affix "><li class="part-title">Position control</li><li class="chapter-item expanded "><a href="../../../PositionControl/StartOffsetSlowdown/StartOffsetSlowdown-en.html"><strong aria-hidden="true">33.</strong> Start offset slowdown</a></li><li class="chapter-item expanded "><a href="../../../PositionControl/CoupledDriving/CoupledDrivingFeature-en.html"><strong aria-hidden="true">34.</strong> Coupled driving</a></li><li class="chapter-item expanded "><a href="../../../PositionControl/MagneticLineFollowing/MagneticLineFollowing-en.html"><strong aria-hidden="true">35.</strong> Magnetic line following</a></li><li class="chapter-item expanded "><a href="../../../PositionControl/TrailerTransport/TrailerTransport-en.html"><strong aria-hidden="true">36.</strong> Trailer transport</a></li><li class="chapter-item expanded "><a href="../../../PositionControl/BarrierStop/BarrierStop-en.html"><strong aria-hidden="true">37.</strong> Barrier stop</a></li><li class="chapter-item expanded "><a href="../../../PositionControl/DataMatrixDocking/DataMatrixDockingDMC-en.html"><strong aria-hidden="true">38.</strong> Data Matrix Code Docking V2</a></li><li class="chapter-item expanded "><a href="../../../PositionControl/Docking/Docking-en.html"><strong aria-hidden="true">39.</strong> Docking</a></li><li class="chapter-item expanded affix "><li class="part-title">Drive control</li><li class="chapter-item expanded "><a href="../../../DriveControl/DrivingOptions/DrivingOptions-en.html"><strong aria-hidden="true">40.</strong> Driving options</a></li><li class="chapter-item expanded "><a href="../../../DriveControl/Standalone/Standalone-en.html"><strong aria-hidden="true">41.</strong> Standalone</a></li><li class="chapter-item expanded "><a href="../../../DriveControl/StopAndHold/StopAndHold-en.html"><strong aria-hidden="true">42.</strong> Stop-and-hold</a></li><li class="chapter-item expanded "><a href="../../../DriveControl/VDA5050/VDA5050-en.html"><strong aria-hidden="true">43.</strong> VDA 5050</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../DriveControl/VDA5050/VDA5050FeatureMatrix-en.html"><strong aria-hidden="true">43.1.</strong> VDA 5050 Support status</a></li></ol></li><li class="chapter-item expanded "><a href="../../../DriveControl/ReturnToRoute/ReturnToRoute-en.html"><strong aria-hidden="true">44.</strong> Return to route</a></li><li class="chapter-item expanded "><a href="../../../DriveControl/ObstacleAvoidance/ObstacleAvoidance-en.html"><strong aria-hidden="true">45.</strong> Obstacle avoidance</a></li><li class="chapter-item expanded "><a href="../../../DriveControl/ObstacleAvoidanceV2/ObstacleAvoidanceV2-en.html"><strong aria-hidden="true">46.</strong> Obstacle avoidance V2</a></li><li class="chapter-item expanded "><a href="../../../DriveControl/ContainerDriving/ContainerDriving-en.html"><strong aria-hidden="true">47.</strong> Container driving</a></li><li class="chapter-item expanded "><a href="../../../DriveControl/RecordAndPlay/RecordAndPlay-en.html"><strong aria-hidden="true">48.</strong> Record and Play</a></li><li class="chapter-item expanded "><a href="../../../DriveControl/RouteFreeNavigation/RouteFreeNavigation-en.html"><strong aria-hidden="true">49.</strong> Route free navigation</a></li><li class="chapter-item expanded affix "><li class="part-title">Kinematics</li><li class="chapter-item expanded "><a href="../../../Kinematics/OmniSteerLimit/OmniSteerLimit-en.html"><strong aria-hidden="true">50.</strong> Omni steer limit</a></li><li class="chapter-item expanded "><a href="../../../Kinematics/OneDriveWheelOmni/OneDriveWheelOmni-en.html"><strong aria-hidden="true">51.</strong> Omni one drive wheel</a></li><li class="chapter-item expanded affix "><li class="part-title">Pickup and drop-off</li><li class="chapter-item expanded "><a href="../../../LoadHandling/ActuatorControl/ActuatorControl-en.html"><strong aria-hidden="true">52.</strong> Actuator control</a></li><li class="chapter-item expanded "><a href="../../../LoadHandling/ScannerLiftActuator/ScannerLiftActuator-en.html"><strong aria-hidden="true">53.</strong> Scanner lift actuator</a></li><li class="chapter-item expanded "><a href="../../../LoadHandling/Racking/Racking-en.html"><strong aria-hidden="true">54.</strong> Racking</a></li><li class="chapter-item expanded "><a href="../../../LoadHandling/BufferLanes/BufferLanes-en.html"><strong aria-hidden="true">55.</strong> Buffer lanes</a></li><li class="chapter-item expanded "><a href="../../../LoadHandling/StackLoading/StackLoading-en.html"><strong aria-hidden="true">56.</strong> Loading from a stack</a></li><li class="chapter-item expanded "><a href="../../../LoadHandling/BlockStacking/BlockStacking-en.html"><strong aria-hidden="true">57.</strong> Unloading to a stack</a></li><li class="chapter-item expanded "><a href="../../../LoadHandling/DistanceToTarget/DistanceToTarget-en.html"><strong aria-hidden="true">58.</strong> Distance to target estimation</a></li><li class="chapter-item expanded affix "><li class="part-title">Target and obstacle detection</li><li class="chapter-item expanded "><a href="../../../TargetAndObstacleDetection/PalletDetection/PalletDetection-en.html"><strong aria-hidden="true">59.</strong> Pallet detection</a></li><li class="chapter-item expanded "><a href="../../../TargetAndObstacleDetection/3dTargetDetection/3dTargetDetection-en.html"><strong aria-hidden="true">60.</strong> 3D Target detection</a></li><li class="chapter-item expanded "><a href="../../../TargetAndObstacleDetection/PatternDetection/PatternDetection-en.html"><strong aria-hidden="true">61.</strong> Pattern detection</a></li><li class="chapter-item expanded "><a href="../../../TargetAndObstacleDetection/ObstacleDetection/ObstacleDetection-en.html"><strong aria-hidden="true">62.</strong> Obstacle detection</a></li><li class="chapter-item expanded "><a href="../../../TargetAndObstacleDetection/ExternalTargetDetection/ExternalTargetDetection-en.html"><strong aria-hidden="true">63.</strong> External target detection</a></li><li class="chapter-item expanded "><a href="../../../TargetAndObstacleDetection/TableDetection/TableDetection-en.html"><strong aria-hidden="true">64.</strong> Table detection</a></li><li class="chapter-item expanded "><a href="../../../TargetAndObstacleDetection/Wallmonitoring/Wallmonitoring-en.html"><strong aria-hidden="true">65.</strong> Wall monitoring</a></li><li class="chapter-item expanded "><a href="../../../TargetAndObstacleDetection/OccupancyCheck/OccupancyCheck-en.html"><strong aria-hidden="true">66.</strong> Occupancy check</a></li><li class="chapter-item expanded affix "><li class="part-title">Miscellaneous</li><li class="chapter-item expanded "><a href="../../../Miscellaneous/ErrorDescriptions/ErrorDescriptions-en.html"><strong aria-hidden="true">67.</strong> Error descriptions</a></li><li class="chapter-item expanded "><a href="../../../Miscellaneous/Logging/Logging-en.html"><strong aria-hidden="true">68.</strong> Logging</a></li><li class="chapter-item expanded "><a href="../../../Miscellaneous/LinuxImageInstallation/LinuxImagesHeading.html"><strong aria-hidden="true">69.</strong> Linux image installation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../Miscellaneous/LinuxImageInstallation/CanDrivers/CanDrivers-en.html"><strong aria-hidden="true">69.1.</strong> CAN drivers</a></li><li class="chapter-item expanded "><a href="../../../Miscellaneous/LinuxImageInstallation/Clonezilla/ClonezillaInstallation-en.html"><strong aria-hidden="true">69.2.</strong> Clonezilla</a></li><li class="chapter-item expanded "><a href="../../../Miscellaneous/LinuxImageInstallation/DebianBuster/DebianBusterInstallation-en.html"><strong aria-hidden="true">69.3.</strong> Debian Buster</a></li><li class="chapter-item expanded "><a href="../../../Miscellaneous/LinuxImageInstallation/DebianBullseye/DebianBullseyeInstallation-en.html"><strong aria-hidden="true">69.4.</strong> Debian Bullseye</a></li></ol></li><li class="chapter-item expanded "><a href="../../../Miscellaneous/ParameterZones/ParameterZones-en.html"><strong aria-hidden="true">70.</strong> Parameter zones</a></li><li class="chapter-item expanded "><a href="../../../Miscellaneous/Reflectors/Reflectors-en.html"><strong aria-hidden="true">71.</strong> Reflectors</a></li><li class="chapter-item expanded "><a href="../../../Miscellaneous/SslCertificates/SslCertificates-en.html"><strong aria-hidden="true">72.</strong> SSL Certificate configuration</a></li><li class="chapter-item expanded "><a href="../../../Miscellaneous/BatteryOvertemperatureActions/BatteryOvertemperatureActions.html"><strong aria-hidden="true">73.</strong> Battery overtemperature actions</a></li><li class="chapter-item expanded "><a href="../../../Miscellaneous/Charging/Charging-en.html"><strong aria-hidden="true">74.</strong> Charging and battery management</a></li><li class="chapter-item expanded "><a href="../../../Miscellaneous/HardwareRequirements/HardwareRequirements-en.html"><strong aria-hidden="true">75.</strong> Hardware requirements</a></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="dark">Dark</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">NAVITROL USER INSTRUCTIONS - Navitec Systems Oy CONFIDENTIAL</h1>

                    <div class="right-buttons">
                                                <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="curtis-can-motor-controller"><a class="header" href="#curtis-can-motor-controller">Curtis CAN motor controller</a></h1>
<p>Updated 11.07.2024</p>
<hr />
<h2 id="glossary"><a class="header" href="#glossary">Glossary</a></h2>
<table><thead><tr><th>Term</th><th>Description</th></tr></thead><tbody>
<tr><td>SDO</td><td>Service Data Object</td></tr>
<tr><td>PDO</td><td>Process Data Object</td></tr>
<tr><td>CIT</td><td>Curtis Integrated Toolkit</td></tr>
<tr><td>PCAN-USB</td><td>Peak PCAN-USB adapter. Used to connect between CIT and motor controller</td></tr>
</tbody></table>
<hr />
<h2 id="introduction"><a class="header" href="#introduction">Introduction</a></h2>
<p>Curtis motor controller is one of the motor controllers supported by Navitrol. Curtis offers wide range of single and multi-channel motor controllers that can be used for different purposes (steering, driving, actuator) in the AGV.</p>
<p>This documentation provides instructions for configuring the motor controllers to be used with Navitrol. Operation of the device is possible via CANopen fieldbus.</p>
<p>Following motor controllers are supported by Navitec Systems:</p>
<ul>
<li>
<p><strong>F2-T</strong>. This motor controller has 3 channels</p>
<ul>
<li>2 AC motor channels (can be used for driving/steering) and 1 DC pump (used for hydraulic actuator)</li>
</ul>
</li>
<li>
<p><strong>F2-D</strong>. This motor controller has 2 channels</p>
<ul>
<li>2 AC motor connections (can be used for driving/steering)</li>
</ul>
</li>
<li>
<p><strong>Fx-A series</strong>. This motor controller has 1 channel. Supported models are F2-A, F4-A, F6-A, F10-A</p>
<ul>
<li>1 AC motor connection (can be used for driving/steering)</li>
</ul>
</li>
</ul>
<p>The following motor types are supported.</p>
<ul>
<li>
<p><strong>AC Induction Motor (ACIM)</strong> This motor type by default uses the quadrature Encoder and supports auto-characterization. Contact Curtis if an ACIM application will use a Sin/Cos sensor (encoder)</p>
</li>
<li>
<p><strong>Permanent magnet AC Motor (PMAC)</strong> PMAC motors by default use the Sin/Cos sensor type Encoder. Contact Curtis if a PMAC motor is chosen for the AGV</p>
</li>
</ul>
<p>There might be some errors during commissioning procedure that are motor controller specific, so Navitrol support might be not able to solve them without Curtis support help. Contact information of Curtis support can be provided by Navitec Systems.</p>
<p>Currently, Curtis motor controllers can be supported for several kinematics:</p>
<ul>
<li>
<p>Diff drive</p>
</li>
<li>
<p>Steer drive</p>
</li>
<li>
<p>Steer drive with a differential sub unit</p>
</li>
<li>
<p>Omni</p>
</li>
</ul>
<h2 id="requirements"><a class="header" href="#requirements">Requirements</a></h2>
<ul>
<li>The parameterization and configuration of the motor controllers takes place with the <a href="https://www.curtisinstruments.com/products/programming">Curtis Integrated Toolkit</a> (CIT) software. The software needs a license and it can be purchased from Curtis.</li>
<li>Adapter to connect the motor controller to the <a href="https://www.curtisinstruments.com/products/programming">CIT software</a>. Curtis recommends PEAK System PCAN adapter</li>
<li>A Project file (.cprj) for the motor controller, provided by Navitec Systems
<ul>
<li>Different motor controllers have different project files. For example F2-D and F2-A models will use different project file</li>
</ul>
</li>
<li>Servo mode tuning template file (.ctrc) is needed and is proviced by Navitec Systems</li>
</ul>
<h2 id="limitations"><a class="header" href="#limitations">Limitations</a></h2>
<ul>
<li>Autocharacterization can be done only for AC induction motors (ACIM)</li>
<li>PMAC motors characterization is done by Curtis on their dynomometer lab and motor might need to be shipped to Curtis. Please contact Curtis if planning to use PMAC motor</li>
<li><strong>Motor controller might not support all functions and kinematics</strong>. <a href="../../SupportedDevices/SupportedDevices-en.html">List of supported devices</a> document should be checked to determine whether the combination of the function and kinematics is supported or not.</li>
<li>Currently, Navitrol is not able to control Curtis motor controllers with other motor controllers in the same AGV</li>
</ul>
<h2 id="dependencies"><a class="header" href="#dependencies">Dependencies</a></h2>
<ul>
<li><a href="../../MotorControllers/MotorControllersCommon/MotorControllersCommon-en.html">Motor controllers common</a></li>
<li><a href="../../GenericInterfaces/CanCommunication/CanCommunication-en.html">CAN Communication</a></li>
<li><a href="../../../Introduction/InitialCalibrationGuide/InitialCalibrationGuide-en.html">Initial Calibration Guide</a></li>
<li><a href="https://www.curtisinstruments.com/products/motor-controllers">Curtis Motor controller listing</a></li>
</ul>
<h2 id="electrical-connections"><a class="header" href="#electrical-connections">Electrical connections</a></h2>
<p>Electrical connections can be divided into several groups:</p>
<ol>
<li>
<p><strong>High-current connections</strong> -- screw connections.</p>
<p>a.  <strong>Battery connectors -- B+ and B-</strong>
<strong>Important note: The battery should be connected using the main contactor.</strong>
This is because the motor controller has a quite large capacitor installed between connectors. If the battery is directly connected, it may have a large current spike.</p>
<p>b.  <strong>Motor terminals (U, V, W).</strong>
Should be connected directly to the motor terminals</p>
<p>c.  <strong>Pump connection</strong>
Some of the motor controllers might have DC pump for actuator control.
Then pump should be connected between &quot;Pump&quot; and &quot;B+&quot;.</p>
</li>
<li>
<p><strong>Low-current connections</strong>. All of the low power connections are through a single AMPSEAL connector. The following should be connected:</p>
<p>a.  <strong>Key Switch</strong> This is the logical power input. Additionally, used to reboot the motor controller.</p>
<p>b.  <strong>Coil Outputs</strong> (proportional valves).
Those outputs are used for controlling the main contactor, brake release, and proportional valves.
Wiring and pin number depends on the motor controller type.</p>
<p>c.  <strong>CAN connection</strong></p>
<p>d.  <strong>SafeStop switch</strong>
Pin that is used for E-STOP connection depends on the motor controller type.
This pin should be powered during normal operation (Normally-closed contact).</p>
<p>e.  <strong>Motor sensors</strong> (available only for AC-channel): encoder and temperature sensor.</p>
<p>f.  <strong>Generic Switches</strong>
Switches can be used as digital and analog inputs in some specific cases.</p>
</li>
</ol>
<p>See <a href="https://www.curtisinstruments.com/products/motor-controllers">Curtis Motor controller listing</a> for more details.</p>
<h2 id="quick-setup"><a class="header" href="#quick-setup">Quick Setup</a></h2>
<h3 id="agv-off-the-ground"><a class="header" href="#agv-off-the-ground">AGV off the ground</a></h3>
<p>The following steps must be done so that AGV is lifted off the ground and motors can spin freely:</p>
<ul>
<li><a href="#connect-motor-controllers-to-the-can-bus">Connect the motor controller to the CAN-bus</a></li>
</ul>
<ul>
<li><a href="#flash-the-project-file-to-the-motor-controller-with-cit-software">Flash the project file to the motor controller with CIT software</a></li>
<li><a href="#controller-parameter-setup">Controller Parameter Setup</a></li>
<li><a href="#auto-characterization-for-acim-motor-controllers">Auto Characterization for ACIM motor controllers</a></li>
<li><a href="#internal-pi-controller-tuning">Internal PI controller tuning</a></li>
</ul>
<h3 id="agv-on-the-ground"><a class="header" href="#agv-on-the-ground">AGV on the ground</a></h3>
<p>After commissioning has proceed to a point that all motor controllers PI tuning has been completed, the AGV must be put back to ground and continue with following steps:</p>
<ul>
<li><a href="#navitrol-parameterization">Navitrol parameterization</a></li>
<li><a href="#tune-slip-gain">Tune Slip gain</a></li>
<li><a href="#base-speed-configuration">Base speed configuration</a></li>
</ul>
<!--
---

- Set CAN nodeId parameters according to [Motor controllers common](../../MotorControllers/MotorControllersCommon/MotorControllersCommon-en.md)
- Set CAN communication parameters according to [CAN communication](../../GenericInterfaces/CanCommunication/CanCommunication-en.md) document.
- Set motor controller specific parameters as listed below

**Required parameters**



| Name             | Type | Default value | Description |
| --- | --- | --- | --- |
| mot_ctrl_max_output_current_percent | Int | 100 | Maximum output current (percent) sent to the motor controller |
| mot_ctrl_disable_delay_ms | Int | 0 | Motor controller disabling delay after activating brakes in ms, 0 = no delay, 300 = recommended for Schwarzmueller and Curtis |
| mot_ctrl_startup_delay_main_contactor_ms | Int | 0| Time given for main contactor to stabilize before enabling drive. 0 = no delay, 500 = recommended for Schwarzmueller and Curtis |
| mot_ctrl_startup_delay_brake_release_ms | Int | 0 | Time given for brakes to fully open before giving rpm out. 0 = no delay, 200 = recommended for Schwarzmueller, 100..300 = recommended for Curtis |


---

### Fine-tuning

If BMS is used, Navitrol can read BMS data from the motor controller. Set up BMS in CIT according to the controller manual.

**Optional parameters**

| Name             | Type | Default value | Description |
| --- | --- | --- | ---  |
| battery_percentage_from_mot_ctrl   | Int  | 0  | Activates Nanotec E-STOP check. </br> Emergency stop activation comes from digital input 1 and 2 on the motor controller |
| battery_alert_from   | Int  | 0  |-1 no alert, 0 to alert from low voltage, 1 to alert from low battery percentage |
| battery\_alert\_percentage   | Float  | 5.0f  |\% |
-->
<hr />
<h2 id="how-to-use"><a class="header" href="#how-to-use">How to use</a></h2>
<p>To start the commissioning of Curtis motor controller, the following items are needed:</p>
<ol>
<li>
<p>Can USB adapter.
PEAK System PCAN USB-adapter was tested by Navitec and recommended by Curtis</p>
</li>
<li>
<p><a href="https://www.curtisinstruments.com/products/programming">CIT</a> -- Curtis Integrated toolkit</p>
</li>
<li>
<p>Project file for Curtis Motor Controller model provided by Navitec Systems</p>
</li>
</ol>
<h3 id="connect-motor-controllers-to-the-can-bus"><a class="header" href="#connect-motor-controllers-to-the-can-bus">Connect motor controllers to the CAN bus</a></h3>
<p>Connect the motor controller and CAN adapter to the CAN bus. The motor controller should be connected to the CAN bus for commissioning one by one.</p>
<p>If the motor controller is wired correctly, there should be a heartbeat on the CAN bus.</p>
<p>If a PCAN-USB adapter is used, open PCAN-View software and check that heartbeat is present on the bus.</p>
<p>Default node Ids are 0x26 (hex) = 38 (dec) and 0x27 (hex) = 39 (dec).</p>
<p><strong>Note: two and three-channel motor controllers (F2-D, F2-T) have two communication interface. Therefore, if the above-mentioned controllers are used, there should be a heartbeat from two node Ids.</strong></p>
<h3 id="flash-the-project-file-to-the-motor-controller-with-cit-software"><a class="header" href="#flash-the-project-file-to-the-motor-controller-with-cit-software">Flash the project file to the motor controller with CIT software</a></h3>
<p>The first step that should be done in commissioning the motor controller is to Flash the controller.</p>
<p>To communicate with Navitrol, the motor controller should have appropriate software with Navitec-specific modifications. To install the software on the motor controller, the user should flash the project file to the motor controller. The project file is provided by Navitec Systems.</p>
<p>The project file is device-specific and supported devices are mentioned in the project file.</p>
<p>To flash the project file to the controller:</p>
<ol>
<li>Open the project.</li>
<li>Select the correct CAN adapter at the bottom of the window.</li>
<li>Next, press the green circle button to establish communication with the motor controllers.</li>
<li>Once communication is established, press &quot;Package and Flash&quot; to go to the flashing menu of the motor controller. If motor controller is two or three channel, flash the file on both of them. <strong>Note: Navitrol needs to be turned of when flashing the project file to the controller</strong></li>
</ol>
<br>
<p><img src="./media-en/Flashing.png" alt="" /></p>
<blockquote>
<p>Flashing the project file on the Curtis controller</p>
</blockquote>
<h3 id="controller-parameter-setup"><a class="header" href="#controller-parameter-setup">Controller Parameter Setup</a></h3>
<p>General controller parameters should be set once flashing is completed. Parameter change must be performed for all motor controllers (and for both M1 and M2 controllers in case two-channel motor controllers are used).</p>
<p>To change parameters:</p>
<ol>
<li>Open Curtis Integrated Toolkit</li>
<li>Connect to motor controllers using the green circle button</li>
<li>Select motor controller (For example M1 or M2) and press &quot;Programmer&quot; in the right corner menu.</li>
</ol>
<p><img src="./media-en/programmer_view.png" alt="" /></p>
<blockquote>
<p>Programmer View</p>
</blockquote>
<p>The following parameters should be checked from the Programmer:</p>
<table><thead><tr><th>Parameter Name</th><th>Path</th><th>Recommended Value</th><th>Notes</th></tr></thead><tbody>
<tr><td>Control Mode Select</td><td>System Monitor » Control Mode Select</td><td>7</td><td>Always Servo mode for Navitrol to be able to utilize the motor controller</td></tr>
<tr><td>Nominal Battery Voltage</td><td>Applications Setup » Battery Setup » Nominal voltage</td><td>24</td><td>Typically 24 or 48 depending on the battery back</td></tr>
<tr><td>Main Contactor Pull in Voltage</td><td>Applications Setup » Main Contactor » Pull in Voltage</td><td>100</td><td>Check from main contactor document the correct Pull in voltage. Typically 100</td></tr>
<tr><td>Main Contactor Holding Voltage</td><td>Applications Setup » Main Contactor » Holding Voltage</td><td>80</td><td>Check from main contactor document the correct Holding voltage. Typically 80</td></tr>
<tr><td>EM Brake Pull in Voltage</td><td>Application Setup » EM Brake Control » Pull in Voltage</td><td>100</td><td>Check from Brake manufacturer document for correct Pull in Voltage. Typically 100</td></tr>
<tr><td>EM Brake Holding Voltage</td><td>Application Setup » EM Brake Control » Holding Voltage</td><td>70</td><td>Check from Brake manufacturer document for correct Holding Voltage. Typically 70</td></tr>
<tr><td>EM Brake Type</td><td>Application Setup » EM Brake Control » EM Brake Type</td><td>0</td><td>Always 0, defined automatically by Curtis</td></tr>
<tr><td>CAN Baud Rate</td><td>Application Setup » CAN interface 1/2 » Baud Rate</td><td>0-2</td><td>Baud Rate for the controller. Needs to be same as Navitrol Baud Rate. <br> <strong>Note: Change applied only after reboot</strong></td></tr>
<tr><td>CAN Node ID</td><td>Application Setup » CAN interface 1/2 » CAN Node ID</td><td>NodeId in hex (example 26h)</td><td>Node ID for the motor controller in hexadecimal. <br> <strong>Note: Change applied only after reboot</strong></td></tr>
<tr><td>EM Brake Driver</td><td>Controller setup » IO Assignments » Coil drivers » Em brake driver</td><td>0</td><td>Always 0, defined automatically by Curtis</td></tr>
<tr><td>Main Contactor Driver</td><td>Controller setup » IO Assignments » Coil drivers » Main contactor Driver</td><td>5</td><td>Check from <a href="https://www.curtisinstruments.com/products/motor-controllers">Curtis Motor controller datasheet</a> which driver is Main Contactor connected to. For example F4-A and F2-D Main Coil is connected to Driver 5</td></tr>
<tr><td>Position Sensor type</td><td>Motor Setup » Position sensor type</td><td>1</td><td>Usually Quadrature encoder for ACIM motors. Check with customer which sensor they are using</td></tr>
<tr><td>Quadture Encoder 5V Voltage</td><td>Motor Setup » Quadrature Encoder » 5V output</td><td>True</td><td></td></tr>
<tr><td>Quadture Encoder 12V Voltage</td><td>Motor Setup » Quadrature Encoder » 12V output</td><td>True</td><td></td></tr>
<tr><td>Temperature Sensor Type</td><td>Motor Setup » Temperature Sensor » Sensor Type</td><td>1-4</td><td>Choose sensor type. 4 different sensors supported</td></tr>
<tr><td>Temperature Sensor Enabled</td><td>Motor Setup » Temperature Sensor » Sensor Enable</td><td>True</td><td>Check that temperature displayed in the menu corresponds to the actual temperature.</td></tr>
<tr><td>Temperature Sensor Max Temp</td><td>Motor Setup » Temperature Sensor » Temperature Max</td><td>160</td><td>Motor manufacturer provides this information</td></tr>
<tr><td>Temperature Sensor Hot Temp</td><td>Motor Setup » Temperature Sensor » Temperature Hot</td><td>145</td><td>Motor manufacturer provides this information</td></tr>
<tr><td>Interlock Input Source</td><td>Controller Setup » IO Assignments » Switch Assignment » Interlock Input Source</td><td>0</td><td>Always 0, defined automatically by Curtis</td></tr>
</tbody></table>
<p>For the PMAC motor set Sin/Cos Encoder parameters (Programmer » Motor Setup » Sin/Cos Encoder).
Those parameters should be set according to the datasheet of encoder being used.</p>
<p>Once those parameters are set, it is possible to check Main Contactor and Brake operation. Go to:</p>
<ul>
<li>Programmer » Navitec » Interlock force enable and select &quot;Yes&quot;.</li>
<li>Check under System Monitor » Outputs 
<ul>
<li>Values increased from 0 to 70 or 80 the corresponding Drivers for example 5 and 2</li>
</ul>
</li>
</ul>
<p><img src="./media-en/Navitec_menu.png" alt="" /></p>
<blockquote>
<p>Navitec menu in CIT</p>
</blockquote>
<p>Once selected:</p>
<ul>
<li>Main contactor should be engaged</li>
<li>Brakes should be released</li>
</ul>
<p>Additionally, check if any errors appeared in Programmer. If there are some errors, react to them according to Curtis manual.</p>
<h3 id="auto-characterization-for-acim-motor-controllers"><a class="header" href="#auto-characterization-for-acim-motor-controllers">Auto Characterization for ACIM motor controllers</a></h3>
<p>Once main parameters have been set and interlock can be released, characterizing the motor controller can be performed.
Characterization means that the Motor controller will measure and tune motor parameters to establish optimal controllability of the motor.</p>
<p>The exact motor characterization model can be provided by Curtis. However, if Curtis does not have the characterization model available, the auto-characterization is needed. <strong>Autocharacterization and Slip Gain configuration are not needed when using the exact motor characterization model</strong></p>
<p>The motor characterization should be performed for both M1 and M2 controllers in case two-channel motor controllers are used. Everything should be performed when wheels are off the ground.</p>
<p>Motor characterization is described in steps in Chapter 6 &quot;Commissioning&quot; of Curtis Manual. The procedure can be done in the following steps in Programmer:</p>
<ol>
<li>Set Motor Technology and Motor Type</li>
</ol>
<table><thead><tr><th>Parameter Name</th><th>Path</th><th>Recommended Value</th><th>Notes</th></tr></thead><tbody>
<tr><td>Motor Technology</td><td>Motor Setup » Motor Technology</td><td>ACIM</td><td>ACIM or PMAC</td></tr>
<tr><td>Motor Type</td><td>Motor Setup » Induction Motor (ACIM) » Motor Type</td><td>-1</td><td>-1 = Autocharacterization procedure used <br> 1-588 = Exact motor characterization model provided by Curtis</td></tr>
</tbody></table>
<ol start="2">
<li>
<p>Clear Faults and do a power cycle of the controller. Only User 1 error (PDO timeout) can be present.</p>
</li>
<li>
<p>Enter the desired Max Test Current and Max Test Speed for the characterization test (in Motor Setup » Induction Motor (ACIM) » Characterization Tests). Typical settings are 70% current and 1/3 of max speed of the motor.</p>
</li>
<li>
<p>Enable interlock (Programmer » Navitec » Interlock force enable)</p>
</li>
<li>
<p>Set Test Enable = On (Motor Setup » Induction Motor (ACIM) » Characterization Tests)</p>
</li>
<li>
<p>Set Test Throttle = 1 (positive). After approximately 30 or more seconds, the motor will begin to pulsate and then rotate. It is critical to verify the motor is turning in the FORWARD vehicle direction.
If it is not, set Test Throttle = 0, wait for the motor to come to a stop, then set Test Throttle = -1 (negative).</p>
</li>
<li>
<p>When auto characterization is completed, a Parameter Change message will appear. Do a power cycle to the controller.</p>
</li>
</ol>
<p><img src="./media-en/Motor_characterization.png" alt="" /></p>
<blockquote>
<p>Motor characterization</p>
</blockquote>
<h3 id="internal-pi-controller-tuning"><a class="header" href="#internal-pi-controller-tuning">Internal PI controller tuning</a></h3>
<p>PI controller must be tuned in order to control the motor accurately and fast.</p>
<ol>
<li>Change Tuning Mode to value 1 to enable speed controller tuning.</li>
</ol>
<p><img src="./media-en/Tuning_mode_select.png" alt="" /></p>
<blockquote>
<p>Tuning mode select</p>
</blockquote>
<ol start="2">
<li>
<p>Set two speeds that will be used for speed tuning. The motor controller will switch between those speeds during the tuning procedure</p>
</li>
<li>
<p>Set initial PI gains. First, leave Ki to 0.0 and set Kp to some initial value (0.2 is a good starting value)</p>
</li>
</ol>
<p><img src="./media-en/Speed_and_PID_coefficient.png" alt="" /></p>
<blockquote>
<p>Setting speed settings and PI coefficients</p>
</blockquote>
<ol start="4">
<li>
<p>Now go to the main page of the CIT software. Open TACT.</p>
</li>
<li>
<p>Open the Tuning template file from the File menu. The Tuning template file will be provided by Navitec.</p>
</li>
<li>
<p>Set Tuning Enable to value 1 in the Programmer</p>
</li>
<li>
<p>Press the green triangle button in TACT to start</p>
</li>
<li>
<p>The motor should start changing from Speed 1 to Speed 2 every Tuning Time interval.
Increase Kp until slight overshoot is seen in the step response, then reduce the value of Speed Kp to approximately 2/3 of the present value.
Typical values of well-tuned Speed Kp are 0.2-0.4 for small motors, much higher for larger motors.</p>
</li>
<li>
<p>After Speed Kp value is determined, start slowly raising Ki. The motor should now exactly converge to the requested speeds.
Take larger steps for Ki, e.g. +2.0. Increase Ki until overshoot is seen in the step response, then reduce the value of Speed Ki to approximately 2/3 of the present value.
Typical values of a well-tuned Speed Ki are between 0.1 and 0.9.</p>
</li>
</ol>
<p><img src="./media-en/Oscilloscope.png" alt="" /></p>
<blockquote>
<p>Tuning process in Oscilloscope</p>
</blockquote>
<ol>
<li>Once tuning is completed, change the Tuning Enable parameter back to 0.</li>
</ol>
<h3 id="navitrol-parameterization"><a class="header" href="#navitrol-parameterization">Navitrol parameterization</a></h3>
<ul>
<li>Set CAN nodeId parameters according to <a href="../../MotorControllers/MotorControllersCommon/MotorControllersCommon-en.html">Motor controllers common</a></li>
<li>Set CAN communication parameters according to <a href="../../GenericInterfaces/CanCommunication/CanCommunication-en.html">CAN communication</a> document.</li>
<li>The controller supports current limiting and control delays.  Control delays are needed to ensure that the main contactor and brakes will be fully open when the motor controller will start driving. </li>
</ul>
<p><strong>Required parameters</strong></p>
<table><thead><tr><th>Name</th><th>Type</th><th>Default value</th><th>Description</th></tr></thead><tbody>
<tr><td>mot_ctrl_max_output_current_percent</td><td>Int</td><td>100</td><td>Maximum output current (percent) sent to the motor controller</td></tr>
<tr><td>mot_ctrl_disable_delay_ms</td><td>Int</td><td>1000</td><td>Motor controller disabling delay [ms] after activating brakes: -1 = never disable, 0 = no delay</td></tr>
<tr><td>mot_ctrl_startup_delay_main_contactor_ms</td><td>Int</td><td>0</td><td>Time given for main contactor to stabilize before enabling drive. 0 = no delay, 500 = recommended for Schwarzmueller and Curtis</td></tr>
<tr><td>mot_ctrl_startup_delay_brake_release_ms</td><td>Int</td><td>0</td><td>Time given for brakes to fully open before giving rpm out. 0 = no delay, 200 = recommended for Schwarzmueller, 100..300 = recommended for Curtis</td></tr>
</tbody></table>
<h4 id="fine-tuning"><a class="header" href="#fine-tuning">Fine-tuning</a></h4>
<p>If BMS is used, Navitrol can read BMS data from the motor controller. Set up BMS in CIT according to the controller manual. To activate BMS, use the parameters listed below</p>
<ul>
<li>Note: Not all types of batteries are supported by built-in BMS. This information should be checked with Curtis support.</li>
</ul>
<p><strong>Optional parameters</strong></p>
<table><thead><tr><th>Name</th><th>Type</th><th>Default value</th><th>Description</th></tr></thead><tbody>
<tr><td>battery_percentage_from_mot_ctrl</td><td>Int</td><td>0</td><td>1 to read battery percentage from motor controller, 0 to calculate it from battery voltage</td></tr>
<tr><td>battery_alert_from</td><td>Int</td><td>0</td><td>Battery Alert Mode: -1 = no alert, 0 = alert from low voltage, 1 = alert from low battery percentage</td></tr>
<tr><td>battery_alert_percentage</td><td>Float</td><td>5.0f</td><td>Warning is set on low battery level [%] (battery_alert_from = 1)</td></tr>
<tr><td>can_sync</td><td>Int</td><td>1</td><td>Navigation SW (Primary CAN) role for CANOpen SYNC messages: 0 = None, 1 = SYNC producer, 2 = SYNC consumer</td></tr>
</tbody></table>
<h3 id="tune-slip-gain"><a class="header" href="#tune-slip-gain">Tune Slip gain</a></h3>
<p>Slip gain need to be tuned after AGV is ready to be driven (Manually or with Navitrol). The steps to configure slip gain are:</p>
<ul>
<li>Connect a load cell between the vehicle and something that does not move</li>
<li>A torque sensor needs to be connected to the motor to get the torque measurements</li>
<li>Running the motor that it stalls. Change torgues that it does not slip</li>
<li>Try to find highest torque produced by the motor and use that slip gain.</li>
<li>Open Programmer and change SlipGain (Motor Setup » Induction Motor (ACIM) » Characterization Tests)
<ul>
<li>First set to 3, then 1.5 and then 6. Check which produces the highest torque and fine-tune to find the highest torque produced</li>
</ul>
</li>
</ul>
<p><img src="./media-en/slip_gain.png" alt="" /></p>
<blockquote>
<p>SlipGain on CIT Programmer</p>
</blockquote>
<p>Curtis documentation tells more detailed how to configure the Slip Gain.</p>
<h3 id="base-speed-configuration"><a class="header" href="#base-speed-configuration">Base speed configuration</a></h3>
<p>Base speed needs to be set up in order to utilize the motor controllers for driving. The following steps need to be executed.</p>
<ul>
<li>
<p>Open Programmer in CIT software:</p>
<ul>
<li>Motor Setup » Induction Motor » Field Weakening
<ul>
<li>Set FW Base Speed to 6000</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Run the vehicle with very high acceleration. Controller will calculate the base speed itself and will inform the Base Speed Captured</p>
</li>
<li>
<p>Do the same test 5 times. Take the average Base Speed Captured</p>
</li>
<li>
<p>Set the FW Base Speed to the average calculated value</p>
</li>
</ul>
<p><img src="./media-en/base_speed.png" alt="" /></p>
<blockquote>
<p>Base Speed setup on CIT Programmer</p>
</blockquote>
<p>Curtis documentation tells more detailed how to configure the Base Speed.</p>
<h3 id="node-ids-of-the-motor-controller"><a class="header" href="#node-ids-of-the-motor-controller">Node Ids of the motor controller</a></h3>
<p>Node Id:s should be configured in following way:</p>
<ul>
<li>Two-channel motor controllers should have consecutive node ids, where channel 1 has the lower Id and channel 2 the larger.
For instance, if node Id of M1 (channel 1) is 0x27, then node Id of M2 (channel 2) is 0x28.</li>
</ul>
<h2 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h2>
<h3 id="can-bus-errors"><a class="header" href="#can-bus-errors">CAN-bus errors</a></h3>
<ul>
<li><a href="../../GenericInterfaces/CanCommunication/CanCommunication-en.html#troubleshooting-can-communication">Troubleshooting CAN communication</a></li>
</ul>
<h3 id="motor-controller-issues"><a class="header" href="#motor-controller-issues">Motor controller issues</a></h3>
<p>If the motor controller indicates some errors, try the following:</p>
<ul>
<li>
<p>If the motor controller is not rotated, check Navitrol terminal output or Navitrol Monitor errors or warnings. There should be some information about motor controller status and error if something is wrong.</p>
</li>
<li>
<p>If an error is active and does not reset after controller reboot, connect to the Motor controller with Curtis Integrated Toolkit to troubleshoot further.</p>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="../../../AgvInterfaces/MotorControllers/Schwarzmueller/SchwarzmuellerTroubleshooting/SchwarzmuellerTroubleshooting-en.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="../../../AgvInterfaces/MotorControllers/Engel/EngelMotorController-en.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="../../../AgvInterfaces/MotorControllers/Schwarzmueller/SchwarzmuellerTroubleshooting/SchwarzmuellerTroubleshooting-en.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="../../../AgvInterfaces/MotorControllers/Engel/EngelMotorController-en.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="../../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="../../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
