<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Nanotec - NAVITROL USER INSTRUCTIONS - Navitec Systems Oy CONFIDENTIAL</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="../../../favicon.svg">
                        <link rel="shortcut icon" href="../../../favicon.png">
                <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
                <link rel="stylesheet" href="../../../css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="../../../fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
                <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../../MdBook/MdbookFrontPage.html">Front page</a></li><li class="chapter-item expanded affix "><li class="part-title">Introduction</li><li class="chapter-item expanded "><a href="../../../Introduction/NavitrolUserInstructions/NavitrolUserInstructions-en.html"><strong aria-hidden="true">1.</strong> Navitrol user instructions</a></li><li class="chapter-item expanded "><a href="../../../Introduction/Licensing/Licensing-en.html"><strong aria-hidden="true">2.</strong> Licensing</a></li><li class="chapter-item expanded "><a href="../../../Introduction/OdometrySource/OdometrySource-en.html"><strong aria-hidden="true">3.</strong> Odometry source</a></li><li class="chapter-item expanded "><a href="../../../Introduction/InitialCalibrationGuide/InitialCalibrationGuide-en.html"><strong aria-hidden="true">4.</strong> Initial calibration guide</a></li><li class="chapter-item expanded "><a href="../../../Miscellaneous/ParameterReconfiguration/ParameterReconfiguration-en.html"><strong aria-hidden="true">5.</strong> Parameter reconfiguration</a></li><li class="chapter-item expanded "><a href="../../../Introduction/Parameters/Parameters.html"><strong aria-hidden="true">6.</strong> Parameter listing</a></li><li class="chapter-item expanded "><a href="../../../Introduction/Parameters/JsonConfigurationFile-en.html"><strong aria-hidden="true">7.</strong> JSON configuration file</a></li><li class="chapter-item expanded "><a href="../../../Introduction/TeachingInstructions/TeachingInstructions-en.html"><strong aria-hidden="true">8.</strong> Teaching instructions</a></li><li class="chapter-item expanded "><a href="../../../Introduction/FeatureMatrix/FeatureMatrix-en.html"><strong aria-hidden="true">9.</strong> Feature Matrix</a></li><li class="chapter-item expanded affix "><li class="part-title">Device interfaces</li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/SupportedDevices/SupportedDevices-en.html"><strong aria-hidden="true">10.</strong> Supported devices</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/GenericInterfaces/GenericInterfacesHeading.html"><strong aria-hidden="true">11.</strong> Generic interfaces</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../AgvInterfaces/GenericInterfaces/EthernetSupervisorInterface/EthernetSupervisorInterface-en.html"><strong aria-hidden="true">11.1.</strong> Ethernet Supervisor</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/GenericInterfaces/CanCommunication/CanCommunication-en.html"><strong aria-hidden="true">11.2.</strong> CAN communication</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../AgvInterfaces/GenericInterfaces/CanSupervisorInterface/CanSupervisorInterface-en.html"><strong aria-hidden="true">11.2.1.</strong> CAN Supervisor</a></li></ol></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/GenericInterfaces/EthercatCommunication/EthercatCommunication-en.html"><strong aria-hidden="true">11.3.</strong> EtherCAT Communication</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/GenericInterfaces/Simove/SimoveInterface-en.html"><strong aria-hidden="true">11.4.</strong> SIMOVE</a></li></ol></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/MotorControllersHeading.html"><strong aria-hidden="true">12.</strong> Motor controllers</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/MotorControllersCommon/MotorControllersCommon-en.html"><strong aria-hidden="true">12.1.</strong> Motor controller common</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/Schwarzmueller/SchwarzmuellerSetupInstructions/SchwarzmuellerSetupInstructions-en.html"><strong aria-hidden="true">12.2.</strong> Schwarzmueller setup</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/Schwarzmueller/SchwarzmuellerParameterSetupInstructions/SchwarzmuellerParameterSetupInstructions-en.html"><strong aria-hidden="true">12.2.1.</strong> Schwarzmueller parameters</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/Schwarzmueller/SchwarzmuellerTroubleshooting/SchwarzmuellerTroubleshooting-en.html"><strong aria-hidden="true">12.2.2.</strong> Schwarzmueller troubleshooting</a></li></ol></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/Curtis/CurtisMotorController-en.html"><strong aria-hidden="true">12.3.</strong> Curtis</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/Engel/EngelMotorController-en.html"><strong aria-hidden="true">12.4.</strong> Engel</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/Kinco/KincoMotorController-en.html"><strong aria-hidden="true">12.5.</strong> Kinco</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/Nanotec/NanotecMotorController-en.html" class="active"><strong aria-hidden="true">12.6.</strong> Nanotec</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/Oriental/OrientalMotorController-en.html"><strong aria-hidden="true">12.7.</strong> Oriental</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/Synapticon/SynapticonMotorController-en.html"><strong aria-hidden="true">12.8.</strong> Synapticon</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/Roboteq/RoboteqOpenLoopControllerConfiguration-en.html"><strong aria-hidden="true">12.9.</strong> Roboteq Open loop</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/Roboteq/RoboteqClosedLoopControllerConfiguration-en.html"><strong aria-hidden="true">12.10.</strong> Roboteq Closed loop</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/MotorControllers/MiControl/MiControlMotorController-en.html"><strong aria-hidden="true">12.11.</strong> MiControl</a></li></ol></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/ScannerConfigurations/ScannerHeading.html"><strong aria-hidden="true">13.</strong> Laser scanners</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../AgvInterfaces/ScannerConfigurations/ScannerConfigurations-en.html"><strong aria-hidden="true">13.1.</strong> Scanner configurations</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/ScannerCommunicationTroubleshoot/ScannerCommunicationTroubleshoot-en.html"><strong aria-hidden="true">13.2.</strong> Scanner communication troubleshooting</a></li></ol></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/OpticalCodeReader/OpticalCodeReader.html"><strong aria-hidden="true">14.</strong> Optical code reader</a></li><li class="chapter-item expanded "><a href="../../../AgvInterfaces/Encoders/EncoderHeading.html"><strong aria-hidden="true">15.</strong> Encoders</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../AgvInterfaces/Encoders/EthercatEncoders/EthercatEncoders-en.html"><strong aria-hidden="true">15.1.</strong> EtherCAT encoders</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">User interfaces</li><li class="chapter-item expanded "><a href="../../../CustomerUis/NavitrolMonitor/NavitrolMonitor-en.html"><strong aria-hidden="true">16.</strong> Navitrol Monitor</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../CustomerUis/NavitrolMonitor3rdPartyLicenses/NavitrolMonitor3rdPartyLicenses-en.html"><strong aria-hidden="true">16.1.</strong> Navitrol Monitor third party licenses</a></li></ol></li><li class="chapter-item expanded "><a href="../../../CustomerUis/WebInterface/WebInterface-en.html"><strong aria-hidden="true">17.</strong> Navitrol web interface</a></li><li class="chapter-item expanded "><a href="../../../CustomerUis/Parameter Tool/ParameterTool-en.html"><strong aria-hidden="true">18.</strong> Parameter Tool Beta</a></li><li class="chapter-item expanded affix "><li class="part-title">Localization</li><li class="chapter-item expanded "><a href="../../../Localization/PositionConfidence/PositionConfidence-en.html"><strong aria-hidden="true">19.</strong> Position confidence</a></li><li class="chapter-item expanded "><a href="../../../Localization/ScannerCalibration/ScannerCalibration-en.html"><strong aria-hidden="true">20.</strong> Scanner calibration</a></li><li class="chapter-item expanded "><a href="../../../Localization/EnvironmentGuidelines/EnvironmentGuidelines-en.html"><strong aria-hidden="true">21.</strong> Environment guidelines</a></li><li class="chapter-item expanded "><a href="../../../Localization/AutomaticOdometryCorrection/AutomaticOdometryCorrection-en.html"><strong aria-hidden="true">22.</strong> Automatic odometry correction</a></li><li class="chapter-item expanded "><a href="../../../Localization/ReflectorBasedPositionInitialization/ReflectorBasedPositionInitialization-en.html"><strong aria-hidden="true">23.</strong> Reflector based position initialization</a></li><li class="chapter-item expanded "><a href="../../../Localization/PrecisionPositioning/PrecisionPositioning-en.html"><strong aria-hidden="true">24.</strong> Precision positioning</a></li><li class="chapter-item expanded "><a href="../../../Localization/LocalizationScannerChangeOnTheFly/LocalizationScannerChangeOnTheFly-en.html"><strong aria-hidden="true">25.</strong> Changing scanner on the fly</a></li><li class="chapter-item expanded "><a href="../../../Localization/RampZones/RampZones-en.html"><strong aria-hidden="true">26.</strong> Ramp zones</a></li><li class="chapter-item expanded "><a href="../../../Localization/GpsPositioning/GpsPositioning-en.html"><strong aria-hidden="true">27.</strong> GPS Positioning</a></li><li class="chapter-item expanded "><a href="../../../Localization/ImuAndSensorFusion/ImuAndSensorFusion-en.html"><strong aria-hidden="true">28.</strong> IMU and sensor fusion</a></li><li class="chapter-item expanded "><a href="../../../Localization/ExternalLocalization/ExternalLocalization-en.html"><strong aria-hidden="true">29.</strong> External localization</a></li><li class="chapter-item expanded "><a href="../../../Localization/DynamicMapping/DynamicMappingServer/DynamicMappingServer-en.html"><strong aria-hidden="true">30.</strong> Dynamic mapping server</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../Localization/DynamicMapping/DynamicMappingServerAndClientCompatibility/DynamicMappingServerAndClientCompatibility-en.html"><strong aria-hidden="true">30.1.</strong> Dynamic mapping client/server compatibility</a></li><li class="chapter-item expanded "><a href="../../../Localization/DynamicMapping/DynamicMappingServerHardwareRequirements/DynamicMappingServerHardwareRequirements.html"><strong aria-hidden="true">30.2.</strong> Dynamic mapping client/server hardware requirements</a></li></ol></li><li class="chapter-item expanded "><a href="../../../Localization/WheelSlipping/WheelSlipping-en.html"><strong aria-hidden="true">31.</strong> Wheel slipping diagnostic</a></li><li class="chapter-item expanded "><a href="../../../Localization/3dPositioning/3dPositioning-en.html"><strong aria-hidden="true">32.</strong> 3D positioning</a></li><li class="chapter-item expanded affix "><li class="part-title">Position control</li><li class="chapter-item expanded "><a href="../../../PositionControl/StartOffsetSlowdown/StartOffsetSlowdown-en.html"><strong aria-hidden="true">33.</strong> Start offset slowdown</a></li><li class="chapter-item expanded "><a href="../../../PositionControl/CoupledDriving/CoupledDrivingFeature-en.html"><strong aria-hidden="true">34.</strong> Coupled driving</a></li><li class="chapter-item expanded "><a href="../../../PositionControl/MagneticLineFollowing/MagneticLineFollowing-en.html"><strong aria-hidden="true">35.</strong> Magnetic line following</a></li><li class="chapter-item expanded "><a href="../../../PositionControl/TrailerTransport/TrailerTransport-en.html"><strong aria-hidden="true">36.</strong> Trailer transport</a></li><li class="chapter-item expanded "><a href="../../../PositionControl/BarrierStop/BarrierStop-en.html"><strong aria-hidden="true">37.</strong> Barrier stop</a></li><li class="chapter-item expanded "><a href="../../../PositionControl/DataMatrixDocking/DataMatrixDockingDMC-en.html"><strong aria-hidden="true">38.</strong> Data Matrix Code Docking V2</a></li><li class="chapter-item expanded "><a href="../../../PositionControl/Docking/Docking-en.html"><strong aria-hidden="true">39.</strong> Docking</a></li><li class="chapter-item expanded affix "><li class="part-title">Drive control</li><li class="chapter-item expanded "><a href="../../../DriveControl/DrivingOptions/DrivingOptions-en.html"><strong aria-hidden="true">40.</strong> Driving options</a></li><li class="chapter-item expanded "><a href="../../../DriveControl/Standalone/Standalone-en.html"><strong aria-hidden="true">41.</strong> Standalone</a></li><li class="chapter-item expanded "><a href="../../../DriveControl/StopAndHold/StopAndHold-en.html"><strong aria-hidden="true">42.</strong> Stop-and-hold</a></li><li class="chapter-item expanded "><a href="../../../DriveControl/VDA5050/VDA5050-en.html"><strong aria-hidden="true">43.</strong> VDA 5050</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../DriveControl/VDA5050/VDA5050FeatureMatrix-en.html"><strong aria-hidden="true">43.1.</strong> VDA 5050 Support status</a></li></ol></li><li class="chapter-item expanded "><a href="../../../DriveControl/ReturnToRoute/ReturnToRoute-en.html"><strong aria-hidden="true">44.</strong> Return to route</a></li><li class="chapter-item expanded "><a href="../../../DriveControl/ObstacleAvoidance/ObstacleAvoidance-en.html"><strong aria-hidden="true">45.</strong> Obstacle avoidance</a></li><li class="chapter-item expanded "><a href="../../../DriveControl/ObstacleAvoidanceV2/ObstacleAvoidanceV2-en.html"><strong aria-hidden="true">46.</strong> Obstacle avoidance V2</a></li><li class="chapter-item expanded "><a href="../../../DriveControl/ContainerDriving/ContainerDriving-en.html"><strong aria-hidden="true">47.</strong> Container driving</a></li><li class="chapter-item expanded "><a href="../../../DriveControl/RecordAndPlay/RecordAndPlay-en.html"><strong aria-hidden="true">48.</strong> Record and Play</a></li><li class="chapter-item expanded "><a href="../../../DriveControl/RouteFreeNavigation/RouteFreeNavigation-en.html"><strong aria-hidden="true">49.</strong> Route free navigation</a></li><li class="chapter-item expanded affix "><li class="part-title">Kinematics</li><li class="chapter-item expanded "><a href="../../../Kinematics/OmniSteerLimit/OmniSteerLimit-en.html"><strong aria-hidden="true">50.</strong> Omni steer limit</a></li><li class="chapter-item expanded "><a href="../../../Kinematics/OneDriveWheelOmni/OneDriveWheelOmni-en.html"><strong aria-hidden="true">51.</strong> Omni one drive wheel</a></li><li class="chapter-item expanded affix "><li class="part-title">Pickup and drop-off</li><li class="chapter-item expanded "><a href="../../../LoadHandling/ActuatorControl/ActuatorControl-en.html"><strong aria-hidden="true">52.</strong> Actuator control</a></li><li class="chapter-item expanded "><a href="../../../LoadHandling/ScannerLiftActuator/ScannerLiftActuator-en.html"><strong aria-hidden="true">53.</strong> Scanner lift actuator</a></li><li class="chapter-item expanded "><a href="../../../LoadHandling/Racking/Racking-en.html"><strong aria-hidden="true">54.</strong> Racking</a></li><li class="chapter-item expanded "><a href="../../../LoadHandling/BufferLanes/BufferLanes-en.html"><strong aria-hidden="true">55.</strong> Buffer lanes</a></li><li class="chapter-item expanded "><a href="../../../LoadHandling/StackLoading/StackLoading-en.html"><strong aria-hidden="true">56.</strong> Loading from a stack</a></li><li class="chapter-item expanded "><a href="../../../LoadHandling/BlockStacking/BlockStacking-en.html"><strong aria-hidden="true">57.</strong> Unloading to a stack</a></li><li class="chapter-item expanded "><a href="../../../LoadHandling/DistanceToTarget/DistanceToTarget-en.html"><strong aria-hidden="true">58.</strong> Distance to target estimation</a></li><li class="chapter-item expanded affix "><li class="part-title">Target and obstacle detection</li><li class="chapter-item expanded "><a href="../../../TargetAndObstacleDetection/PalletDetection/PalletDetection-en.html"><strong aria-hidden="true">59.</strong> Pallet detection</a></li><li class="chapter-item expanded "><a href="../../../TargetAndObstacleDetection/3dTargetDetection/3dTargetDetection-en.html"><strong aria-hidden="true">60.</strong> 3D Target detection</a></li><li class="chapter-item expanded "><a href="../../../TargetAndObstacleDetection/PatternDetection/PatternDetection-en.html"><strong aria-hidden="true">61.</strong> Pattern detection</a></li><li class="chapter-item expanded "><a href="../../../TargetAndObstacleDetection/ObstacleDetection/ObstacleDetection-en.html"><strong aria-hidden="true">62.</strong> Obstacle detection</a></li><li class="chapter-item expanded "><a href="../../../TargetAndObstacleDetection/ExternalTargetDetection/ExternalTargetDetection-en.html"><strong aria-hidden="true">63.</strong> External target detection</a></li><li class="chapter-item expanded "><a href="../../../TargetAndObstacleDetection/TableDetection/TableDetection-en.html"><strong aria-hidden="true">64.</strong> Table detection</a></li><li class="chapter-item expanded "><a href="../../../TargetAndObstacleDetection/Wallmonitoring/Wallmonitoring-en.html"><strong aria-hidden="true">65.</strong> Wall monitoring</a></li><li class="chapter-item expanded "><a href="../../../TargetAndObstacleDetection/OccupancyCheck/OccupancyCheck-en.html"><strong aria-hidden="true">66.</strong> Occupancy check</a></li><li class="chapter-item expanded affix "><li class="part-title">Miscellaneous</li><li class="chapter-item expanded "><a href="../../../Miscellaneous/ErrorDescriptions/ErrorDescriptions-en.html"><strong aria-hidden="true">67.</strong> Error descriptions</a></li><li class="chapter-item expanded "><a href="../../../Miscellaneous/Logging/Logging-en.html"><strong aria-hidden="true">68.</strong> Logging</a></li><li class="chapter-item expanded "><a href="../../../Miscellaneous/LinuxImageInstallation/LinuxImagesHeading.html"><strong aria-hidden="true">69.</strong> Linux image installation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../Miscellaneous/LinuxImageInstallation/CanDrivers/CanDrivers-en.html"><strong aria-hidden="true">69.1.</strong> CAN drivers</a></li><li class="chapter-item expanded "><a href="../../../Miscellaneous/LinuxImageInstallation/Clonezilla/ClonezillaInstallation-en.html"><strong aria-hidden="true">69.2.</strong> Clonezilla</a></li><li class="chapter-item expanded "><a href="../../../Miscellaneous/LinuxImageInstallation/DebianBuster/DebianBusterInstallation-en.html"><strong aria-hidden="true">69.3.</strong> Debian Buster</a></li><li class="chapter-item expanded "><a href="../../../Miscellaneous/LinuxImageInstallation/DebianBullseye/DebianBullseyeInstallation-en.html"><strong aria-hidden="true">69.4.</strong> Debian Bullseye</a></li></ol></li><li class="chapter-item expanded "><a href="../../../Miscellaneous/ParameterZones/ParameterZones-en.html"><strong aria-hidden="true">70.</strong> Parameter zones</a></li><li class="chapter-item expanded "><a href="../../../Miscellaneous/Reflectors/Reflectors-en.html"><strong aria-hidden="true">71.</strong> Reflectors</a></li><li class="chapter-item expanded "><a href="../../../Miscellaneous/SslCertificates/SslCertificates-en.html"><strong aria-hidden="true">72.</strong> SSL Certificate configuration</a></li><li class="chapter-item expanded "><a href="../../../Miscellaneous/BatteryOvertemperatureActions/BatteryOvertemperatureActions.html"><strong aria-hidden="true">73.</strong> Battery overtemperature actions</a></li><li class="chapter-item expanded "><a href="../../../Miscellaneous/Charging/Charging-en.html"><strong aria-hidden="true">74.</strong> Charging and battery management</a></li><li class="chapter-item expanded "><a href="../../../Miscellaneous/HardwareRequirements/HardwareRequirements-en.html"><strong aria-hidden="true">75.</strong> Hardware requirements</a></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="dark">Dark</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">NAVITROL USER INSTRUCTIONS - Navitec Systems Oy CONFIDENTIAL</h1>

                    <div class="right-buttons">
                                                <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="nanotec-can-motor-controller"><a class="header" href="#nanotec-can-motor-controller">Nanotec CAN motor controller</a></h1>
<p>Updated 26.06.2024</p>
<hr />
<h2 id="glossary"><a class="header" href="#glossary">Glossary</a></h2>
<table><thead><tr><th>Term</th><th>Description</th></tr></thead><tbody>
<tr><td>OD</td><td>Object Dictionary</td></tr>
<tr><td>SDO</td><td>Service Data Object</td></tr>
<tr><td>PDO</td><td>Process Data Object</td></tr>
<tr><td>NMT</td><td>Network Management</td></tr>
</tbody></table>
<hr />
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<h3 id="introduction"><a class="header" href="#introduction">Introduction</a></h3>
<p>Nanotec motor controller is one of the motor controllers supported by Navitrol. Nanotec offers single channel motor controllers that can be used for different purposes (steering, driving, actuator) in the AGV.</p>
<p>This document provides instructions for configuring the motor controllers to be compatible with Navitrol.</p>
<h3 id="requirements"><a class="header" href="#requirements">Requirements</a></h3>
<p><strong>Hardware:</strong></p>
<ul>
<li>Supported motor controller (<a href="../../SupportedDevices/SupportedDevices-en.html">List of supported devices</a> document should be checked)</li>
<li>Connectors for wiring (or alternatively Nanotec cables with connectors). Without the connectors, it is not possible to wire the motor controller. Types and number of connectors can be found from the Technical Manual for the motor controller.</li>
<li>Adapter for connecting the motor controller to PC. IXXAT or PEAK is required by the Nanotec Plug &amp; Drive Studio software. It is recommended to check compatible CAN adapter versions from <a href="https://en.nanotec.com/fileadmin/files/Software/Plug_Drive_Studio/Quick_start_guide_2.1.7.pdf">Plug &amp; Drive Studio Quick Start Guide</a>.</li>
</ul>
<p><strong>Software</strong></p>
<ul>
<li>In order to change motor controller parameters conveniently, <a href="https://en.nanotec.com/products/2533-plug-drive-studio-2">Plug &amp; Drive Studio 2</a> is recommended for use. Check <a href="https://en.nanotec.com/fileadmin/files/Software/Plug_Drive_Studio/Quick_start_guide_2.1.7.pdf">Plug &amp; Drive Studio Quick Start Guide</a> to get familiar with the software.</li>
<li>Drivers and monitoring software for CAN analyzers according to <a href="https://en.nanotec.com/fileadmin/files/Software/Plug_Drive_Studio/Quick_start_guide_2.1.7.pdf">Plug &amp; Drive Studio Quick Start Guide</a>.</li>
</ul>
<p><strong>Documentation</strong> </p>
<ul>
<li>Technical manual for the motor controller. It contains dimensions, wiring instructions and pinout. Additionally, it contains the commissioning instructions and the SDO object dictionary. 
Technical manual depends on the motor controller type and can be found on the Nanotec official site. There are known differences between the firmware versions, therefore it is recommended to <strong>check that the technical manual is compatible with the motor controller's firmware version</strong></li>
</ul>
<h3 id="limitations"><a class="header" href="#limitations">Limitations</a></h3>
<ul>
<li><strong>Motor controller might not support all functions (steering, driving, actuating) and kinematics</strong>. <a href="../../SupportedDevices/SupportedDevices-en.html">List of supported devices</a> document should be checked to determine whether the combination of the function and kinematics is supported or not.</li>
<li>Currently, it is not possible to use Nanotec motor controller with other motor controllers in the same AGV</li>
</ul>
<h3 id="dependencies"><a class="header" href="#dependencies">Dependencies</a></h3>
<p>This feature is dependent on CAN interface. Therefore, it is recommended to check <a href="../../GenericInterfaces/CanCommunication/CanCommunication-en.html">CAN communication</a> document.</p>
<hr />
<h2 id="electrical-connections"><a class="header" href="#electrical-connections">Electrical connections</a></h2>
<p>Electrical connections must be done according to the Nanotec technical manual. The connections might vary depending on the motor controller model and user should refer to <a href="https://en.nanotec.com/downloads/manualsdatasheets">Nanotec motor controller technical manual</a>.</p>
<p><strong>Safety system connection</strong></p>
<p>Since Nanotec motor controller does not have STO (Safe Torque Off) feature, safety system has to cut power from the motor/motor controller. 
However, there is a functionality that allows to stop the motor controller using digital inputs.
This approach is not safety rated and therefore not recommended for use. This can be used only for prototyping at user's own risk.<br />
In order to enable this stopping functionality, connect digital input 1 and 2 to the AGV:s stop button. Note that both inputs are NC - meaning that they should be powered in normal situation and power should be removed to stop the AGV.</p>
<hr />
<h2 id="quick-setup"><a class="header" href="#quick-setup">Quick setup</a></h2>
<p>The following steps should be done during commissioning:</p>
<h4 id="step-1-option-1-nanotec-plug--drive-studio-easy-commissioning"><a class="header" href="#step-1-option-1-nanotec-plug--drive-studio-easy-commissioning">Step 1 (Option 1): Nanotec Plug &amp; Drive Studio Easy Commissioning</a></h4>
<ul>
<li><a href="#controller-switch-and-can-bus-configuration">Controller switch and CAN-bus configuration</a></li>
<li><a href="#change-node-id-and-baud-rate">Change Node-ID and baud rate with Plug &amp; Drive</a></li>
<li><a href="#change-od-objects-and-execute-auto-setup">Change OD-objects and execute Auto-Setup</a></li>
</ul>
<h4 id="step-1-option-2-general-can-analyzer-commissioning"><a class="header" href="#step-1-option-2-general-can-analyzer-commissioning">Step 1 (Option 2): General CAN-analyzer Commissioning</a></h4>
<p>If you do not have Plug &amp; Drive studio compatible adapter, the commissioning needs to be done by using CAN analyzer.</p>
<ul>
<li><a href="#controller-switch-configuration">Controller switch Configuration</a> </li>
<li><a href="#change-node-id-and-baud-rate-with-can-analyzer">Changing Node-ID and baud rate with CAN-analyzer</a></li>
<li><a href="#auto-setup-for-controller-tuning-with-can-analyzer">Auto-Setup for controller tuning with CAN-analyzer</a></li>
</ul>
<h4 id="step-2"><a class="header" href="#step-2">Step 2</a></h4>
<p>After the Auto-Setup has been done succesfully for all of the motor controllers, proceed to:</p>
<ul>
<li><a href="#navitrol-parameterization-and-controller-tuning">Navitrol parameterization and controller tuning</a></li>
</ul>
<hr />
<p><strong>Required parameters</strong></p>
<table><thead><tr><th>Name</th><th>Type</th><th>Default value</th><th>Description</th></tr></thead><tbody>
<tr><td>mot_ctrl_nanotec_p_gain</td><td>Int</td><td>60000</td><td>Nanotec motor controllers internal P-gain; min 1, max 270000</td></tr>
<tr><td>can_sync</td><td>Int</td><td>1</td><td>Navigation SW (Primary CAN) role for CANOpen SYNC messages: 0 = None, 1 = SYNC producer, 2 = SYNC consumer</td></tr>
<tr><td>mot_ctrl_nanotec_p_gain</td><td>Int</td><td>500</td><td>Nanotec motor controllers internal I-gain; min 1, max 10000</td></tr>
<tr><td><strong>Differential AGV</strong></td><td></td><td></td><td></td></tr>
<tr><td>can_diff_drive_left_nodeid</td><td>Int</td><td>30</td><td>Node-ID for diff drive left motor controller</td></tr>
<tr><td>can_diff_drive_right_nodeid</td><td>Int</td><td>31</td><td>Node-ID for diff drive right motor controller</td></tr>
<tr><td><strong>Mecanum AGV</strong></td><td></td><td></td><td></td></tr>
<tr><td>mot_ctrl_mecanum_nodeid[]</td><td>Int</td><td>0</td><td>CANopen Node-ID. 0 - not defined, Indexes are 0 = FF (Forward Left), 1 = FR (Forward Right), 2 = RL (Rear Left), 3 = RR (Rear Right)</td></tr>
</tbody></table>
<hr />
<h3 id="fine-tuning"><a class="header" href="#fine-tuning">Fine-tuning</a></h3>
<ul>
<li>If needed, the warning for E-STOP can be enabled from the motor controller using the <strong>nanotec_emergency_stop_IO_enabled</strong> parameter</li>
<li>Automatic error reset can be disabled using <strong>mot_ctrl_reset_errors_timer</strong>.</li>
</ul>
<p><strong>Optional parameters</strong></p>
<table><thead><tr><th>Name</th><th>Type</th><th>Default value</th><th>Description</th></tr></thead><tbody>
<tr><td>nanotec_emergency_stop_IO_enabled</td><td>Int</td><td>0</td><td>Activates Nanotec E-STOP check. </br> Emergency stop activation comes from digital input 1 and 2 on the motor controller</td></tr>
<tr><td>mot_ctrl_reset_errors_timer</td><td>Int</td><td>500</td><td>After the defined time (ms) Navitrol tries automatically reset motor control faults. Value 0 = fault reset disabled</td></tr>
</tbody></table>
<hr />
<h2 id="nanotec-plug--drive-studio-easy-commissioning"><a class="header" href="#nanotec-plug--drive-studio-easy-commissioning">Nanotec Plug &amp; Drive Studio Easy Commissioning</a></h2>
<p>Nanotec offers Plug &amp; Drive studio 2 (https://en.nanotec.com/products/2533-plug-drive-studio-2) for easy commissioning. However, only Ixxat and PEAK CAN-adapters are supported by Plug &amp; Drive Studio.</p>
<h3 id="controller-switch-and-can-bus-configuration"><a class="header" href="#controller-switch-and-can-bus-configuration">Controller switch and CAN-bus configuration</a></h3>
<p>Turn the rotary switches on the controllers so that they point to values 1, 2, 3 and 4. If you have only 2 controllers, use values 1 and 2. The Node-ID of the motor controller will be the same is the value on the rotary switch. The baud rate of the switch is fixed to 1000 MBd.</p>
<p>After the switches for all motor controller are turned accordingly, connect all motor controllers to the CAN-bus. Note that all controllers on the bus need to have different rotary switch value as the value of the rotary switch will be the initial Node-ID of the controller. Only rotary switch values 1-4 are allowed.</p>
<p><img src="./media-en/image4.png" alt="" /></p>
<blockquote>
<p>Set rotary switches to value 1, 2, 3 and 4</p>
</blockquote>
<p><img src="./media-en/image5.png" alt="" /></p>
<blockquote>
<p>Connector assignment - right one shows bottom switches, including rotary switch / Hex coding switch.</p>
</blockquote>
<p>When all controllers are connected to the CAN-bus, plug the CAN-adapter to the bus and open Plug &amp; Drive Studio.</p>
<h3 id="change-node-id-and-baud-rate"><a class="header" href="#change-node-id-and-baud-rate">Change Node-ID and baud rate</a></h3>
<ul>
<li>
<p>Download <a href="https://en.nanotec.com/products/2533-plug-drive-studio-2">Plug &amp; Drive Studio 2.1.7</a> and connect to the CAN-bus</p>
</li>
<li>
<p>Update the firmware ( For example PD4-Cx-E-08-FIR-v2213-B1031134) to all motor controllers.
<img src="./media-en/firmwareUpdate.png" alt="" /></p>
<blockquote>
<p>Update the firmware</p>
</blockquote>
</li>
<li>
<p>Change the Node-ID <br>
<img src="./media-en/NodeIDChange.png" alt="" /></p>
<blockquote>
<p>Change the Node-ID</p>
</blockquote>
</li>
<li>
<p>Change the baud rate. Recommended baud rate is 125 kbd. <br>
<img src="./media-en/baudRateChange.png" alt="" /></p>
<blockquote>
<p>Change the baud rate. 0x84 = 125 kbd, 0x85 = 250kbd, 0x86 = 500 kbd</p>
</blockquote>
</li>
<li>
<p>Go to the Setup Tab and click Save from Settings. Choose CanOpen configurations and click Save.</p>
<p><img src="./media-en/SaveToMotorControllers.png" alt="" /></p>
<blockquote>
<p>Save baud rate and Node-ID</p>
</blockquote>
</li>
<li>
<p>Repeat the same procedure for all motor controllers. For example configure the motor controllers to Node-ID:s 5, 6, 7 and 8.</p>
</li>
<li>
<p>After these settings are done, turn of the motor controllers and change rotary switches to value 8 for all motor controllers. Turn on the motor controllers back again.</p>
</li>
</ul>
<h3 id="change-od-objects-and-execute-auto-setup"><a class="header" href="#change-od-objects-and-execute-auto-setup">Change OD-objects and execute Auto-Setup</a></h3>
<ul>
<li>Connect controller with Plug &amp; Drive Studio. Choose CanOpen and baud rate is 125kBd. Click Scan.</li>
</ul>
<p><img src="./media-en/scanNodeIDs.png" alt="" />
&gt; Scan Node-ID:s</p>
<ul>
<li>
<p>After a successful scan, choose motor controller from a list. <br></p>
<p><img src="./media-en/scannedNodeIDList.png" alt="" /></p>
<blockquote>
<p>Node-ID List</p>
</blockquote>
</li>
<li>
<p>Change first OD 604C Subindex 2 to value 1 (VL Dimension Factor Denominator). This needs to be changed with newer firmware version.</p>
<p><img src="./media-en/dimensionfactordenominator.png" alt="" /></p>
<blockquote>
<p>Change VL Dimension Factor Denominator</p>
</blockquote>
</li>
<li>
<p>Click Setup from the navigation Tab and choose Auto-Setup.</p>
<p><strong>NOTE:</strong> <strong>the following prerequisites for performing the Auto-Setup</strong>:</p>
<ul>
<li>The motor must be load-free.</li>
<li>The motor must not be touched.</li>
<li>The motor must be able to turn freely in any direction.</li>
</ul>
</li>
</ul>
<br>
<ul>
<li>
<p>Start Auto-Setup. The motor will start to spin and make some noise. After Auto-Setup is completed, a pop-up window will show up to save Auto-Setup result. Click Save and restart.</p>
<p><img src="./media-en/startAutoSetup.png" alt="" /></p>
<blockquote>
<p>Start Auto-Setup</p>
</blockquote>
<p><img src="./media-en/acceptAutoSetup.png" alt="" /></p>
<blockquote>
<p>Accept and Save Auto-Setup result</p>
</blockquote>
</li>
</ul>
<p>Repeat the same procedure for all motor controllers. After Auto-Setup has been successfully completed for all motor controllers, proceed to <a href="#navitrol-parameterization-and-controller-tuning">Navitrol Parameterization and Controller tuning</a>.</p>
<h2 id="general-can-analyser-commissioning-option-2"><a class="header" href="#general-can-analyser-commissioning-option-2">General CAN-analyser commissioning (Option 2)</a></h2>
<p>If you do not have the possibility to use PEAK PCAN-USB adapter or Ixxat adapter, the commissioning needs to be done by using CAN analyzer. With this method each motor controller needs to be connected and configured separately on the bus.</p>
<h3 id="controller-switch-configuration"><a class="header" href="#controller-switch-configuration">Controller switch configuration</a></h3>
<ul>
<li>
<p>Connect the motor controller to your PC with a CAN-USB adapter.</p>
</li>
<li>
<p>Set the rotary switch to value &quot;1&quot; from the bottom of the motor controller</p>
</li>
<li>
<p><strong>NOTE:</strong> Next to the rotary switch is a DIP switch that activates 120-ohm resistor. A CAN-bus needs 120-ohm resistors on both ends of the bus</p>
</li>
</ul>
<p><img src="./media-en/image4.png" alt="" /></p>
<blockquote>
<p>Set rotary switch to value 1</p>
</blockquote>
<p><img src="./media-en/image5.png" alt="" /></p>
<blockquote>
<p>Connector assignment - right one shows bottom switches, including the rotary switch.</p>
</blockquote>
<h3 id="change-node-id-and-baud-rate-with-can-analyzer"><a class="header" href="#change-node-id-and-baud-rate-with-can-analyzer">Change Node-ID and baud rate with CAN-analyzer</a></h3>
<p>Turn the rotary switch so that it points to value &quot;1&quot;. Then the Node-ID is fixed to value &quot;1&quot; and the baud rate is permanently set to 1000 kBd.</p>
<p>To change the baud rate and Node-ID, you need to change object 2005:0h (baud rate) and 2009:0h (Node-ID). The changes in objects 2005h and 2009h must be stored by writing value 65766173h in object 1010h:2h. This can be done by following the sequence presented below in the table.</p>
<table><thead><tr><th>SEND/RESPONSE</th><th>COB ID (in hex 0x)</th><th>dlc</th><th>Data bytes (in hex 0x)</th><th>Description</th><th>Note</th></tr></thead><tbody>
<tr><td>SEND</td><td>601</td><td>8</td><td>22 09 20 00 NODEID 00 00 00</td><td>Define Node-ID (put desired Node-ID to NODEID)</td><td></td></tr>
<tr><td>RESPONSE</td><td>581</td><td>8</td><td>60 xx xx xx xx xx xx xx</td><td>SDO Response OK</td><td></td></tr>
<tr><td>SEND</td><td>601</td><td>8</td><td>22 05 20 00 <strong>84</strong> 00 00 00</td><td>SDO Upload request:<br>change baud rate to 125kbs<br>0x84 = 125 kbd, 0x85 = 250kbd, 0x86 = 500 kbd</td><td></td></tr>
<tr><td>RESPONSE</td><td>581</td><td>8</td><td>60 xx xx xx xx xx xx xx</td><td>Response OK</td><td></td></tr>
<tr><td>SEND</td><td>601</td><td>8</td><td>22 10 10 02 73 61 76 65</td><td>SDO Upload request:<br>Save all communication  parameters</td><td></td></tr>
</tbody></table>
<blockquote>
<p>Change Node-ID and baud rate with CAN-analyzer</p>
</blockquote>
<p><strong>After you have done these changes, turn off the motor controller and set the rotary switch to value &quot;8&quot;. When you turn the motor controller back on, the Node-ID and baud rate should be set to the values you just sent to the motor controller.</strong></p>
<h3 id="auto-setup-for-controller-tuning-with-can-analyzer"><a class="header" href="#auto-setup-for-controller-tuning-with-can-analyzer">Auto-Setup for controller tuning with CAN-analyzer</a></h3>
<p>To determine number of parameters related to the motor and the connected sensors (encoders/Hall sensors), an Auto-Setup is performed. <strong>Closed Loop</strong> operation requires a successfully completed Auto-Setup.</p>
<p><strong>NOTE:</strong> <strong>the following prerequisites for performing the Auto-Setup</strong>:</p>
<ul>
<li>The motor must be load-free.</li>
<li>The motor must not be touched.</li>
<li>The motor must be able to turn freely in any direction.</li>
</ul>
<p>To start the Auto-Setup do the following steps:</p>
<ol>
<li>Connect the motor controller to your PC with CAN-USB adapter and open CAN-analyzer.</li>
<li>Test that the interface works by sending SDO <em>40 41 60 00 00 00 00 00</em> to the controller.<br />
a. The controller should response with: <em>4B 41 60 00 XX XX 00 00</em>.</li>
<li>Then the Auto-Setup sequence has to be done next. Messages are in CANopen SDO-format. Follow the table below to complete the Auto-Setup.</li>
</ol>
<p><img src="./media-en/image6.png" alt="" /></p>
<blockquote>
<p>Ladder diagram of Auto-Setup sequence</p>
</blockquote>
<table><thead><tr><th>SEND/RESPONSE</th><th>COB ID (in hex 0x)</th><th>dlc</th><th>Data bytes (in hex 0x)</th><th>Description</th><th>Note</th></tr></thead><tbody>
<tr><td>SEND</td><td>0</td><td>2</td><td>80 00</td><td>NMT : Switch all nodes to pre-operational mode</td><td></td></tr>
<tr><td>RESPONSE</td><td>700 + Node-ID</td><td>2</td><td>7F</td><td>NMT response: Response OK</td><td></td></tr>
<tr><td>SEND</td><td>600 + Node-ID</td><td>8</td><td>22 40 60 00 06 00 00 00</td><td>SDO Upload request : enable voltage and disable quick stop</td><td></td></tr>
<tr><td>RESPONSE</td><td>580 + Node-ID</td><td>8</td><td>60 xx xx xx xx xx xx xx</td><td>Response OK</td><td>Â </td></tr>
<tr><td>SEND</td><td>600 + Node-ID</td><td>8</td><td>22 60 60 00 FE 00 00 00</td><td>SDO Upload request : Put operation mode to &quot;Auto Setup&quot;</td><td></td></tr>
<tr><td>RESPONSE</td><td>580 + Node-ID</td><td>8</td><td>60 xx xx xx xx xx xx xx</td><td>Response OK</td><td></td></tr>
<tr><td>SEND</td><td>600 + Node-ID</td><td>8</td><td>22 40 60 00 07 00 00 00</td><td>SDO Upload request : Switch on the controller</td><td></td></tr>
<tr><td>RESPONSE</td><td>580 + Node-ID</td><td>8</td><td>60 xx xx xx xx xx xx xx</td><td>Response OK</td><td></td></tr>
<tr><td>SEND</td><td>600 + Node-ID</td><td>8</td><td>22 40 60 00 0F 00 00 00</td><td>SDO Upload request: Enable Operation</td><td></td></tr>
<tr><td>RESPONSE</td><td>580 + Node-ID</td><td>8</td><td>60 xx xx xx xx xx xx xx</td><td>Response OK</td><td></td></tr>
<tr><td>SEND</td><td>600 + Node-ID</td><td>8</td><td>22 40 60 00 1F 00 00 00</td><td>SDO Upload request: Start &quot;Auto Setup executing&quot;</td><td>wait for 30-60 seconds!!!</td></tr>
<tr><td>RESPONSE</td><td>580 + Node-ID</td><td>8</td><td>60 xx xx xx xx xx xx xx</td><td>Response OK</td><td>wait for 30-60 seconds!!!</td></tr>
<tr><td>SEND</td><td>600 + Node-ID</td><td>8</td><td>22 40 60 00 00 00 00 00</td><td>SDO Upload request: Stop and finish</td><td></td></tr>
<tr><td>RESPONSE</td><td>580 + Node-ID</td><td>8</td><td>60 xx xx xx xx xx xx xx</td><td>Response OK</td><td></td></tr>
</tbody></table>
<blockquote>
<p>Auto-Setup sequence with CAN-analyzer</p>
</blockquote>
<p>After the Auto-Setup is done, restart the controller. The controller should
now be ready to be used.</p>
<h2 id="navitrol-parameterization-and-controller-tuning"><a class="header" href="#navitrol-parameterization-and-controller-tuning">Navitrol parameterization and controller tuning</a></h2>
<h3 id="node-id-and-can-bus-bitrate"><a class="header" href="#node-id-and-can-bus-bitrate">Node-ID and CAN bus bitrate</a></h3>
<p>Node-ID defines the address of the CANopen device and it must be in range from 1 to 127. In addition, the Node-ID has to be unique for each device on the CAN bus.</p>
<p>CAN bus bitrate (baud rate) is the communication speed. By following these instructions, this speed is set to 125Kbit/s for the motor controllers. The speed needs to be the same for Navitrol and motor controllers, otherwise the CAN bus communication will not work.</p>
<p>Every motor controller has a Node-ID. params.txt file has a parameter for each motor controller Node-ID and a parameter for Navitrol CAN bus bitrate. </p>
<p>First, set Node-ID to the corresponding parameter according to Table &quot;CAN Node-ID parameters for motor controllers&quot; in <a href="../../MotorControllers/MotorControllersCommon/MotorControllersCommon-en.html">Motor controllers common</a> document.</p>
<p>Set the communication parameters (<strong>can_ch</strong> and <strong>can_bitrate_k</strong>) according to <a href="../../GenericInterfaces/CanCommunication/CanCommunication-en.html">CAN communication</a> document.</p>
<table><thead><tr><th>Name</th><th>Type</th><th>Default value</th><th>Description</th></tr></thead><tbody>
<tr><td>can_bitrate_k</td><td>Int</td><td>125</td><td>Primary CAN bus bitrate in Kbit/s</td></tr>
<tr><td>can_ch</td><td>Int</td><td>0</td><td>Primary CAN channel number</td></tr>
<tr><td><strong>Differential AGV</strong></td><td></td><td></td><td></td></tr>
<tr><td>can_diff_drive_left_nodeid</td><td>Int</td><td>30</td><td>Node-ID for diff drive left motor controller</td></tr>
<tr><td>can_diff_drive_right_nodeid</td><td>Int</td><td>31</td><td>Node-ID for diff drive right motor controller</td></tr>
<tr><td><strong>Mecanum AGV</strong></td><td></td><td></td><td></td></tr>
<tr><td>mot_ctrl_mecanum_nodeid[]</td><td>Int</td><td>0</td><td>CANopen Node-ID. 0 - not defined, Indexes are 0 = FF (Forward Left), 1 = FR (Forward Right), 2 = RL (Rear Left), 3 = RR (Rear Right)</td></tr>
</tbody></table>
<h3 id="pi-controller-values-tuning"><a class="header" href="#pi-controller-values-tuning">PI-controller values tuning</a></h3>
<p>All Nanotec motor controllers have internal PI-controller. These controllers must be tuned. Rule of thumb instructions to find the optimum parameters are below (reference from Nanotec CANopen document).</p>
<p>1. You can increase the &quot;P&quot; value until the motor is starting to produce noise. Then reduce by half the value to get a good control loop setting.</p>
<p>2. If the motor is following the desired input parameter too slowly, increase the &quot;P&quot; value.</p>
<p>3. After finding a good &quot;P&quot; value, increase the &quot;I&quot; value to reduce the control error.</p>
<p>4. If the motor is producing overshoots after reaching the desired value, decrease the &quot;I&quot; value.</p>
<table><thead><tr><th>Name</th><th>Type</th><th>Default value</th><th>Description</th></tr></thead><tbody>
<tr><td>mot_ctrl_nanotec_p_gain</td><td>Int</td><td>60000</td><td>Nanotec motor controllers internal P-gain; min 1, max 270000</td></tr>
<tr><td>mot_ctrl_nanotec_i_gain</td><td>Int</td><td>500</td><td>Nanotec motor controller internal I-gain; min 1, max 10000</td></tr>
</tbody></table>
<h3 id="sdo-parameters-for-can-open"><a class="header" href="#sdo-parameters-for-can-open">SDO-parameters for CAN-open</a></h3>
<p>Navitrol configures a subset of Nanotec motor controller's SDO-parameters when Navitrol starts.
These configurations are sent as SDO-messages to the motor controllers.
The parameters for automatic SDO-configurations are presented below.</p>
<table><thead><tr><th>Name</th><th>Type</th><th>Default value</th><th>Description</th></tr></thead><tbody>
<tr><td>can_sdo_interval_ms</td><td>Int</td><td>30</td><td>SDO message interval [ms] used by Navitrol</td></tr>
<tr><td>can_sdo_timeout_ms</td><td>Int</td><td>20</td><td>SDO message response timeout [ms] used by Navitrol</td></tr>
</tbody></table>
<h2 id="extra-sdo-configurations"><a class="header" href="#extra-sdo-configurations">Extra SDO-configurations</a></h2>
<p>Nanotec motor controllers differ a bit depending on their firmware versions and motor controller models. Therefore, some extra SDO-configurations may be needed to make the motor controller work as expected. You can use either CAN Analyzer, Navitrol internal SDO-write configuration tools or Plug &amp; Drive Studio to change the configurations. Configurations are listed below.</p>
<table><thead><tr><th>Object Description</th><th>SubIndex</th><th>Value to Set in Hex</th><th>Motor Controller Type</th><th>Description</th><th>Note</th></tr></thead><tbody>
<tr><td>604C</td><td>2</td><td>1</td><td>PD2-C, PD4-C, PD6-C, N5</td><td>Dimension Factor Denominator</td><td>If motor controller uses firmware version FIR-v2139 or newer</td></tr>
<tr><td>3202</td><td>0</td><td>4 or 45</td><td>N5</td><td>Automatic brake control</td><td>- Value 45 with BLDC motors <br> - Value 4 otherwise</td></tr>
</tbody></table>
<h3 id="can-analyzer"><a class="header" href="#can-analyzer">CAN analyzer</a></h3>
<p>An example to change RPM scale using CAN-analyzer. The following messages needs to be sent to the motor controller (example Node-ID:s 5, 6, 7 and 8)</p>
<table><thead><tr><th>SEND/RESPONSE</th><th>COB ID (in hex 0x)</th><th>dlc</th><th>Data bytes (in hex 0x)</th><th>Description</th><th>Note</th></tr></thead><tbody>
<tr><td>SEND</td><td>605</td><td>8</td><td>22 4C 60 02 1 00 00 00</td><td>RPM scale 604Ch Subindex 2h: stock firmware value 3Ch</td><td></td></tr>
<tr><td>RESPONSE</td><td>585</td><td>8</td><td>60 xx xx xx xx xx xx xx</td><td>SDO Response OK</td><td></td></tr>
<tr><td>SEND</td><td>606</td><td>8</td><td>22 4C 60 02 1 00 00 00</td><td>RPM scale 604Ch Subindex 2h: stock firmware value 3Ch</td><td></td></tr>
<tr><td>RESPONSE</td><td>586</td><td>8</td><td>60 xx xx xx xx xx xx xx</td><td>SDO Response OK</td><td></td></tr>
<tr><td>SEND</td><td>607</td><td>8</td><td>22 4C 60 02 1 00 00 00</td><td>RPM scale 604Ch Subindex 2h: stock firmware value 3Ch</td><td></td></tr>
<tr><td>RESPONSE</td><td>587</td><td>8</td><td>60 xx xx xx xx xx xx xx</td><td>SDO Response OK</td><td></td></tr>
<tr><td>SEND</td><td>608</td><td>8</td><td>22 4C 60 02 1 00 00 00</td><td>RPM scale 604Ch Subindex 2h: stock firmware value 3Ch</td><td></td></tr>
<tr><td>RESPONSE</td><td>588</td><td>8</td><td>60 xx xx xx xx xx xx xx</td><td>SDO Response OK</td><td></td></tr>
</tbody></table>
<p>Table 1: Change RPM scale with CAN-analyzer</p>
<h3 id="navitrol-sdo-write"><a class="header" href="#navitrol-sdo-write">Navitrol SDO write</a></h3>
<p>Another option to change the SDO-configurations is to write the SDO-configurations with sdo_write.txt file. Add first a parameter:</p>
<table><thead><tr><th>Name</th><th>Type</th><th>Required value</th><th>Description</th></tr></thead><tbody>
<tr><td>can_sdo_write_from_file</td><td>Int</td><td>1</td><td>0 - no SDO writes from file, 1 - write content from sdo_write.txt</td></tr>
</tbody></table>
<p>Then add <em>sdo_write.txt</em> file to <em>/home/navitec</em> folder with the SDO configuration content. Example below:</p>
<pre><code># This sdo_write.txt configuration file overrides RPM dimension scale
# Node 5 - 8
# WRITE,Node-ID,dataType,index.subIndex,value

WRITE,5,I32,0x604C.2,0x0001 # RPM scale 604Ch Subindex 2h: stock firmware value 3Ch, latest firmware value 01h

WRITE,6,I32,0x604C.2,0x0001 # RPM scale 604Ch Subindex 2h: stock firmware value 3Ch, latest firmware value 01h

WRITE,7,I32,0x604C.2,0x0001 # RPM scale 604Ch Subindex 2h: stock firmware value 3Ch, latest firmware value 01h

WRITE,8,I32,0x604C.2,0x0001 # RPM scale 604Ch Subindex 2h: stock firmware value 3Ch, latest firmware value 01h
</code></pre>
<h2 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h2>
<h3 id="nanotec-sdo-errors"><a class="header" href="#nanotec-sdo-errors">Nanotec SDO errors</a></h3>
<p>Nanotec SDO errors might occur if something was done incorrectly during the commissioning. The list of SDO errors can be found from <a href="https://en.nanotec.com/fileadmin/files/Handbuecher/Handbuecher_Archiv/Plug_Drive/PD4C_CANopen_Technical-Manual_V2.0.1.pdf">Nanotec PD4-C Technical manual</a>, page 102.</p>
<p><img src="./media-en/image7.png" alt="" /></p>
<blockquote>
<p><a href="https://en.nanotec.com/fileadmin/files/Handbuecher/Handbuecher_Archiv/Plug_Drive/PD4C_CANopen_Technical-Manual_V2.0.1.pdf">Nanotec SDO errors</a></p>
</blockquote>
<h3 id="can-bus-errors"><a class="header" href="#can-bus-errors">CAN-bus errors</a></h3>
<p>If CAN-bus is not working correctly, make sure that following things are checked:</p>
<ul>
<li>
<p>CAN-bus has 120ohm resistors activated on the both end of the bus. The total CAN-bus impedance has to be approximately 60 ohms.</p>
</li>
<li>
<p>Check that all motor controllers and other CAN-devices in the bus have same baud rate</p>
</li>
<li>
<p>Make sure that all CAN-devices on the bus have individual Node-ID</p>
</li>
<li>
<p>Double-check Navitrol parameters in this document</p>
</li>
<li>
<p>Make sure that you have also done CAN-bus grounding</p>
<ul>
<li>
<p>If CAN-bus GND is not grounded, there might occur error frames in the CAN-bus</p>
</li>
<li>
<p>Higher baud rates require CAN-bus grounding because they require more accurate voltage levels</p>
</li>
</ul>
</li>
<li>
<p>More information about CAN-bus related errors can be found from <a href="../../GenericInterfaces/CanCommunication/CanCommunication-en.html#troubleshooting-can-communication">Navitrol CANOpen Communication Troubleshooting</a></p>
</li>
</ul>
<h2 id="references"><a class="header" href="#references">References</a></h2>
<p><a href="https://en.nanotec.com/products/1622-pd4-cb59m024035-e-08/">Nanotec PD4-CB59 Controller</a></p>
<p><a href="https://www.peak-system.com/PCAN-USB.199.0.html?L=1">PEAK PCAN-USB Adapter</a></p>
<p><a href="https://en.nanotec.com/products/2533-plug-drive-studio-2">Nanotec Plug &amp; Drive Studio 2</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="../../../AgvInterfaces/MotorControllers/Kinco/KincoMotorController-en.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="../../../AgvInterfaces/MotorControllers/Oriental/OrientalMotorController-en.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="../../../AgvInterfaces/MotorControllers/Kinco/KincoMotorController-en.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="../../../AgvInterfaces/MotorControllers/Oriental/OrientalMotorController-en.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="../../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="../../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
