<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Alarms configuration override - NAVITHOR USER INSTRUCTIONS</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Front page</a></li><li class="chapter-item expanded affix "><li class="part-title">Configuration</li><li class="chapter-item expanded "><a href="Installation_NavithorHardwareRequirements.html"><strong aria-hidden="true">1.</strong> System Hardware Requirement Specifications</a></li><li class="chapter-item expanded "><a href="Installation_SQLServerAndDatabaseInstallationGuide.html"><strong aria-hidden="true">2.</strong> Configuring database</a></li><li class="chapter-item expanded "><a href="fleetSim.html"><strong aria-hidden="true">3.</strong> Fleet Simulator - Setup and Configuration</a></li><li class="chapter-item expanded "><a href="Installation_NavithorServerAsAService.html"><strong aria-hidden="true">4.</strong> Server as a service</a></li><li class="chapter-item expanded "><a href="Installation_ConfiguringHotSwap.html"><strong aria-hidden="true">5.</strong> Server Hot Swap with Failover Cluster</a></li><li class="chapter-item expanded "><a href="Installation_RebrandingNavithor.html"><strong aria-hidden="true">6.</strong> Server and Client Rebranding</a></li><li class="chapter-item expanded "><a href="Machinetool.html"><strong aria-hidden="true">7.</strong> Machine Tool</a></li><li class="chapter-item expanded "><a href="MesTester3.html"><strong aria-hidden="true">8.</strong> MES Tester</a></li><li class="chapter-item expanded affix "><li class="part-title">Desktop client</li><li class="chapter-item expanded "><a href="navithorServerAndClientMegaDocument.html"><strong aria-hidden="true">9.</strong> System Overview and user instructions for Client UI</a></li><li class="chapter-item expanded "><a href="Feature_ClientUpdater.html"><strong aria-hidden="true">10.</strong> Client Updater</a></li><li class="chapter-item expanded affix "><li class="part-title">Web client</li><li class="chapter-item expanded "><a href="Installation_SettingUpNavithorWebServer.html"><strong aria-hidden="true">11.</strong> Setting up Web server to enable Web client</a></li><li class="chapter-item expanded "><a href="webClient.html"><strong aria-hidden="true">12.</strong> Web Client - User Instructions</a></li><li class="chapter-item expanded affix "><li class="part-title">Guides</li><li class="chapter-item expanded "><a href="bestProductionPractices.html"><strong aria-hidden="true">13.</strong> Best Practices for Creating Production Area</a></li><li class="chapter-item expanded affix "><li class="part-title">Logs</li><li class="chapter-item expanded "><a href="Navithor logs.html"><strong aria-hidden="true">14.</strong> Navithor Logs</a></li><li class="chapter-item expanded "><a href="Feature_VisualReplay.html"><strong aria-hidden="true">15.</strong> Visual Replay</a></li><li class="chapter-item expanded "><a href="Feature_DownloadManager.html"><strong aria-hidden="true">16.</strong> Log Download Manager</a></li><li class="chapter-item expanded affix "><li class="part-title">Users</li><li class="chapter-item expanded "><a href="Installation_UsingActiveDirectoryForAuthentication.html"><strong aria-hidden="true">17.</strong> User authentication against Active Directory</a></li><li class="chapter-item expanded "><a href="userRoles.html"><strong aria-hidden="true">18.</strong> User Management</a></li><li class="chapter-item expanded "><a href="userRolesRightsMatrix.html"><strong aria-hidden="true">19.</strong> Default User roles and User rights matrix</a></li><li class="chapter-item expanded affix "><li class="part-title">Features</li><li class="chapter-item expanded "><a href="symbolicPointGroups.html"><strong aria-hidden="true">20.</strong> Symbolic Point Groups</a></li><li class="chapter-item expanded "><a href="ResourceHandling.html"><strong aria-hidden="true">21.</strong> Resource handling</a></li><li class="chapter-item expanded "><a href="hold-release.html"><strong aria-hidden="true">22.</strong> Hold-Release reasoning and production order lists</a></li><li class="chapter-item expanded "><a href="transfer requests.html"><strong aria-hidden="true">23.</strong> Transfer requests</a></li><li class="chapter-item expanded "><a href="racking.html"><strong aria-hidden="true">24.</strong> Using warehouse racking feature</a></li><li class="chapter-item expanded "><a href="bufferLanes.html"><strong aria-hidden="true">25.</strong> Using Buffer Lanes</a></li><li class="chapter-item expanded "><a href="Feature_ChargingManagement.html"><strong aria-hidden="true">26.</strong> Managing Battery Levels</a></li><li class="chapter-item expanded "><a href="oneMachineZones.html"><strong aria-hidden="true">27.</strong> Using One Machine Zones</a></li><li class="chapter-item expanded "><a href="distanceControlZones.html"><strong aria-hidden="true">28.</strong> Distance Control Zones</a></li><li class="chapter-item expanded "><a href="FireAlarmZones.html"><strong aria-hidden="true">29.</strong> Fire Alarm Zones</a></li><li class="chapter-item expanded "><a href="Zone status use cases.html"><strong aria-hidden="true">30.</strong> Zone status use cases</a></li><li class="chapter-item expanded "><a href="tagStatuses.html"><strong aria-hidden="true">31.</strong> Tag Statuses</a></li><li class="chapter-item expanded "><a href="Trafficlights.html"><strong aria-hidden="true">32.</strong> Traffic Lights</a></li><li class="chapter-item expanded "><a href="Feature_Elevators.html"><strong aria-hidden="true">33.</strong> Elevators</a></li><li class="chapter-item expanded "><a href="ProductionBreak.html"><strong aria-hidden="true">34.</strong> Production Break</a></li><li class="chapter-item expanded "><a href="DynamicSafetyBounds.html"><strong aria-hidden="true">35.</strong> Virtual Dynamic Safety Bounds</a></li><li class="chapter-item expanded "><a href="WaitingSlots.html"><strong aria-hidden="true">36.</strong> Wait Queue Locations</a></li><li class="chapter-item expanded "><a href="CoupledDrive.html"><strong aria-hidden="true">37.</strong> Coupled Drive</a></li><li class="chapter-item expanded "><a href="Feature_StoppingPointOffsetsForSymbolicPoints.html"><strong aria-hidden="true">38.</strong> Stopping Point Offsets</a></li><li class="chapter-item expanded "><a href="TCStopPoint.html"><strong aria-hidden="true">39.</strong> Safe stopping point calculation</a></li><li class="chapter-item expanded "><a href="Navithor statistics.html"><strong aria-hidden="true">40.</strong> System Statistics</a></li><li class="chapter-item expanded "><a href="MachineInterfaces.html"><strong aria-hidden="true">41.</strong> Machine Interfaces</a></li><li class="chapter-item expanded affix "><li class="part-title">Interfaces</li><li class="chapter-item expanded "><a href="Communication specification between Navithor and MES.html"><strong aria-hidden="true">42.</strong> MES Interface</a></li><li class="chapter-item expanded "><a href="NavithorHttpApi.html"><strong aria-hidden="true">43.</strong> HTTP API</a></li><li class="chapter-item expanded "><a href="NavithorWebApi.html"><strong aria-hidden="true">44.</strong> WebSocket API</a></li><li class="chapter-item expanded "><a href="opcuadoc.html"><strong aria-hidden="true">45.</strong> OPC UA Server interface</a></li><li class="chapter-item expanded affix "><li class="part-title">Alarms</li><li class="chapter-item expanded "><a href="Fleet Control Alarms.html"><strong aria-hidden="true">46.</strong> Alarms</a></li><li class="chapter-item expanded "><a href="Alarms configuration override.html" class="active"><strong aria-hidden="true">47.</strong> Alarms configuration override</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="dark">Dark</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">NAVITHOR USER INSTRUCTIONS</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="alarms-configuration-override"><a class="header" href="#alarms-configuration-override">Alarms configuration override</a></h1>
<p>This document contains the description of alarms configuration override functionality and instructions for applying overrides for filtering on the server or Client side.</p>
<p>Updated 23.11.2022</p>
<h2 id="version-history"><a class="header" href="#version-history">Version History</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Version</th><th>Date</th><th>Author</th><th>Change</th></tr></thead><tbody>
<tr><td>1.0</td><td>15.04.2021</td><td>Elena Sgonova</td><td>Document created</td></tr>
<tr><td>1.1</td><td>31.05.2021</td><td>Evgenii Kuzminskii</td><td>Update the related parameter name</td></tr>
<tr><td>1.2</td><td>11.06.2021</td><td>Aleksi Ålander</td><td>Renamed title</td></tr>
<tr><td>1.3</td><td>21.07.2021</td><td>Elena Sgonova</td><td>Added detailed description for AlarmConfigurationOverride file input sources</td></tr>
<tr><td>1.4</td><td>10.01.2022</td><td>Tero Laakso</td><td>Updated override file creation section. Default error levels may vary</td></tr>
<tr><td>1.5</td><td>23.11.2022</td><td>Elena Sgonova</td><td>Updated section about Supervisor alarms override. Setting default supervisor alarm level logic has changed</td></tr>
</tbody></table>
</div>
<hr />
<h2 id="introduction"><a class="header" href="#introduction">Introduction</a></h2>
<p>It is possible to override error levels and priorities of system alarms with a configuration override file. Error level and priority values can be used for filtering alarms on the server side or in the Client.</p>
<h2 id="alarm-configurations-in-navithor-server"><a class="header" href="#alarm-configurations-in-navithor-server">Alarm configurations in Navithor Server</a></h2>
<p>This functionality is available starting from <strong>version 2.21.4.60</strong> of Navithor server.</p>
<h3 id="configuration-override-file"><a class="header" href="#configuration-override-file">Configuration override file</a></h3>
<p><strong>File location:</strong> server_executable_path/Overrides/</p>
<p><strong>File name:</strong> AlarmConfigurationOverride.txt</p>
<p>This file is created automatically when Navithor server is started and is initially filled with default overrides values collected from the system. More detailed overview can be read in the <a href="#override-file-input-sources">Override file input sources</a> section. Overrides in the file can be edited and new overrides can be added in the following format:</p>
<p><code>AlarmId:AlarmSource:AlarmInitialLevel:AlarmOverrideLevel:AlarmPriority:AlarmInformationId</code></p>
<div class="table-wrapper"><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody>
<tr><td>AlarmId</td><td>Number, ID of an alarm</td></tr>
<tr><td>AlarmSource</td><td>String, alarm source: <br/> FleetControl <br/> NavigationSoftware <br/> Supervisor <br/> MachineDevice</td></tr>
<tr><td>AlarmInitialLevel</td><td>Number, initial alarm level: <br/>1 - Warning<br/>2 - Error<br/>3 - Fatal error<br/>Initial level has no effect on alarms in the system and is used for information purposes only</td></tr>
<tr><td>AlarmOverrideLevel</td><td>Number, override alarm level: <br/>1 - Warning<br/>2 - Error<br/>3 - Fatal error<br/>OverrideLevel defines how this alarm would be represented in the system</td></tr>
<tr><td>AlarmPriority</td><td>Number, alarm priority value: <br/>1 - Lowest<br/>2 - Very low<br/>3 - Low<br/>4 - Medium<br/>5 - High<br/>6 - Very high<br/>7 - Highest<br/>Default value is Medium = 4</td></tr>
<tr><td>AlarmInformationId</td><td>Link to a help-page to solve issue related to this alarm in the Client (reserved for future use)</td></tr>
</tbody></table>
</div>
<p>Example line:</p>
<p><code>100000:FleetControl:2:2:4:0</code></p>
<p>In order to apply the changes, restart the server or in the Client navigate to Settings-&gt;Production settings-&gt;Area files and click &quot;Reload overrides&quot; button.</p>
<h3 id="alarms-prefiltering-in-server"><a class="header" href="#alarms-prefiltering-in-server">Alarms prefiltering in server</a></h3>
<p>Alarm priority can be used for prefiltering in server.</p>
<ul>
<li>
<p>To enable alarm prefiltering set server parameter <strong>Alarms_LowestAllowedPriorityToFilterOutAlarms</strong> to a value from 1 to 7. Alarms and updates for alarms with lower priority value than <strong>Alarms_LowestAllowedPriorityToFilterOutAlarms</strong> will not be sent to OPC UA.</p>
</li>
<li>
<p>To disable alarm prefiltering set server parameter <strong>Alarms_LowestAllowedPriorityToFilterOutAlarms</strong> to 0.</p>
</li>
</ul>
<h2 id="alarm-configurations-in-navithor-client"><a class="header" href="#alarm-configurations-in-navithor-client">Alarm configurations in Navithor Client</a></h2>
<p>This functionality is available starting from <strong>version 2.21.4.60</strong> of Navithor Client.</p>
<h3 id="alarms-filtering-in-navithor-client"><a class="header" href="#alarms-filtering-in-navithor-client">Alarms filtering in Navithor Client</a></h3>
<p>Navithor Client supports filtering alarms by priority and new filtering by alarm level and source is introduced.</p>
<p>Operator can choose alarms with which priorities need to be displayed. If no selection is done, no filtering will be performed.</p>
<p><img src="./Images/AlarmConfigurationOverride/filtering_1.png" alt="" /></p>
<blockquote>
<p>Figure: Alarm priority filtering selection.</p>
</blockquote>
<p>Also, operator can choose more than one alarm level and source as a filter.</p>
<p><img src="./Images/AlarmConfigurationOverride/filtering_2.png" alt="" /></p>
<blockquote>
<p>Figure: Alarm error level filter selection</p>
</blockquote>
<p><img src="./Images/AlarmConfigurationOverride/filtering_3.png" alt="" /></p>
<blockquote>
<p>Figure: Alarm source filter selection</p>
</blockquote>
<p>Selected filtering options are stored in the Client settings and will be kept after exiting the Client application.
&gt;Figure: Alarms view with custom color settings applied</p>
<h2 id="override-file-input-sources"><a class="header" href="#override-file-input-sources">Override file input sources</a></h2>
<h3 id="1-configuration-override-file-initialization"><a class="header" href="#1-configuration-override-file-initialization">1 Configuration override file initialization</a></h3>
<p><strong>a) Configuration override file does not exist</strong>. Navithor creates the file and fills it with all the system errors defined in the Navithor code (FleetControl alarms). InitialLevel and OverrideLevel values are set to correspond to the default level of the error in Navithor. See _ Alarms_ document for more information.</p>
<p><strong>b) Configuration override file exists</strong>. Navithor reads defined overrides from the file. Then fills it with FleetControl alarms if they were not yet defined in the file. Then the file is saved.</p>
<blockquote>
<p><strong>Note:</strong> What is defined in the <strong>file has bigger priority</strong> than what is sent from the system. Example: in the file the following line is defined - <em>603:NavigationSoftware:3:2:4:0</em>. If Navitrol later will send this error with the InitialLevel 1, it will not be updated in the memory.</p>
</blockquote>
<p>Order of lines in the file does not matter for Navithor, but lines which contain typos will be ignored.</p>
<p>If AlarmsConfigurationOverride file is changed with the server running, you have to press Reload Overrides in the Client for the changes to take effect. It is better though to edit the file before the server is started to avoid accidental loss of data.</p>
<p>Navithor saves the file on each exit from server and also when a new alarm is appended for example from the Supervisor, the file is also updated.</p>
<h3 id="2-other-alarms-added-by-navithor"><a class="header" href="#2-other-alarms-added-by-navithor">2 Other alarms added by Navithor</a></h3>
<h4 id="navigationsoftware-alarms"><a class="header" href="#navigationsoftware-alarms">NavigationSoftware alarms</a></h4>
<p>When AGV is connected to Navithor, it sends its errors list and errors which are not yet in the file will be added to AlarmsConfigurationOverride file. Default InitialLevel and OverrideLevel value in this case depends on which ErrorLevel is defined in Navitrol for this alarm.</p>
<blockquote>
<p><strong>Note:</strong> New errors from Navitrol will only be added if Navitrol version is different from the one which is defined in the file (see line which starts with CURRENT_NAVITROL_VERSION).</p>
</blockquote>
<h4 id="supervisor-alarms"><a class="header" href="#supervisor-alarms">Supervisor alarms</a></h4>
<p>An override record for Supervisor alarm is added automatically when it is first triggered in the system and such alarm is not defined in the AlarmsConfigurationOverride file. Default OverrideLevel value will be recorded according to the level assigned to a triggered alarm. Next time alarm with the same ID is triggered, Navithor will use the recorded OverrideLevel.</p>
<h4 id="not-applied-overrides"><a class="header" href="#not-applied-overrides">Not applied overrides</a></h4>
<p>When the override information is requested for an alarm which is not defined in the AlarmsConfigurationOverride file, this alarm information is saved in the memory as not applied override. When exiting the server, not applied overrides are written to the configuration override file under &quot;OVERRIDES NOT APPLIED TO ALARMS&quot; section. On the next start of the server these lines will be read into the memory.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="Fleet Control Alarms.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="Fleet Control Alarms.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
