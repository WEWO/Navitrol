<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>MES Interface - NAVITHOR USER INSTRUCTIONS</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Front page</a></li><li class="chapter-item expanded affix "><li class="part-title">Configuration</li><li class="chapter-item expanded "><a href="Installation_NavithorHardwareRequirements.html"><strong aria-hidden="true">1.</strong> System Hardware Requirement Specifications</a></li><li class="chapter-item expanded "><a href="Installation_SQLServerAndDatabaseInstallationGuide.html"><strong aria-hidden="true">2.</strong> Configuring database</a></li><li class="chapter-item expanded "><a href="fleetSim.html"><strong aria-hidden="true">3.</strong> Fleet Simulator - Setup and Configuration</a></li><li class="chapter-item expanded "><a href="Installation_NavithorServerAsAService.html"><strong aria-hidden="true">4.</strong> Server as a service</a></li><li class="chapter-item expanded "><a href="Installation_ConfiguringHotSwap.html"><strong aria-hidden="true">5.</strong> Server Hot Swap with Failover Cluster</a></li><li class="chapter-item expanded "><a href="Installation_RebrandingNavithor.html"><strong aria-hidden="true">6.</strong> Server and Client Rebranding</a></li><li class="chapter-item expanded "><a href="Machinetool.html"><strong aria-hidden="true">7.</strong> Machine Tool</a></li><li class="chapter-item expanded "><a href="MesTester3.html"><strong aria-hidden="true">8.</strong> MES Tester</a></li><li class="chapter-item expanded affix "><li class="part-title">Desktop client</li><li class="chapter-item expanded "><a href="navithorServerAndClientMegaDocument.html"><strong aria-hidden="true">9.</strong> System Overview and user instructions for Client UI</a></li><li class="chapter-item expanded "><a href="Feature_ClientUpdater.html"><strong aria-hidden="true">10.</strong> Client Updater</a></li><li class="chapter-item expanded affix "><li class="part-title">Web client</li><li class="chapter-item expanded "><a href="Installation_SettingUpNavithorWebServer.html"><strong aria-hidden="true">11.</strong> Setting up Web server to enable Web client</a></li><li class="chapter-item expanded "><a href="webClient.html"><strong aria-hidden="true">12.</strong> Web Client - User Instructions</a></li><li class="chapter-item expanded affix "><li class="part-title">Guides</li><li class="chapter-item expanded "><a href="bestProductionPractices.html"><strong aria-hidden="true">13.</strong> Best Practices for Creating Production Area</a></li><li class="chapter-item expanded affix "><li class="part-title">Logs</li><li class="chapter-item expanded "><a href="Navithor logs.html"><strong aria-hidden="true">14.</strong> Navithor Logs</a></li><li class="chapter-item expanded "><a href="Feature_VisualReplay.html"><strong aria-hidden="true">15.</strong> Visual Replay</a></li><li class="chapter-item expanded "><a href="Feature_DownloadManager.html"><strong aria-hidden="true">16.</strong> Log Download Manager</a></li><li class="chapter-item expanded affix "><li class="part-title">Users</li><li class="chapter-item expanded "><a href="Installation_UsingActiveDirectoryForAuthentication.html"><strong aria-hidden="true">17.</strong> User authentication against Active Directory</a></li><li class="chapter-item expanded "><a href="userRoles.html"><strong aria-hidden="true">18.</strong> User Management</a></li><li class="chapter-item expanded "><a href="userRolesRightsMatrix.html"><strong aria-hidden="true">19.</strong> Default User roles and User rights matrix</a></li><li class="chapter-item expanded affix "><li class="part-title">Features</li><li class="chapter-item expanded "><a href="symbolicPointGroups.html"><strong aria-hidden="true">20.</strong> Symbolic Point Groups</a></li><li class="chapter-item expanded "><a href="ResourceHandling.html"><strong aria-hidden="true">21.</strong> Resource handling</a></li><li class="chapter-item expanded "><a href="hold-release.html"><strong aria-hidden="true">22.</strong> Hold-Release reasoning and production order lists</a></li><li class="chapter-item expanded "><a href="transfer requests.html"><strong aria-hidden="true">23.</strong> Transfer requests</a></li><li class="chapter-item expanded "><a href="racking.html"><strong aria-hidden="true">24.</strong> Using warehouse racking feature</a></li><li class="chapter-item expanded "><a href="bufferLanes.html"><strong aria-hidden="true">25.</strong> Using Buffer Lanes</a></li><li class="chapter-item expanded "><a href="Feature_ChargingManagement.html"><strong aria-hidden="true">26.</strong> Managing Battery Levels</a></li><li class="chapter-item expanded "><a href="oneMachineZones.html"><strong aria-hidden="true">27.</strong> Using One Machine Zones</a></li><li class="chapter-item expanded "><a href="distanceControlZones.html"><strong aria-hidden="true">28.</strong> Distance Control Zones</a></li><li class="chapter-item expanded "><a href="FireAlarmZones.html"><strong aria-hidden="true">29.</strong> Fire Alarm Zones</a></li><li class="chapter-item expanded "><a href="Zone status use cases.html"><strong aria-hidden="true">30.</strong> Zone status use cases</a></li><li class="chapter-item expanded "><a href="tagStatuses.html"><strong aria-hidden="true">31.</strong> Tag Statuses</a></li><li class="chapter-item expanded "><a href="Trafficlights.html"><strong aria-hidden="true">32.</strong> Traffic Lights</a></li><li class="chapter-item expanded "><a href="Feature_Elevators.html"><strong aria-hidden="true">33.</strong> Elevators</a></li><li class="chapter-item expanded "><a href="ProductionBreak.html"><strong aria-hidden="true">34.</strong> Production Break</a></li><li class="chapter-item expanded "><a href="DynamicSafetyBounds.html"><strong aria-hidden="true">35.</strong> Virtual Dynamic Safety Bounds</a></li><li class="chapter-item expanded "><a href="WaitingSlots.html"><strong aria-hidden="true">36.</strong> Wait Queue Locations</a></li><li class="chapter-item expanded "><a href="CoupledDrive.html"><strong aria-hidden="true">37.</strong> Coupled Drive</a></li><li class="chapter-item expanded "><a href="Feature_StoppingPointOffsetsForSymbolicPoints.html"><strong aria-hidden="true">38.</strong> Stopping Point Offsets</a></li><li class="chapter-item expanded "><a href="TCStopPoint.html"><strong aria-hidden="true">39.</strong> Safe stopping point calculation</a></li><li class="chapter-item expanded "><a href="Navithor statistics.html"><strong aria-hidden="true">40.</strong> System Statistics</a></li><li class="chapter-item expanded "><a href="MachineInterfaces.html"><strong aria-hidden="true">41.</strong> Machine Interfaces</a></li><li class="chapter-item expanded affix "><li class="part-title">Interfaces</li><li class="chapter-item expanded "><a href="Communication specification between Navithor and MES.html" class="active"><strong aria-hidden="true">42.</strong> MES Interface</a></li><li class="chapter-item expanded "><a href="NavithorHttpApi.html"><strong aria-hidden="true">43.</strong> HTTP API</a></li><li class="chapter-item expanded "><a href="NavithorWebApi.html"><strong aria-hidden="true">44.</strong> WebSocket API</a></li><li class="chapter-item expanded "><a href="opcuadoc.html"><strong aria-hidden="true">45.</strong> OPC UA Server interface</a></li><li class="chapter-item expanded affix "><li class="part-title">Alarms</li><li class="chapter-item expanded "><a href="Fleet Control Alarms.html"><strong aria-hidden="true">46.</strong> Alarms</a></li><li class="chapter-item expanded "><a href="Alarms configuration override.html"><strong aria-hidden="true">47.</strong> Alarms configuration override</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="dark">Dark</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">NAVITHOR USER INSTRUCTIONS</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="communication-specification-between-navithor-and-mes"><a class="header" href="#communication-specification-between-navithor-and-mes">Communication specification between Navithor and MES</a></h1>
<p>This document describes the interface between the Navithor Server and MES.</p>
<p>Version 2.78</p>
<p>Updated 03.02.2023</p>
<h2 id="version-history"><a class="header" href="#version-history">Version history</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Document Version</th><th>Date</th><th>Author</th><th>Description</th></tr></thead><tbody>
<tr><td>1.0</td><td>02.05.2016</td><td>Jouni Sievilä</td><td>First version</td></tr>
<tr><td>1.1</td><td>26.10.2016</td><td>Joni Sundholm</td><td>Added description texts to all messages</td></tr>
<tr><td>1.2</td><td>21.02.2017</td><td>Joni Sundholm</td><td>Added battery- and loadstatus-fields to AGVStatus-message and updated ProductionStatus-message. Added messages for handling of ProductionOrderLists. Navithor ver. 1.7 required for support</td></tr>
<tr><td>1.3</td><td>06.03.2017</td><td>Joni Sundholm</td><td>AsssingnedToMachine-field type changed from int16 to int32. DestinationIDs-field in message ID = 318 changed from int16 to uint16</td></tr>
<tr><td>1.4</td><td>11.05.2017</td><td>Joni Sundholm</td><td>Added messages TagStatus and TagStatusRequest</td></tr>
<tr><td>1.5</td><td>15.05.2017</td><td>Ville Rahikka</td><td>Major update to the chapter structure. Added RequestPickUp and RequestPickUpResult. Added ErrorIDs chapter</td></tr>
<tr><td>1.51</td><td>19.06.2017</td><td>Ville Rahikka</td><td>Minor spelling error</td></tr>
<tr><td>1.6</td><td>26.06.2017</td><td>Aleksi Ålander</td><td>Correction to SetStatusAtSymbolicPoint message</td></tr>
<tr><td>1.7</td><td>27.11.2017</td><td>Aleksi Ålander</td><td>Added messages 8.1.24 ClearProductionOrders and 8.1.25 ClearTransferRequests</td></tr>
<tr><td>1.71</td><td>08.12.2017</td><td>Aleksi Ålander</td><td>Corrected in 8.2.17. order status interrupted to be 4 and completed 5</td></tr>
<tr><td>1.72</td><td>16.01.2018</td><td>Tommi Kärki</td><td>Added data field AffixNumber to SetStatusAtSymbolicPoint</td></tr>
<tr><td>1.73</td><td>06.02.2018</td><td>Aleksi Ålander</td><td>Small fixes and notes to OutputAll and other Output messages</td></tr>
<tr><td>1.80</td><td>07.02.2018</td><td>Aleksi Ålander</td><td>Added TagType field to message 8.1.22. TagStatus</td></tr>
<tr><td>1.81</td><td>08.02.2018</td><td>Aleksi Ålander</td><td>Fixed the TagStatus format</td></tr>
<tr><td>1.9</td><td>28.02.2018</td><td>Aleksi Ålander</td><td>Corrected messages PickupReady, PickupAborted, EmptyReady, EmptyAborted</td></tr>
<tr><td>1.91</td><td>21.03.2018</td><td>Aleksi Ålander</td><td>Added 'cancelled' status to ProductionStatus message</td></tr>
<tr><td>2.0</td><td>21.08.2018</td><td>Joni Sundholm</td><td>DriveReady-messages (ID = 302) level-field is int32, not uint32 as previously in this document. Reflecting MES interface version 1.5 in Navithor Server</td></tr>
<tr><td>2.1</td><td>26.09.2018</td><td>Joni Sundholm</td><td>InitialSetup-messages (ID = 102) maximum data length is now 65535 bytes instead of 10000<p></p>Added message CancelActiveProductionOrderList (ID = 28). Supported by Navithor version 1.9.55.0 or later</td></tr>
<tr><td>2.2</td><td>09.11.2018</td><td>Aleksi Ålander</td><td>Added messages ResourceStatus (ID = 321), ReleaseHoldToCustomLoc (ID = 29) and SetDriveOffset (ID = 30). Messages supported by Navithor version 1.9.59.0 or later</td></tr>
<tr><td>2.3</td><td>18.02.2019</td><td>Joni Sundholm</td><td>Added messages RequestResourceStatusAtLocation (ID = 322) and AckRejRequest (ID = 201)<p></p>Messages supported by Navithor version 1.9.59.0 or later</td></tr>
<tr><td>2.4</td><td>15.03.2019</td><td>Aleksi Ålander</td><td>New message TransferRequestStatus (ID = 323). Added new optional fields to TransferRequest (ID = 21)<p></p>Added exectionStatus to ProductionStatus (ID = 313)<p></p>Document version number matches from now on with MES interface version</td></tr>
<tr><td>2.5</td><td>09.04.2019</td><td>Joni Sundholm</td><td>Added RequestPickup-field to SetStatusAtSymbolicPoint-message. Supported in Navithor version 1.9.62.0 or later</td></tr>
<tr><td>2.6</td><td>28.05.2019</td><td>Samuli Vaara</td><td>Added message SymbolicPointStatus (ID = 324) and SetSymbolicPointStatus (ID = 34). Modified TransferRequest (ID = 21) to allow requesting groups</td></tr>
<tr><td>2.7</td><td>31.07.2019</td><td>Aleksi Ålander</td><td>Added chapter 8.4. Heartbeat with description about the optional heartbeat and added messages 8.4.1 Heartbeat (ID = 203) and 8.4.2 HeartbeatResponse (ID = 204)</td></tr>
<tr><td>2.8</td><td>03.10.2019</td><td>Aleksi Älander</td><td>Added message FireAlarmSignbal (ID = 36)</td></tr>
<tr><td>2.9</td><td>17.10.2019</td><td>Björn Eike Sopha</td><td>Editing ResponseId description of TransferRequest (ID = 21)</td></tr>
<tr><td>2.10</td><td>29.10.2019</td><td>Samuli Vaara</td><td>Added Active FireAlarmStatus (ID = 326), fixed some typos and heading numbering</td></tr>
<tr><td>2.11</td><td>13.12.2019</td><td>Samuli Vaara</td><td>Added ClearTransfRequestWithTransferID</td></tr>
<tr><td>2.12</td><td>19.12.2019</td><td>Tommi Kärki</td><td>A lot of corrections to message lengths in document. String max lengths specified. Array max length specified</td></tr>
<tr><td>2.13</td><td>23.01.2020</td><td>Aleksi Ålander</td><td>Fixed OutputAll, OutputFloat and OutputDigital messages to Navithor version 2.13.0.0 to work correctly</td></tr>
<tr><td>2.14</td><td>23.03.2020</td><td>Evgenii Kuzminskii</td><td>Modified Version history table layout. Corrected number for 8.2.30<p></p>Added DriveMachineToSymbolicPointWithStops (ID = 38), EstimateDriveToStartSymbolicPoint (ID = 41), StoppedAtStopPoint message (ID 328), EstimationOfDriveToStartSymbolicPoint (ID = 329)</td></tr>
<tr><td>2.15</td><td>28.04.2020</td><td>Evgenii Kuzminskii</td><td>Updated RequestPickUp (ID = 25)<p></p>Added RackTransferRequest (ID = 39), SetRackStatus (ID = 40), GetRackSetup (ID = 43), DriveMachineToRack (ID = 44)<p></p>Updated RequestPickUpResult (ID = 320)<p></p>Added RackSetupReply (ID = 330), RackSetup (ID = 331)</td></tr>
<tr><td>2.16</td><td>29.04.2020</td><td>Tommi Kärki</td><td>Added missing SetResourcesAtMachine (ID = 42)</td></tr>
<tr><td>2.17</td><td>29.04.2020</td><td>Evgenii Kuzminskii</td><td>Updated SetResourcesAtMachine (ID = 42) and fixed numbering</td></tr>
<tr><td>2.18</td><td>29.04.2020</td><td>Evgenii Kuzminskii</td><td>Updated DriveMachineToRack (ID = 44)</td></tr>
<tr><td>2.19</td><td>06.05.2020</td><td>Aleksi Ålander</td><td>Clarify description for SetResourcesAtMachine (ID = 42), corrected header numbering for messages 8.1.41 and 8.1.42, updated Table of contents</td></tr>
<tr><td>2.20</td><td>14.05.2020</td><td>Samuli Vaara</td><td>Added optional flags for AddProductionOrder (ID = 16)</td></tr>
<tr><td>2.21</td><td>15.05.2020</td><td>Evgenii Kuzminskii</td><td>Added LoadUnloadMachineRequest (ID = 46)</td></tr>
<tr><td>2.22</td><td>28.07.2020</td><td>Aleksi Ålander</td><td>Modified InitialSetup ResourceTypeData struct's resource type ID datatype from uint16 to int32. Note: Before Navithor version 2.20.0.0 these resource types were not sent with InitialSetup, even though they should have been. This was fixed to release 2.20.0.0</td></tr>
<tr><td>2.23</td><td>31.08.2020</td><td>Björn Eike Sopha</td><td>Removed optional field that was not implemented for SetSymbolicPointAvailability (ID = 31)</td></tr>
<tr><td>2.24</td><td>02.09.2020</td><td>Antti Parkkonen</td><td>Added RequestZoneStatus (ID = 51) and ZoneStatusReply (ID = 333) messages to this document</td></tr>
<tr><td>2.25</td><td>15.09.2020</td><td>Aleksi Ålander</td><td>Added new messages GetSymbolicPointGroupSetup (ID = 46), SaveLogs (ID = 48), AckAlarms (ID = 49), SetBufferLaneStatus (ID = 50) and SymbolicPointGroupSetup (ID = 332). Added also option to extend existing TransferReqeustStatus (ID = 323) to include more information. This is optional and can be enabled from Navithor Server parameters, on default old shorter form is used</td></tr>
<tr><td>2.26</td><td>31.08.2020</td><td>Björn Eike Sopha</td><td>Fixing message SetSymbolicPointAvailability (ID = 31)</td></tr>
<tr><td>2.27</td><td>24.09.2020</td><td>Toni Liski</td><td>Added a new message ProductionAreaChanged (ID = 334)</td></tr>
<tr><td>2.28</td><td>24.09.2020</td><td>Samuli Vaara</td><td>Added a new message MesBatteryTemperatureWarning (ID = 334). Corrected previous message in doc 334 -&gt; 335</td></tr>
<tr><td>2.29</td><td>01.10.2020</td><td>Tommi Kärki</td><td>Added new messages ID = 52 (GetProductionAreaInformation) and ID = 336-344 which are replies to ID = 52. Removed InitialSetup from Tips because it is optional</td></tr>
<tr><td>2.30</td><td>19.10.2020</td><td>Toni Liski</td><td>Add new messages SetResourceAtLocationWithExtendedInfo (ID = 53) and TransferRequestWithResourceIdentifier (ID = 54)</td></tr>
<tr><td>2.31</td><td>04.12.2020</td><td>Toni Liski</td><td>Add new messages RequestSPResourceStatus (ID = 55) and SymbolicPointResourceStatus (ID = 345)</td></tr>
<tr><td>2.32</td><td>10.12.2020</td><td>Evgenii Kuzminskii</td><td>Updated description for several fields of RackTransferRequest (ID = 39) message</td></tr>
<tr><td>2.33</td><td>17.11.2020</td><td>Tommi Kärki</td><td>Added optional field documentation for RackTransferRequest (ID = 39) message</td></tr>
<tr><td>2.34</td><td>15.01.2021</td><td>Tommi Kärki</td><td>Corrected TransferRequest wrongly mentioning AckOrRejRequest being sent as reply. It is actually AckOrRej. Changed RackTransferRequest TransferId to be uint32 instead of int32 to match TransferRequestStatus RequestId</td></tr>
<tr><td>2.35</td><td>29.01.2021</td><td>Evgenii Kuzminskii</td><td>Fixed document style after conversion from DOCX to MD. Merged documents for incoming and outgoing messages into this document with multiple minor fixes. Updated type of ProductionOrderID field in StoppedAtStopPoint message (ID = 328)</td></tr>
<tr><td>2.36</td><td>17.02.2021</td><td>Evgenii Kuzminskii</td><td>Added chapter with MES message example, updated CurrentStatus field description in ProductionOrderData struct of ProductionStatus message (ID = 313)</td></tr>
<tr><td>2.37</td><td>25.02.2021</td><td>Aleksi Ålander</td><td>Added option to send DistanceToTarget in AGVStatus message, if parameter MES_StatusMessageProtocolVersion is at least 3.</td></tr>
<tr><td>2.38</td><td>15.03.2021</td><td>Aleksi Ålander</td><td>Added option to send CurrentDriveThroughPoint in AGVStatus message, if parameter MES_StatusMessageProtocolVersion is at least 4.</td></tr>
<tr><td>2.39</td><td>12.04.2021</td><td>Tero Laakso</td><td>Add new message ErrorsV2</td></tr>
<tr><td>2.40</td><td>19.04.2021</td><td>Evgenii Kuzminskii</td><td>Corrected ErrorLevel description in ErrorsV2 specification</td></tr>
<tr><td>2.41</td><td>28.04.2021</td><td>Evgenii Kuzminskii</td><td>Updated description for Item type ID field of ShelfStatus struct for SetRackStatus message</td></tr>
<tr><td>2.42</td><td>26.05.2021</td><td>Evgenii Kuzminskii</td><td>Renamed Group to ErrorType field of ErrorDataV2 struct in ErrorsV2 specification and updated description for it and for multiple fields in ErrorsV2Request specification</td></tr>
<tr><td>2.43</td><td>11.06.2021</td><td>Aleksi Ålander</td><td>Clarified that StrictUnloadLoc in TransferRequest is obsolete. Renamed title, minor corrections to formatting</td></tr>
<tr><td>2.44</td><td>16.06.2021</td><td>Elena Sgonova</td><td>Fixed typos in ErrorDataV2 fields names. Added EntityID field description</td></tr>
<tr><td>2.45</td><td>17.06.2021</td><td>Toni Liski</td><td>Add new messages ElevatorStatus (ID = 351) and ElevatorRequest (ID = 352)</td></tr>
<tr><td>2.46</td><td>18.06.2021</td><td>Toni Liski</td><td>Add new Subscription mode ElevatorRequest to MESMessageSubscription</td></tr>
<tr><td>2.47</td><td>30.06.2021</td><td>Aleksi Ålander</td><td>Added option to send CurrentDriveThroughPoint, NextLevelChangePointId and DistanceToNextLevelChange in AGVStatus message, if parameter MES_StatusMessageProtocolVersion is at least 5</td></tr>
<tr><td>2.48</td><td>02.07.2021</td><td>Evgenii Kuzminskii</td><td>Corrected header level and location of ErrorsV2 message (ID = 349) in the document</td></tr>
<tr><td>2.49</td><td>07.07.2021</td><td>Evgenii Kuzminskii</td><td>Changed value range for ElevatorStatus and DoorStatus fields in ElevatorStatus message (ID = 351)</td></tr>
<tr><td>2.50</td><td>03.08.2021</td><td>Aleksi Ålander</td><td>Changed RequestIdType in message 55 into RequestFlags and added new option of requesting ResourceCreationDate in SymbolicPointResourceStatus (ID = 345).</td></tr>
<tr><td>2.51</td><td>18.08.2021</td><td>Toni Liski</td><td>Corrected SPStatus values in message SymbolicPointResourceStatus (ID = 345).</td></tr>
<tr><td>2.52</td><td>06.09.2021</td><td>Tommi Kärki</td><td>Added new field to RackTransferRequest (ID = 39) message. Further clarified how message works.</td></tr>
<tr><td>2.53</td><td>29.09.2021</td><td>Benard Gathimba</td><td>Added DeleteProductionOrderWithId (ID = 353) message.</td></tr>
<tr><td>2.54</td><td>08.11.2021</td><td>Joni Sundholm</td><td>Clarified description for RequestResourceStatusAtLocation (ID = 322) message. Added more error- and reject-reasons to Error IDs-chapter</td></tr>
<tr><td>2.55</td><td>13.12.2021</td><td>Aleksi Ålander</td><td>Reverted change of message 345 minimum length done in protocol version 2.50.</td></tr>
<tr><td>2.56</td><td>15.12.2021</td><td>Aleksi Ålander</td><td>Added option to send LastSymbolPointDrivenOver in AGVStatus message, if parameter MES_StatusMessageProtocolVersion is at least 6.</td></tr>
<tr><td>2.57</td><td>02.02.2022</td><td>Toni Liski</td><td>Added new optional flags for RequestSPResourceStatus message to request all resources and resource slot and shelf indices.</td></tr>
<tr><td>2.58</td><td>01.03.2022</td><td>Elena Sgonova</td><td>Corrected mistakes found by a customer (ID = 348, ID = 320), fixed typos found all over the document.</td></tr>
<tr><td>2.59</td><td>03.03.2022</td><td>Samuli Vaara</td><td>Added SetSymbolicPointPriority (ID = 355)</td></tr>
<tr><td>2.60</td><td>10.03.2022</td><td>Samuli Vaara</td><td>Added RackId extenstion for pickup and target in RackTransferRequest (ID = 39)</td></tr>
<tr><td>2.61</td><td>06.04.2022</td><td>Aleksi Ålander</td><td>Added option to send RequestFlags in SymbolicPointResourceStatus (ID = 345) in case correct override file is found.</td></tr>
<tr><td>2.62</td><td>06.04.2022</td><td>Samuli Vaara</td><td>Added TransferRequestReply (ID = 356), reorganize a bit.</td></tr>
<tr><td>2.63</td><td>25.04.2022</td><td>Tommi Kärki</td><td>Added InitPositionToSymbolicPoint.</td></tr>
<tr><td>2.64</td><td>18.05.2022</td><td>Aleksi Ålander</td><td>AddProductionOrder (ID = 16) extended with option to include racks in the order and new flags for giving only pickup or dropoff order.</td></tr>
<tr><td>2.65</td><td>19.05.2022</td><td>Aleksi Ålander</td><td>Added messages ValidateLoad (ID = 357) and ValidateLoadReply (ID = 358). Added a new flag to AddProductionOrder for requiring load validation.</td></tr>
<tr><td>2.66</td><td>31.05.2022</td><td>Tero Laakso-Pitkäkoski</td><td>Added message StartStopProductionBreak (ID = 359) to activate and stop production break.</td></tr>
<tr><td>2.67</td><td>19.05.2022</td><td>Aleksi Ålander</td><td>Added RequestID to the TransferRequestReply (ID = 356) and modified order of optional RackData in AddProductionOrder (ID = 16) according to customer feedback.</td></tr>
<tr><td>2.68</td><td>30.06.2022</td><td>Tero Laakso-Pitkäkoski</td><td>Length of Status field in TrafficLightStatus fixed to match field type.</td></tr>
<tr><td>2.69</td><td>14.07.2022</td><td>Aleksi Ålander</td><td>Updated DriveMachineToSymbolicPoint behaviour in case of sending machine ID -1.</td></tr>
<tr><td>2.70</td><td>05.09.2022</td><td>Samuli Vaara</td><td>Added NearSymbolicPoint for AGV status, requires protocol version 7</td></tr>
<tr><td>2.71</td><td>15.09.2022</td><td>Toni Liski</td><td>Added a new message ReleaseStopAndHold (ID = 362).</td></tr>
<tr><td>2.72</td><td>28.09.2022</td><td>Toni Liski</td><td>Add MES Subscription for ProductionStatus (ID = 313) message.</td></tr>
<tr><td>2.73</td><td>28.09.2022</td><td>Toni Liski</td><td>Added a new message ReturnToRoute (ID = 361).</td></tr>
<tr><td>2.74</td><td>28.09.2022</td><td>Samuli Vaara</td><td>AGVStatus NearSymbolicPoint value when not found to -1, heading parameter was wrong in docs as well</td></tr>
<tr><td>2.75</td><td>28.09.2022</td><td>Toni Liski</td><td>DriveMachineToSymbolicPoint (ID = 19) extended to contain OrderFlags.</td></tr>
<tr><td>2.76</td><td>30.09.2022</td><td>Aleksi Ålander</td><td>ErrorsV2 (ID = 349) sends ID as uint32, if MES_StatusMessageProtocolVersion is set to at least 8.</td></tr>
<tr><td>2.77</td><td>30.11.2022</td><td>Toni Liski</td><td>Update maximum priority for certain production order and transfer request related messages.</td></tr>
<tr><td>2.78</td><td>03.02.2023</td><td>Simon Clement</td><td>Changed behavior of SymbolicPointResourceStatus (ID = 345) to return quantity of items in each resource when RequestSPResourceStatus (ID = 55) is sent with bit 3 enabled in RequestFlags.</td></tr>
</tbody></table>
</div>
<hr />
<h2 id="glossary"><a class="header" href="#glossary">Glossary</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Term</th><th>Description</th></tr></thead><tbody>
<tr><td>MES</td><td>Manufacturing execution system</td></tr>
<tr><td>Navithor</td><td>Navithor is fleet management software controlling a fleet of AGVs</td></tr>
</tbody></table>
</div>
<hr />
<h2 id="general"><a class="header" href="#general">General</a></h2>
<p>This document describes the interface between the Navithor Server and MES.</p>
<h2 id="communication-protocol"><a class="header" href="#communication-protocol">Communication protocol</a></h2>
<p>Communication between Navithor and MES client follows TCP/IP protocol where Navithor works as a TCP server.
Listening port for communication establishment is defined in parameters.
By default the listening port is 8015.</p>
<h2 id="endianness"><a class="header" href="#endianness">Endianness</a></h2>
<p>Little-endian format is used (LSB first). Navithor does not support big-endian currently.</p>
<hr />
<h2 id="mes-channel"><a class="header" href="#mes-channel">MES channel</a></h2>
<p>MES channel uses TCP protocol.
Navithor acts as a server, listens for connections and allows one or multiple PLCs to connect as a client.
Messages can be sent in both directions in an MES channel, e.g. for receiving commands from MES and reporting Navithor and AGV statuses back to MES.</p>
<h3 id="versioning-and-identification"><a class="header" href="#versioning-and-identification">Versioning and identification</a></h3>
<p>Communication protocol follows semantic versioning with a format XXX.YYY where XXX is major version and YYY is minor version.</p>
<p><em>Major number</em> is incremented whenever backwards compatibility of the specification is compromised and all SW through the system should be updated.
This kind of change in specification should be allowed only on very significant reasons.
Severity of changing major number naturally depends also on the number of different machines and applications in the system.
It is also possible to introduce new major number for special reasons even if the backwards compatibility has not been compromised.
For example if it is desirable to force all SW in the system to be updated for some reason.
As explained in the <em>&quot;Backward/forward compatibility&quot;</em> chapter, applications refuse to communicate with other parties if the major number of the communication specification does not match.
Any HMI application should give a clear error in such a case.</p>
<p><em>Minor number</em> is incremented whenever specification is extended or modified in backwards compatible manner but reflecting change in implementation.
These changes require software update to MES only if the new features of the specification need to be supported.
Whenever major number is increased, minor number is set to 0.</p>
<p>Every message includes identification information about its sender and receiver.
For instance, while sending a message each machine and HMI adds its identification number to a message header as a sender ID.
The same way an ID of machine or HMI the message is addressed to is included in the message header.
Therefore, the receiver can check who has sent the message using the sender ID and reject the message if its own ID does not match the receiver ID included in the message.</p>
<h3 id="backwardforward-compatibility"><a class="header" href="#backwardforward-compatibility">Backward/forward compatibility</a></h3>
<p>Rules:</p>
<ol>
<li>When a message is defined the same message id cannot be used for any other message.</li>
<li>The meaning of message bytes cannot be changed.</li>
<li>The length of message may vary:</li>
</ol>
<ul>
<li>Messages can be of any length;</li>
<li>Frame tells the length of message;</li>
<li>Received message can be longer than expected. In this case only the known bytes will be parsed.</li>
</ul>
<ol start="4">
<li>Messages can be extended as long as the meaning of the original bytes does not change.</li>
<li>Any number of new messages can be introduced.</li>
</ol>
<h2 id="sending-and-receiving-messages"><a class="header" href="#sending-and-receiving-messages">Sending and receiving messages</a></h2>
<p>Once connection between Navithor and MES has been successfully established Navithor will start sending following messages periodically:</p>
<ul>
<li><strong>AGVStatus</strong> (ID = 310) - status information of the AGVs in the system;</li>
<li><strong>InputValues</strong> (ID = 312) - input data from the AGVs;</li>
<li><strong>ProductionStatus</strong> (ID = 313) - status of all production orders in system.</li>
</ul>
<h3 id="message-respond-requirements"><a class="header" href="#message-respond-requirements">Message respond requirements</a></h3>
<p>MES is not required to answer or acknowledge any way to messages received from Navithor.</p>
<p>Navithor replies with <strong>AckOrReject</strong> message (ID = 200) to each successfully parsed message from MES and replies with corresponding reply-message when request is handled in Navithor.</p>
<h3 id="tips-for-client-software-mes"><a class="header" href="#tips-for-client-software-mes">Tips for client software (MES)</a></h3>
<ul>
<li>Send message <strong>VersionInfo</strong> (ID = 1) to verify that the communication matches with Navithor.</li>
<li>Send message <strong>SetTime</strong> (ID = 3) when needing to have the AGVs set time to MES time.</li>
</ul>
<hr />
<h2 id="message-structure"><a class="header" href="#message-structure">Message structure</a></h2>
<div class="table-wrapper"><table><thead><tr><th></th><th>Length(bytes)</th></tr></thead><tbody>
<tr><td>Frame</td><td>9</td></tr>
<tr><td>Message Data</td><td>0-65535</td></tr>
</tbody></table>
</div>
<h3 id="frame"><a class="header" href="#frame">Frame</a></h3>
<p>Every message has a frame that consists of following data.
Sender ID and Receiver ID are specified as follow:</p>
<p>Navithor: ID = 1000, MES clients: ID = 1001, 1002, ...
For example when sending a message from MES to Navithor Sender ID = 1001 and Receiver ID = 1000.</p>
<div class="table-wrapper"><table><thead><tr><th>Field</th><th>Type</th><th>Length (bytes)</th><th>Value</th><th>Description</th></tr></thead><tbody>
<tr><td>Id</td><td>uint16</td><td>2</td><td>0-65535</td><td>Message ID</td></tr>
<tr><td>Sender id</td><td>uint16</td><td>2</td><td>0-65535</td><td>Unique ID of the sender</td></tr>
<tr><td>Receiver id</td><td>uint16</td><td>2</td><td>0 Any, 1-65535 receiver id</td><td>Unique ID of the receiver</td></tr>
<tr><td>Message type</td><td>byte</td><td>1</td><td>1 reply needed, 2 reply not needed</td><td>Tells if the message needs to be replied</td></tr>
<tr><td>Data length</td><td>uint16</td><td>2</td><td>0-65535</td><td>Message data length in bytes (0 means that no other data than frame is sent)</td></tr>
</tbody></table>
</div>
<h3 id="message-data"><a class="header" href="#message-data">Message data</a></h3>
<p>Message data consists of bytes that are defined in Messages section of this document.</p>
<hr />
<h2 id="messages"><a class="header" href="#messages">Messages</a></h2>
<p>Following message-tables contains required information to build the message data.
&quot;Min Length&quot; and &quot;Max Length&quot; are byte counts containing bytes from message frame.
Thus, the minimum length is always at least 9 bytes for all messages.</p>
<h3 id="messages-from-mes-to-navithor"><a class="header" href="#messages-from-mes-to-navithor">Messages from MES to Navithor</a></h3>
<h4 id="getversion-id--1"><a class="header" href="#getversion-id--1">GetVersion (ID = 1)</a></h4>
<p>Gets the communication version from Navithor.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>0</td><td>9</td><td>9</td></tr>
</tbody></table>
</div>
<h4 id="getinitialsetup-id--2"><a class="header" href="#getinitialsetup-id--2">GetInitialSetup (ID = 2)</a></h4>
<p>Should not be used in new installations. Recommended way to get production area information is with GetProductionAreaInformation (ID = 52) instead.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>0</td><td>9</td><td>9</td></tr>
</tbody></table>
</div>
<h4 id="settime-id--3"><a class="header" href="#settime-id--3">SetTime (ID = 3)</a></h4>
<p>Sets the time on machine.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>Year</td><td>uint16</td><td>2</td><td>0-65536</td></tr>
<tr><td>Month</td><td>byte</td><td>1</td><td>1-12</td></tr>
<tr><td>Day</td><td>byte</td><td>1</td><td>1-31</td></tr>
<tr><td>Hour</td><td>byte</td><td>1</td><td>0-23</td></tr>
<tr><td>Minute</td><td>byte</td><td>1</td><td>0-59</td></tr>
<tr><td>Second</td><td>byte</td><td>1</td><td>0-59</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>7</td><td>16</td><td>16</td></tr>
</tbody></table>
</div>
<h4 id="fstop-id--4"><a class="header" href="#fstop-id--4">FSTOP (ID = 4)</a></h4>
<p>Sending this message will stop a specific machine or all machines in the production system. This also takes the machine(s) out of production.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineID</td><td>int16</td><td>2</td><td>Machine ID, -1 for all machines</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2</td><td>11</td><td>11</td></tr>
</tbody></table>
</div>
<h4 id="releasefstop-id--5"><a class="header" href="#releasefstop-id--5">ReleaseFSTOP (ID = 5)</a></h4>
<p>Sending this message will release the brakes and FSTOP-state of Navitrol. If automatic start production is enabled in Navithor machines are taken back into production automatically after a specified timeout (system parameter, default 30 seconds).</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineID</td><td>int16</td><td>2</td><td>Machine ID, -1 for all machines</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2</td><td>11</td><td>11</td></tr>
</tbody></table>
</div>
<h4 id="initializeposition-id--6"><a class="header" href="#initializeposition-id--6">InitializePosition (ID = 6)</a></h4>
<p>Sending this message will trigger position initialization for the requested machine. Valid position initialization locations are Symbolic Points that define at least posInitId1, see GetProductionAreaInformation (ID-52). To initialize position for any symbolic point see InitPositionToSymbolicPoint (ID = 59) instead.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineID</td><td>uint16</td><td>2</td><td></td></tr>
<tr><td>SymbolPointPosInitId</td><td>uint16</td><td>2</td><td>posInitId1 or posInitId2 of the correct Symbolic Point</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>4</td><td>13</td><td>13</td></tr>
</tbody></table>
</div>
<h4 id="chargingcommand-id--9"><a class="header" href="#chargingcommand-id--9">ChargingCommand (ID = 9)</a></h4>
<p>Sending this message will either trigger a charging request for a machine or release the charging request. Charging request from MES forces Navithor to find a valid charging location after the machine has executed its current production order. Charging request triggered by MES can only be released by MES (command = 0), i.e. machines will stay at charge as long as it has not been released by MES.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineID</td><td>uint16</td><td>2</td><td></td></tr>
<tr><td>command</td><td>uint16</td><td>2</td><td>0 no charge command, 1 charge command</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>4</td><td>13</td><td>13</td></tr>
</tbody></table>
</div>
<h4 id="outputall-id--10"><a class="header" href="#outputall-id--10">OutputAll (ID = 10)</a></h4>
<p>Sending this message will result Navithor to forward this data to the machine.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineId</td><td>uint16</td><td>2</td><td></td></tr>
<tr><td>DigitalOutputLength</td><td>uint16</td><td>2</td><td>Number of digital outputs, from 0 to max 32</td></tr>
<tr><td>DigitalOutputs</td><td>byte[]</td><td>0...32</td><td>If DigitalOutputLength == 0, skip this field</td></tr>
<tr><td>IntegerOutputLength</td><td>uint16</td><td>2</td><td>Number of integer outputs, from 0 to max 32</td></tr>
<tr><td>IntegerOutputs</td><td>int[]</td><td>0...128</td><td>If IntegerOutputLength == 0, skip this field</td></tr>
<tr><td>FloatOutputLength</td><td>uint16</td><td>2</td><td>Number of float outputs, from 0 to max 32</td></tr>
<tr><td>FloatOutPuts</td><td>float[]</td><td>0...128</td><td>If FloatOutputLength == 0, skip this field</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>8 + DigitalOutputLength + IntegerOutputLength * 4 + FloatOutputLength * 4</td><td>17</td><td>305</td></tr>
</tbody></table>
</div>
<h4 id="outputdigital-id--11"><a class="header" href="#outputdigital-id--11">OutputDigital (ID = 11)</a></h4>
<p>Sending this message will result Navithor to forward this data to the machine.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineID</td><td>uint16</td><td>2</td><td></td></tr>
<tr><td>DigitalOutNumber</td><td>uint16</td><td>2</td><td>Starting from index 0, maximum number 31</td></tr>
<tr><td>DigitalOutValue</td><td>byte</td><td>1</td><td></td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>5</td><td>14</td><td>14</td></tr>
</tbody></table>
</div>
<h4 id="outputinteger-id--12"><a class="header" href="#outputinteger-id--12">OutputInteger (ID = 12)</a></h4>
<p>Sending this message will result Navithor to forward this data to the machine.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineID</td><td>uint16</td><td>2</td><td></td></tr>
<tr><td>IntegerOutNumber</td><td>uint16</td><td>2</td><td>Starting from index 0, maximum number 31</td></tr>
<tr><td>IntegerOut</td><td>int32</td><td>4</td><td></td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>8</td><td>17</td><td>17</td></tr>
</tbody></table>
</div>
<h4 id="outputfloat-id--13"><a class="header" href="#outputfloat-id--13">OutPutFloat (ID = 13)</a></h4>
<p>Sending this message will result Navithor to forward this data to the machine.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineID</td><td>uint16</td><td>2</td><td></td></tr>
<tr><td>FloatOutNumber</td><td>uint16</td><td>2</td><td>Starting from index 0, maximum number 31</td></tr>
<tr><td>FloatOut</td><td>float</td><td>4</td><td></td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>8</td><td>17</td><td>17</td></tr>
</tbody></table>
</div>
<h4 id="startstopproduction-id--14"><a class="header" href="#startstopproduction-id--14">StartStopProduction (ID = 14)</a></h4>
<p>Sending this message will command Navithor to start or stop production with the selected machine or the whole fleet.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineID</td><td>int16</td><td>2</td><td>Machine ID, -1 for all machines</td></tr>
<tr><td>Start</td><td>byte</td><td>1</td><td>1 = Start, 0 = Stop</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>3</td><td>12</td><td>12</td></tr>
</tbody></table>
</div>
<h4 id="enablemachine-id--15"><a class="header" href="#enablemachine-id--15">EnableMachine (ID = 15)</a></h4>
<p>Sending this message will enable or disable a selected machine or all machines in the system. Enable machine takes machine into use in Navithor. Disable machine removes the machine from Navithor. <strong>NOTE! Navithor releases the traffic zones that machine reserved when machine is disabled.</strong></p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineID</td><td>int16</td><td>2</td><td>Machine ID, -1 for all machines</td></tr>
<tr><td>Enable</td><td>byte</td><td>1</td><td>0 = Disable, 1 = Enable</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>3</td><td>12</td><td>12</td></tr>
</tbody></table>
</div>
<h4 id="addproductionorder-id--16"><a class="header" href="#addproductionorder-id--16">AddProductionOrder (ID = 16)</a></h4>
<p>Sending this message will trigger Navithor to generate a production order for a specific machine. By default the target can be changed if unavailable. Enable strict unload bit to disable this behaviour.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineID</td><td>int16</td><td>2</td><td>Machine ID</td></tr>
<tr><td>productionOrderID</td><td>uint32</td><td>4</td><td>OrderID, unique for each order</td></tr>
<tr><td>fromSymbolicPoint</td><td>uint16</td><td>2</td><td>Symbolic point ID where order starts</td></tr>
<tr><td>toSymbolicPoint</td><td>uint16</td><td>2</td><td>Symbolic point ID where order ends</td></tr>
<tr><td>ItemsToDeliver</td><td>uint16</td><td>2</td><td>Number Of Items to deliver</td></tr>
<tr><td>ItemType</td><td>uint16</td><td>2</td><td>Item ID</td></tr>
<tr><td>StartTimeLength</td><td>uint16</td><td>2</td><td>If 0 start time not defined</td></tr>
<tr><td>StartTime</td><td>string</td><td>0 or 19</td><td>&quot;yyyy.mm.dd.hh.mm.ss&quot;</td></tr>
<tr><td>Priority</td><td>uint16</td><td>2</td><td>1 to 32767, where 1 has the lowest priority</td></tr>
<tr><td>OrderFlags</td><td>uint32</td><td>4</td><td><strong>Optional field, added in MES version 2.20</strong> Bitmask to define behavior of the production order. Bits 1-6 affect resource handling with multi resource container. Check the table below for details.</td></tr>
<tr><td>RackData</td><td>struct</td><td>8...518</td><td><strong>Optional field, added in MES version 2.64.</strong> Specifies shelf and rack IDs for pickup and dropoff locations. Check table below for data structure.</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>18 + StartTimeLength + optional fields</td><td>27</td><td>568</td></tr>
</tbody></table>
</div>
<p><strong>OrderFlags bitmask</strong></p>
<div class="table-wrapper"><table><thead><tr><th><strong>OrderFlags bits</strong></th><th><strong>Bitmask</strong></th><th><strong>Numeric value</strong></th></tr></thead><tbody>
<tr><td>None</td><td>0</td><td>0</td></tr>
<tr><td>Pickup whole stack</td><td>1 &lt;&lt; 0</td><td>1</td></tr>
<tr><td>Dropoff whole stack</td><td>1 &lt;&lt; 1</td><td>2</td></tr>
<tr><td>Pickup load from bottom of the stack</td><td>1 &lt;&lt; 2</td><td>4</td></tr>
<tr><td>Pickup load from top of the stack</td><td>1 &lt;&lt; 3</td><td>8</td></tr>
<tr><td>Dropoff to bottom of the stack</td><td>1 &lt;&lt; 4</td><td>16</td></tr>
<tr><td>Dropoff to top of the stack</td><td>1 &lt;&lt; 5</td><td>32</td></tr>
<tr><td>Strict unload (Navithor will not change target)</td><td>1 &lt;&lt; 6</td><td>64</td></tr>
<tr><td>Remove load from the system after dropoff</td><td>1 &lt;&lt; 7</td><td>128</td></tr>
<tr><td>After completing PO, take machine out of production</td><td>1 &lt;&lt; 8</td><td>256</td></tr>
<tr><td>Ignore resources at pickup location</td><td>1 &lt;&lt; 9</td><td>512</td></tr>
<tr><td>Ignore resources at target location</td><td>1 &lt;&lt; 10</td><td>1024</td></tr>
<tr><td>Reserved for internal use</td><td>1 &lt;&lt; 11 to 15</td><td>Do not use</td></tr>
<tr><td>Only pickup order</td><td>1 &lt;&lt; 16</td><td>65536</td></tr>
<tr><td>Only dropoff order</td><td>1 &lt;&lt; 17</td><td>131072</td></tr>
<tr><td>Rack data included in the packet</td><td>1 &lt;&lt; 18</td><td>262144</td></tr>
<tr><td>Load needs to be validated before picking up</td><td>1 &lt;&lt; 19</td><td>524288</td></tr>
<tr><td>A new production order is needed to complete PO</td><td>1 &lt;&lt; 20</td><td>1048576</td></tr>
</tbody></table>
</div>
<p><strong>Optional data: Rack Data</strong></p>
<p>Specifies shelf and rack IDs for pickup and dropoff locations. If rack ID is given, it will override the symbolic point ID and specify desired side of the rack for side loaders.
For regular racks (not a sideloader) or non-rack locations, the PickupRackIdLength and DropoffRackIdLength should be given as 0.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>PickupShelfID</td><td>uint16</td><td>2</td><td>Shelf ID for the height where the load needs to be picked up from (0 for non-rack symbolic points)</td></tr>
<tr><td>PickupRackIdLength</td><td>uint16</td><td>2</td><td>Length of the rack identifier</td></tr>
<tr><td>PickupRackId</td><td>string</td><td>0...255</td><td>Rack identifier, max 255 chars.</td></tr>
<tr><td>DropoffShelfID</td><td>uint16</td><td>2</td><td>Shelf ID for the height where the load needs to be moved to (0 for non-rack symbolic points)</td></tr>
<tr><td>DropoffRackIdLength</td><td>uint16</td><td>2</td><td>Length of the rack identifier</td></tr>
<tr><td>DropoffRackId</td><td>string</td><td>0...255</td><td>Rack identifier, max 255 chars.</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>8</td><td>518</td></tr>
</tbody></table>
</div>
<h4 id="enableproductionorder-id--17"><a class="header" href="#enableproductionorder-id--17">EnableProductionOrder (ID = 17)</a></h4>
<p>Sending this message will enable or disable a specific production order or all orders in the system.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>productionOrderId</td><td>int32</td><td>4</td><td>Production order ID, -1 for all production orders</td></tr>
<tr><td>Enable</td><td>byte</td><td>1</td><td>0 = Disable, 1 = Enable</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>5</td><td>14</td><td>14</td></tr>
</tbody></table>
</div>
<h4 id="releasehold-id--18"><a class="header" href="#releasehold-id--18">ReleaseHold (ID = 18)</a></h4>
<p>Sending this message will trigger Navithor to release a machine in the Symbolic Point from HOLD-state and generate a production order for the machine to the specified target location.</p>
<p><strong>Note:</strong> HOLD feature is a separate feature from StopAndHold, so this message should not be mixed with <em>ReleaseStopAndHold (ID = 362)</em>.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>SymbolicPointId</td><td>uint16</td><td>2</td><td>Symbolic point ID where hold is released</td></tr>
<tr><td>ReleaseTarget</td><td>byte</td><td>1</td><td>0 = default, 1 = first alternative, 2 = second alternative, 3 = third alternative. Note: This is index for predefined hold-Release targets. Use ReleaseHoldToCustomTarget (ID = 29) instead to release by SymbolicPoint ID</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>3</td><td>12</td><td>12</td></tr>
</tbody></table>
</div>
<h4 id="drivemachinetosymbolicpoint-id--19"><a class="header" href="#drivemachinetosymbolicpoint-id--19">DriveMachineToSymbolicPoint (ID = 19)</a></h4>
<p>Sending this message will result Navithor to either create a production order for the machine if MachineId is greater than 0.
Using MachineId less than zero results Navithor to create a drive request to the Symbolic Point. Navithor will then reason the best possible machine to execute the drive order.</p>
<p>If drive request is given to a location that has Hold-rule enabled, machine goes to hold after arriving at the location.
If location is a WaitLoad symbolic point, machine goes to <em>Wait for production</em> task and can continue with any valid order from there.
For other type of symbolic points the production order is completed, but the system does not guarantee that the AGV would stay at this location.
If there are no unhandeld orders available and there is a reachable wait location available, the AGV will start driving towards the wait location.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineId</td><td>int16</td><td>2</td><td>Machine ID, use &lt; 0 to allow Navithor to select the machine</td></tr>
<tr><td>productionOrderID</td><td>uint32</td><td>4</td><td>OrderID, unique for each order</td></tr>
<tr><td>toSymbolicPoint</td><td>uint16</td><td>2</td><td>Symbolic point ID where order ends</td></tr>
<tr><td>StartTimeLength</td><td>uint16</td><td>2</td><td>If 0 start time not defined</td></tr>
<tr><td>StartTime</td><td>string</td><td>0 or 19</td><td>&quot;yyyy.mm.dd.hh.mm.ss&quot;</td></tr>
<tr><td>Priority</td><td>uint16</td><td>2</td><td>1 to 32767, where 1 has the lowest priority</td></tr>
<tr><td>OrderFlags (optional)</td><td>uint32</td><td>4</td><td><strong>Optional field:</strong> OrderFlags to define specific options for generated production order. Can be left out from the message.<br /> - With <code>NewOrderRequiredToComplete (1 &lt;&lt; 20 = 1048576)</code> is required that a new production order is needed to complete DriveMachineToSymbolicPoint production order.</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>12 + StartTimeLength</td><td>21</td><td>44</td></tr>
</tbody></table>
</div>
<h4 id="setstatusatsymbolicpoint-id--20"><a class="header" href="#setstatusatsymbolicpoint-id--20">SetStatusAtSymbolicPoint (ID = 20)</a></h4>
<p>Sending this message will either enable or disable and set resource status to the Symbolic Point. Navithor will not order drives to disabled Symbolic Points.</p>
<p>AffixNumber was added in Navithor 1.9.26.0, the old message format without the field is still supported.</p>
<p><strong>AffixNumber is set to 0 if it is not included in the message. RequestPickup-field is supported in Navithor version 1.9.60.0 and above.</strong></p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>SymbolicPoint</td><td>uint16</td><td>2</td><td>Symbolic point ID</td></tr>
<tr><td>NumberOfItems</td><td>uint16</td><td>2</td><td>Number of items of given type at the symbolic point location</td></tr>
<tr><td>ItemTypeId</td><td>uint16</td><td>2</td><td>0 if no resource at location, otherwise item type ID that will be set available at the location.<br/>ItemTypeID:s are defined in MachineTool</td></tr>
<tr><td>Enabled</td><td>byte</td><td>1</td><td>0 = Disabled, 1 = Enabled</td></tr>
<tr><td>AffixNumber</td><td>double</td><td>8</td><td><strong>Optional field, on default set to 0.</strong> Number used in additional resource info. Informational purpose only</td></tr>
<tr><td>RequestPickup</td><td>byte</td><td>1</td><td><strong>Optional field, on default set to 0.</strong> If value 1 a pickup request is automatically triggered for the resource that is set to be at the location. If Location is empty this field does not have affect</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>7 + optional fields length</td><td>16</td><td>25</td></tr>
</tbody></table>
</div>
<h4 id="transferrequest-id--21"><a class="header" href="#transferrequest-id--21">TransferRequest (ID = 21)</a></h4>
<p>Sending this message will result Navithor to create a production source to the pick-up Symbolic Point. Navithor will assign machines that can carry the item type to the target Symbolic Point to fulfil the transfer request.</p>
<p>Used together with SetStatusAtSymbolicPoint-message. Start production from a symbolic with this message and inform the actual resource to be available at the location with message SetStatusAtSymbolicPoint.</p>
<p><strong>Fields &quot;Priority&quot; and &quot;RequestID&quot; are supported in Navithor version 1.9.62.X -&gt; MES interface updated to version 1.7. Older versions support only shorter form of the message. Version 2.4 supports both.</strong></p>
<p><strong>Fields &quot;PickupIDType&quot; and &quot;TargetIDType&quot; are supported in Navithor Version 2.1.X.X. -&gt;</strong></p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>PickupSymbolicPoint</td><td>uint16</td><td>2</td><td>Symbolic point ID</td></tr>
<tr><td>TargetSymbolicPoint</td><td>uint16</td><td>2</td><td>Symbolic point ID</td></tr>
<tr><td>ItemsToPickup</td><td>uint16</td><td>2</td><td>Number of items</td></tr>
<tr><td>ItemTypeId</td><td>uint16</td><td>2</td><td></td></tr>
<tr><td>StrictUnloadLoc</td><td>byte</td><td>1</td><td><strong>Optional field</strong> Obsolete field: If Transfer Request is given to a single symbolic point, unload location is never changed (strict unload location rule). If given to symbolic point group instead, unload location can be changed within this group.</td></tr>
<tr><td>Priority</td><td>byte</td><td>1</td><td><strong>Optional field</strong> 1 to 127, where 1 has the lowest priority. Value 0 means Navithor default priority</td></tr>
<tr><td>RequestID</td><td>uint32</td><td>4</td><td><strong>Optional field</strong> ID sent by the planner. TransferRequest is initially answered by AckOrReject (ID = 200) and later when production order is created for the TransferRequest, TransferRequestStatus message (ID = 323) is sent using this RequestID</td></tr>
<tr><td>PickupIDType</td><td>byte</td><td>1</td><td><strong>Optional field</strong> <p></p>0 = PickupSymbolicPoint-field points to symbolic point ID<br/>1 = PickupSymbolicPoint-field points to symbolic point group ID</td></tr>
<tr><td>TargetIDType</td><td>byte</td><td>1</td><td><strong>Optional field</strong> <p></p>0 = TargetSymbolicPoint-field points to symbolic point ID<br/>1 = TargetSymbolicPoint-field points to symbolic point group ID</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>8 + optional fields length</td><td>17</td><td>25</td></tr>
</tbody></table>
</div>
<h4 id="activateproductionorderlist-id--22"><a class="header" href="#activateproductionorderlist-id--22">ActivateProductionOrderList (ID = 22)</a></h4>
<p>MES can activate a production order list by sending this message.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>POLId</td><td>uint32</td><td>4</td><td>ID of the Production Order List template that was activated</td></tr>
<tr><td>MachineID</td><td>int32</td><td>4</td><td>ID of the machine that is requested to execute this list. Less than 0 if any machine</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>8</td><td>17</td><td>17</td></tr>
</tbody></table>
</div>
<h4 id="requestproductionorderlisttemplates-id--23"><a class="header" href="#requestproductionorderlisttemplates-id--23">RequestProductionOrderListTemplates (ID = 23)</a></h4>
<p>MES can request current templates of production order lists with this message. Navithor replies with ProductionOrderListTemplateResult-message.</p>
<p>Templates can be created/edited and deleted from Navithor Client. Templates are saved in Navithor database.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>0</td><td>9</td><td>9</td></tr>
</tbody></table>
</div>
<h4 id="tagstatus-id--24"><a class="header" href="#tagstatus-id--24">TagStatus (ID = 24)</a></h4>
<p>MES can set a status for defined tags. Following tag linking’s are supported by Navithor:</p>
<ul>
<li>Symbolic Point of type ’Door’</li>
</ul>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>TagID</td><td>uint32</td><td>4</td><td>Tag ID defined in Navithor Tools for Symbolic Point</td></tr>
<tr><td>TagStatus</td><td>int32</td><td>4</td><td>Status of the tag. Defined values:<p></p> 0 = OFFLINE<br/>1 = DOOR CLOSED<br/>2 = DOOR CLOSING<br/>3 = DOOR OPENING<br/>4 = DOOR OPEN</td></tr>
<tr><td>TagType</td><td>byte</td><td>1</td><td><strong>Optional field</strong>, Status type (introduced in version 1.80, defaults to 1, if not send in the message):<p></p> 0 = NO ACTION<br/>1 = DOOR STATUS</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>8 + optional fields length</td><td>17</td><td>18</td></tr>
</tbody></table>
</div>
<h4 id="requestpickup-id--25"><a class="header" href="#requestpickup-id--25">RequestPickUp (ID = 25)</a></h4>
<p>Sending this message will result Navithor to create an unhandled pickup order and/or send back RequestPickUpResult message.</p>
<p>If symbolic point is a rack, then ShelfId field must be set to a positive value of valid shelf ID on the rack. If symbolic point is not a rack, then ShelfId field must be skipped or set to zero or any negative value.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>Symbolic Point ID</td><td>uint32</td><td>4</td><td>Symbolic Point ID defined in Navithor Tools for Symbolic Point</td></tr>
<tr><td>Shelf ID</td><td>int32</td><td>4</td><td><strong>Optional field</strong>, Shelf ID if symbolic point is a rack</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>4 + optional fields length</td><td>13</td><td>17</td></tr>
</tbody></table>
</div>
<h4 id="clearproductionorders-id--26"><a class="header" href="#clearproductionorders-id--26">ClearProductionOrders (ID = 26)</a></h4>
<p>Sending this message will command Navithor to clear production orders from the selected machine or the whole fleet.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineId</td><td>int16</td><td>2</td><td>Machine ID, -1 for all machines</td></tr>
<tr><td>ClearProduction</td><td>byte</td><td>1</td><td>1 = clear all production orders, 0 = no action</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>3</td><td>12</td><td>12</td></tr>
</tbody></table>
</div>
<h4 id="cleartransferrequests-id--27"><a class="header" href="#cleartransferrequests-id--27">ClearTransferRequests (ID = 27)</a></h4>
<p>Sending this message will command Navithor to clear all transfer requests from the given symbolic point or from all the symbolic points. Also sets the production status of the symbolic point to RequestForPickupRequired, so if there is a resource and it needs to be transported, either a new TransferRequest or RequestForPickup is needed.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>Symbolic Point ID</td><td>int32</td><td>4</td><td>Symbolic point ID, -1 for all symbolic points</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>4</td><td>13</td><td>13</td></tr>
</tbody></table>
</div>
<h4 id="cancelactiveproductionorderlist-id--28"><a class="header" href="#cancelactiveproductionorderlist-id--28">CancelActiveProductionOrderList (ID = 28)</a></h4>
<p>Sending this message will command Navithor cancel specified active production order list(s).</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>Cancel Mode</td><td>byte</td><td>1</td><td>Affect how &quot;Target ID&quot;-field is handled:<p></p> 0 = Cancel active production order with given order ID (Target ID = Active Production Order ID)<br/>1 = Cancel active production order list of given AGV ID (Target ID = MachineID)<br/>2 = Cancel all active production order lists with given template ID<br/>(TargetID == Production Order Template ID)</td></tr>
<tr><td>AgvToFinal</td><td>byte</td><td>1</td><td>1 = if AGV was executing the cancelled production order list it will be rerouted to the final destination of the cancelled production order list.<br/>0 = Agv will not be rerouted anywhere – normal &quot;no production&quot; handling takes place</td></tr>
<tr><td>Target ID</td><td>uint32</td><td>4</td><td>ID of the active production order list, machine ID or production order list template. Usage defined in &quot;Cancel Mode&quot;</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>6</td><td>15</td><td>15</td></tr>
</tbody></table>
</div>
<h4 id="releaseholdtocustomtarget-id--29"><a class="header" href="#releaseholdtocustomtarget-id--29">ReleaseHoldToCustomTarget (ID = 29)</a></h4>
<p>Sending this message will trigger Navithor to release a machine in the Symbolic Point from HOLD-state and generate a production order for the machine to a custom target location, which is given in the message.</p>
<p><strong>Note:</strong> HOLD feature is a separate feature from StopAndHold, so this message should not be mixed with <em>ReleaseStopAndHold (ID = 362)</em>.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>symbolicPointId</td><td>uint16</td><td>2</td><td>Symbolic point ID where hold is released</td></tr>
<tr><td>releaseTargetId</td><td>uint16</td><td>2</td><td>Target symbolic point ID for the next drive order</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>4</td><td>13</td><td>13</td></tr>
</tbody></table>
</div>
<h4 id="setdriveoffset-id--30"><a class="header" href="#setdriveoffset-id--30">SetDriveOffset (ID = 30)</a></h4>
<p>The offset information will be sent to Navitrol and the machine should drive the route with the given offset. The offset resets after reaching the given symbolic point, if the target is defined.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineId</td><td>int32</td><td>4</td><td>Machine ID, -1 for all machines</td></tr>
<tr><td>toSymbolicPoint</td><td>int32</td><td>4</td><td>Symbolic point ID where offset resets, -1 to disable automatic reset</td></tr>
<tr><td>Transversal offset</td><td>float</td><td>4</td><td>Positive value to the left of the route, 0 = no offset</td></tr>
<tr><td>Longitudinal offset</td><td>float</td><td>4</td><td>Positive value for driving past the end point. 0 = no offset</td></tr>
<tr><td>Heading offset</td><td>float</td><td>4</td><td>Positive value CCW from route vehicle heading in degrees. 0 = no offset</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>20</td><td>29</td><td>29</td></tr>
</tbody></table>
</div>
<h4 id="setsymbolicpointavailability-id--31"><a class="header" href="#setsymbolicpointavailability-id--31">SetSymbolicPointAvailability (ID = 31)</a></h4>
<p>Sets symbolic point to enabled or disabled state.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>SymbolicPointId</td><td>uint16</td><td>2</td><td>ID of symbolic point</td></tr>
<tr><td>Enabled</td><td>byte</td><td>1</td><td>0 = Disabled<br/>1 = Enabled<br/>2 = No change, use last enabled status<br/>2-255 = Reserved</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>3</td><td>12</td><td>12</td></tr>
</tbody></table>
</div>
<h4 id="setresourcesatlocation-id--32"><a class="header" href="#setresourcesatlocation-id--32">SetResourcesAtLocation (ID = 32)</a></h4>
<p>Sets resources to location. If same data is being sent the resources at location will not change. If order of MESResourceAtLocation is changed or if any of data is different from what Navithor thinks then the resources will be regenerated.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>SymbolicPointId</td><td>uint16</td><td>2</td><td>ID of symbolic point</td></tr>
<tr><td>ResourceAtLocationCount</td><td>uint16</td><td>2</td><td>Count of ResourceAtLocation structures in array (from 0 to 1000)</td></tr>
<tr><td>ResourcesAtLocation</td><td>ResourceAtLocation[]</td><td>ResourceAtLocationCount * ResourceAtLocation length</td><td>Array of ResourceAtLocation structures</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>4 + ResourceAtLocation length</td><td>13</td><td>8013</td></tr>
</tbody></table>
</div>
<p><strong>ResourceAtLocation</strong></p>
<p>ResourceAtLocation struct.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>ResourceTypeId</td><td>int32</td><td>4</td><td>ID of resource type</td></tr>
<tr><td>Quantity</td><td>int32</td><td>4</td><td>How many of given resource type are at location</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>8</td><td>8</td></tr>
</tbody></table>
</div>
<h4 id="setareaforbidden-id--33"><a class="header" href="#setareaforbidden-id--33">SetAreaForbidden (ID = 33)</a></h4>
<p>This message can be used to forbid or allow AGV driving on specific route segments/areas. Multiple waypoints can be allowed or forbidden in a single message. Valid from Navithor version 2.0.1.8 forwards.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>Forbidden area ID</td><td>uint16</td><td>2</td><td>ID for the forbidden area</td></tr>
<tr><td>IsAllowed</td><td>byte</td><td>1</td><td>1 = Driving is allowed, 0 = driving not allowed</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>3</td><td>12</td><td>12</td></tr>
</tbody></table>
</div>
<h4 id="setsymbolicpointgroupstatus-id--34"><a class="header" href="#setsymbolicpointgroupstatus-id--34">SetSymbolicPointGroupStatus (ID = 34)</a></h4>
<p>This message can be used to set resource related status for a SymbolicPointGroup.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>GroupID</td><td>uint16</td><td>2</td><td>ID of the SymbolicPointGroup</td></tr>
<tr><td>GroupStatus</td><td>uint16</td><td>2</td><td>0 = disable all symbolic points in this group<br/> &gt; 0 = enable all symbolic points in this group</td></tr>
<tr><td>RequestedResourceType</td><td>uint16</td><td>2</td><td>0 = set all symbolic points in this group as empty<br/> &gt; 0 = set resource count for to all points in the group</td></tr>
<tr><td>ResourceCount</td><td>uint16</td><td>2</td><td>Number of resources for each point in this group. If value is higher than maximum amount of resources, then the maximum amount is applied</td></tr>
<tr><td>ResFillMode</td><td>uint16</td><td>2</td><td>Strategy for filling symbolic point groups:<p></p> 0 = Set &quot;ResourceCount&quot; of resources to ALL symbolic points. Max total amount in group: ResourceCount * SymPointGroupCount<br/> 1 = Set symbolic point resources in sorted order. Max total amount in group: ResourceCount</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>10</td><td>19</td><td>19</td></tr>
</tbody></table>
</div>
<h4 id="groupedtagstatus-id--35"><a class="header" href="#groupedtagstatus-id--35">GroupedTagStatus (ID = 35)</a></h4>
<p>MES can set statuses for an arbitrary number of tags in a single message.</p>
<ul>
<li>Symbolic Point of type ’Door’</li>
</ul>
<p>Available from Navithor server versions 2.1.2.0 onwards.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>NumberOfTags</td><td>uint16</td><td>2</td><td>Number of tag datas to send (N). Max 100</td></tr>
<tr><td>TagDatas</td><td>TagData[]</td><td>4 * N</td><td>Tag ID defined in Navithor Tools for Symbolic Point</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2 + TagDatas length</td><td>17</td><td>417</td></tr>
</tbody></table>
</div>
<p><strong>TagData</strong></p>
<p>Data structure for a single machine type.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>TagID</td><td>uint16</td><td>2</td><td>Tag ID defined in Navithor Tools for Symbolic Point</td></tr>
<tr><td>TagStatus</td><td>uint16</td><td>2</td><td>Status of the tag. Defined values:<p></p> 0 = OFFLINE<br/>1 = DOOR CLOSED<br/>2 = DOOR CLOSING<br/>3 = DOOR OPENING<br/>4 = DOOR OPEN</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>4</td><td>4</td></tr>
</tbody></table>
</div>
<h4 id="firealarmsignal-id--36"><a class="header" href="#firealarmsignal-id--36">FireAlarmSignal (ID = 36)</a></h4>
<p>This message can be used to activate fire alarm. AGVs inside the active fire alarm zone will drive away of the zone to the closest available symbolic point outside of the zone. During normal operation status is 1. When the fire alarm is active, Status 3 should be sent.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>FireAlarmId</td><td>uint32</td><td>4</td><td>ID for the fire alarm zone</td></tr>
<tr><td>Status</td><td>byte</td><td>1</td><td>0 = none, <strong>1 = inactive</strong>, 2 = deactivating, <strong>3 = fire alarm active</strong></td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>5</td><td>14</td><td>14</td></tr>
</tbody></table>
</div>
<h4 id="cleartransferrequestwithtransferid-id--37"><a class="header" href="#cleartransferrequestwithtransferid-id--37">ClearTransferRequestWithTransferID (ID = 37)</a></h4>
<p>Sending this message will command Navithor to clear a Transfer request with specified TransferID if it exists. Sending -1 as TransferID will clear all transfer requests. This will also remove generated production order if resource has not been picked up. If the resource has been picked up then only the transfer request is removed while the production order remains active.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>TransferID</td><td>int32</td><td>4</td><td>TransferID, -1 for all transfers</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>4</td><td>13</td><td>13</td></tr>
</tbody></table>
</div>
<h4 id="drivemachinetosymbolicpointwithstops-id--38"><a class="header" href="#drivemachinetosymbolicpointwithstops-id--38">DriveMachineToSymbolicPointWithStops (ID = 38)</a></h4>
<p>The MES can send this message to Navithor. Navithor will acknowledge with AckOrReject message.</p>
<p>Sending this message will result Navithor to create a production order for the machine if MachineId is greater than 0.</p>
<p>If MES generates the order with the IsMachineReserved flag set to 1 then the machine executes the order and stays in stop and hold mode until released.</p>
<p>On each stopping point machine goes to stop and hold mode until released.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>ProductionOrderId</td><td>int32</td><td>4</td><td>Order ID, unique for each order</td></tr>
<tr><td>Priority</td><td>uint16</td><td>2</td><td>Order priority from 1 to 32767, where 1 is the lowest priority</td></tr>
<tr><td>MachineId</td><td>int32</td><td>4</td><td>Machine ID</td></tr>
<tr><td>StartSpId</td><td>uint16</td><td>2</td><td>Start symbolic point ID</td></tr>
<tr><td>EndSpId</td><td>uint16</td><td>2</td><td>End symbolic point ID</td></tr>
<tr><td>IsMachineReserved</td><td>uint16</td><td>2</td><td>Flag to tell if the machine is reserved until released:<p></p> 0 = machine is <strong>not</strong> reserved<br/>1 = machine is reserved</td></tr>
<tr><td>NumberOfStops</td><td>uint16</td><td>2</td><td>Number of stopping points, from 1 to 20.<br/>Each of the points has a distance to target, needs to be before the symbolic point</td></tr>
<tr><td>StoppingDistances</td><td>int32[]</td><td>NumberOfStops * 4</td><td>List of stopping points’ distances, in millimeters, in decreasing order, one or more (negative values are invalid for now). Minimum decrease is 5 mm</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>18 + StoppingDistances length</td><td>31</td><td>107</td></tr>
</tbody></table>
</div>
<h4 id="racktransferrequest-id--39"><a class="header" href="#racktransferrequest-id--39">RackTransferRequest (ID = 39)</a></h4>
<p>Sending this message will result Navithor to create a production source to the pick-up Symbolic Point. Navithor will assign machines that can carry the item type to the target Symbolic Point to fulfil the transfer request.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>Pickup symbol ID</td><td>uint16</td><td>2</td><td>ID of the symbolic point where the load needs to be picked up from</td></tr>
<tr><td>Pickup shelf ID</td><td>uint16</td><td>2</td><td>Shelf ID for the height where the load needs to be picked up from (0 for non-rack symbolic points)</td></tr>
<tr><td>Target symbol ID</td><td>uint16</td><td>2</td><td>ID of the symbolic point where the load needs to be moved to</td></tr>
<tr><td>Target shelf ID</td><td>uint16</td><td>2</td><td>Shelf ID for the height where the load needs to be moved to (0 for non-rack symbolic points)</td></tr>
<tr><td>Item type ID</td><td>uint16</td><td>2</td><td>Type ID for the load</td></tr>
<tr><td>Priority</td><td>uint16</td><td>2</td><td>Priority for the transfer. The higher this number, the higher the priority. Lowest priority is 1, and 0 means to use default priority.</td></tr>
<tr><td>Ignore pickup status</td><td>uint16</td><td>2</td><td>0 = Transfer request is executed only when the pickup symbol actually has the load on the correct shelf<br/>1 = The load with the item type ID given in this message will be created on the pickup symbol on the pickup shelf when this message is received. If there already is an item on the shelf the type will be converted to the one given in this message</td></tr>
<tr><td>Ignore target status</td><td>uint16</td><td>2</td><td>0 = Transfer request will not be executed until the target location and shelf are available<br/>1 = Transfer request will be executed regardless of the target’s load status. If Navithor thinks there is something on the target shelf, the information will be overridden when the AGV unloads its load on the target</td></tr>
<tr><td>Extra information flags</td><td>uint16</td><td>2</td><td>Mandatory bitmask field that is used to determine which optional fields are included in this message. Sending 0 means no additional data is included. Values larger than 0 mean that optional data is being included and must be parsed.</td></tr>
<tr><td>Optional data</td><td>byte[]</td><td>0...N</td><td>Optional data to be included.</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>18 + OptionalDataLength</td><td>27</td><td>1465</td></tr>
</tbody></table>
</div>
<p><strong>ExtraInformation bitmask</strong></p>
<div class="table-wrapper"><table><thead><tr><th><strong>ExtraInformation bits</strong></th><th><strong>Bitmask</strong></th><th><strong>Numeric value</strong></th></tr></thead><tbody>
<tr><td>None</td><td>0</td><td>0</td></tr>
<tr><td>Barcode</td><td>1 &lt;&lt; 0</td><td>1</td></tr>
<tr><td>TransferId</td><td>1 &lt;&lt; 1</td><td>2</td></tr>
<tr><td>BlockStacking</td><td>1 &lt;&lt; 2</td><td>4</td></tr>
<tr><td>PickupRackId</td><td>1 &lt;&lt; 3</td><td>8</td></tr>
<tr><td>TargetRackId</td><td>1 &lt;&lt; 4</td><td>16</td></tr>
</tbody></table>
</div>
<p>Combining multiple bits is allowed. To include both Barcode and TransferId the ExtraInformation should be set to 3 (1 + 2). To include Barcode and BlockStacking but not TransferId the value should be set to 5 (1 + 4).</p>
<p>The order of optional data MUST match the order of bits listed above. For example if both TransferId and BlockStacking are included then the data for TransferId MUST be included first and the data for BlockStacking MUST be included second.</p>
<p><strong>Optional data: Barcode</strong></p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>BarcodeLength</td><td>uint16</td><td>2</td><td>Length of the barcode identifier</td></tr>
<tr><td>Barcode</td><td>string</td><td>[0…N]</td><td>Barcode identifier</td></tr>
</tbody></table>
</div>
<p>RESERVED, NOT IMPLEMENTED!</p>
<p>Specifies barcode or other unique identifier for resource to be transferred. If this is not included then resource will not have associated string identifier.</p>
<p><strong>Optional data: TransferId</strong></p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>TransferId</td><td>uint32</td><td>4</td><td>Numeric identifier for transfer request.</td></tr>
</tbody></table>
</div>
<p>Specifies identifier for TransferRequest that will be included as 'RequestId' in TransferRequestStatus (ID = 323). If ID is not included then it will be generated automatically.</p>
<p><strong>Optional data: BlockStacking</strong></p>
<p>Enables block stacking (stacking on the top of another resource) at the target buffer location. See separate buffer documentation for more details.</p>
<p>Only supported for buffer locations and will be ignored if target destination does not support stacking feature. If this packet is not included, then resources will not be stacked. Racks do not support stacking resources on top of each other, rather the resources will be placed in predefined shelves.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Flags</td><td>uint16</td><td>2</td><td>Flags indicating how resource can be stacked.<br />0 = No stacking allowed<br />1 &lt;&lt; 0 = Resource can be stacked on top of previous resource<br />1 &lt;&lt; 1 = Another resource can be stacked on the top of this resource</td></tr>
<tr><td>MaximumStackingHeight</td><td>uint16</td><td>2</td><td>Allowed stacking height in millimeters. How high AGV forks can be lifted to stack the resource on top of another. If 0, maximum reach of AGV actuator is used instead.</td></tr>
<tr><td>ResourceHeight</td><td>uint16</td><td>2</td><td>Height of the resource to be transferred (in millimeters). This data is stored to resource object, and is used to speed up the stacking/destacking process at the resource buffer. If height 0 is specified, resource height can be updated automatically by the system, if available during the resource transport process.</td></tr>
<tr><td>ResourcesInStack</td><td>uint16</td><td>2</td><td>Allowed number of resources in the stack. If 0, maximum number of resources in the stack is limited only by the height. This information is only used by Navithor together with estimation of the existing resources in the buffer. Navithor can prevent stacking of resources, even the situation in the real buffer would allow stacking.</td></tr>
</tbody></table>
</div>
<p>MaximumStackingHeight, ResourceHeight, and ResourcesInStack fields are also used to estimate if target resource buffer still has free space to hold a new resource.</p>
<p><strong>Optional data: PickupRackId</strong></p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>RackIdLength</td><td>uint16</td><td>2</td><td>Length of the rack identifier</td></tr>
<tr><td>RackId</td><td>string</td><td>[0…N]</td><td>Rack identifier, max 255 chars.</td></tr>
</tbody></table>
</div>
<p>Specifies rackId, this will override the given pickup symbolic point id and specify desired side of the rack for side loaders.</p>
<p><strong>Optional data: TargetRackId</strong></p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>RackIdLength</td><td>uint16</td><td>2</td><td>Length of the rack identifier</td></tr>
<tr><td>RackId</td><td>string</td><td>[0…N]</td><td>Rack identifier, max 255 chars.</td></tr>
</tbody></table>
</div>
<p>Specifies rackId, this will override the given target symbolic point id and specify desired side of the rack for side loaders.</p>
<h4 id="setrackstatus-id--40"><a class="header" href="#setrackstatus-id--40">SetRackStatus (ID = 40)</a></h4>
<p>Equivalent to SetStatusAtSymbolicPoint for a warehouse rack.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>Symbol ID</td><td>int32</td><td>4</td><td>ID of the symbolic point where the status on shelves is set</td></tr>
<tr><td>NumOfShelves</td><td>uint16</td><td>2</td><td>Tells how many shelf statuses are set in this message (from 0 to 255)</td></tr>
<tr><td>Shelf Statuses</td><td>ShelfStatus[]</td><td>NumOfShelves * ShelfStatus length</td><td></td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>6 + Shelf Statuses length</td><td>15</td><td>2055</td></tr>
</tbody></table>
</div>
<p><strong>ShelfStatus</strong></p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Shelf ID</td><td>int32</td><td>4</td><td>ID of the shelf</td></tr>
<tr><td>Item type ID</td><td>int32</td><td>4</td><td>ID of the Item type (0 = remove resource)</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>8</td><td>8</td></tr>
</tbody></table>
</div>
<h4 id="estimatedrivetostartsymbolicpoint-id--41"><a class="header" href="#estimatedrivetostartsymbolicpoint-id--41">EstimateDriveToStartSymbolicPoint (ID = 41)</a></h4>
<p>The MES can send this message to Navithor. If valid message sent, Navithor will reply to it with EstimationOfDriveToStartSymbolicPoint message. If message is invalid, Navithor will reply to it with AckOrReject message with reject reason.</p>
<p>In this message, both the StartSpId and EndSpId are needed because the drive direction needs to be determined by Navithor for the possible time and distance values to the StartSpId. This needs to be done while avoiding driving through the EndSpId.</p>
<p>Sending this message will result Navithor to reply with driving distances and times to the start symbolic point for each possible machine.</p>
<p>If end symbolic point ID is positive, it must be avoided when planning the route to maintain the correct direction.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>StartSpId</td><td>uint16</td><td>2</td><td>Start symbolic point ID</td></tr>
<tr><td>EndSpId</td><td>int32</td><td>4</td><td>End symbolic point ID. If positive, the route must avoid the symbolic point</td></tr>
<tr><td>SortingField</td><td>byte</td><td>1</td><td>Field for sorting the results:<p></p> 0 = sort by machine ID<br/>1 = sort by driving distance<br/>2 = sort by driving time</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>7</td><td>16</td><td>16</td></tr>
</tbody></table>
</div>
<h4 id="setresourcesatmachine-id--42"><a class="header" href="#setresourcesatmachine-id--42">SetResourcesAtMachine (ID = 42)</a></h4>
<p>Sets resources at machine. If same data is being sent the resources at machine will not change. If order of ResourceAtMachine is changed or if any of data is different from what Navithor thinks then the resources will be regenerated.</p>
<p>When removing all resources from machine, send only MachineId and ResourceCount as 0 (header + 4 bytes of data), so that all resources will be cleared.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineId</td><td>uint16</td><td>2</td><td>ID of machine</td></tr>
<tr><td>ResourceCount</td><td>uint16</td><td>2</td><td>Number of elements in ResourceList. Minimum is 0, maximum is 1000</td></tr>
<tr><td>ResourceList</td><td>ResourceAtMachine[]</td><td>ResourceCount * ResourceAtMachine length</td><td>List of ResourceAtMachine structs</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>4 + ResourceAtMachineList length</td><td>13</td><td>8013</td></tr>
</tbody></table>
</div>
<p><strong>ResourceAtMachine</strong></p>
<p>Resource at machine.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>ResourceTypeId</td><td>int32</td><td>4</td><td>ID of resource type</td></tr>
<tr><td>Quantity</td><td>int32</td><td>4</td><td>How many of given resource type are at location</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>8</td><td>8</td></tr>
</tbody></table>
</div>
<h4 id="getracksetup-id--43"><a class="header" href="#getracksetup-id--43">GetRackSetup (ID = 43)</a></h4>
<p>Sending this message will result Navithor to send back RackSetupReply message.</p>
<p>In addition, if MachineTypeId is positive, then for each rack with defined MachineTypeId RackSetup message will be sent back. If MachineTypeId is not positive, then for each rack and for each MachineTypeId defined on that rack RackSetup message will be sent back.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineTypeId</td><td>int32</td><td>4</td><td>ID of the machine type</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>4</td><td>13</td><td>13</td></tr>
</tbody></table>
</div>
<h4 id="drivemachinetorack-id--44"><a class="header" href="#drivemachinetorack-id--44">DriveMachineToRack (ID = 44)</a></h4>
<p>Sending this message will result Navithor to create a production order for the machine if MachineId is greater than 0. Negative MachineId values are not supported.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineID</td><td>int16</td><td>2</td><td>Machine ID. Negative values are not supported</td></tr>
<tr><td>ProductionOrderId</td><td>uint32</td><td>4</td><td>OrderID, unique for each order</td></tr>
<tr><td>ToSymbolicPointId</td><td>uint16</td><td>2</td><td>Rack symbolic point ID where order ends</td></tr>
<tr><td>StartTimeLength</td><td>uint16</td><td>2</td><td>If 0 start time not defined</td></tr>
<tr><td>StartTime</td><td>string</td><td>0 or 19</td><td>&quot;yyyy.mm.dd.hh.mm.ss&quot;</td></tr>
<tr><td>Priority</td><td>uint16</td><td>2</td><td>1 to 32767, where 1 has the lowest priority</td></tr>
<tr><td>ToShelfId</td><td>uint16</td><td>2</td><td>Rack shelf ID</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>14 + StartTimeLength</td><td>23</td><td>42</td></tr>
</tbody></table>
</div>
<h4 id="loadunloadmachinerequest-id--46"><a class="header" href="#loadunloadmachinerequest-id--46">LoadUnloadMachineRequest (ID = 46)</a></h4>
<p>Sending this message will result Navithor to load/unload machine.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineID</td><td>int32</td><td>4</td><td>Which machine should perform load/unload</td></tr>
<tr><td>ResourceTypeId</td><td>int32</td><td>4</td><td>Which resource type to load/unload if &gt; 0. Otherwise assume resource type from Container configuration</td></tr>
<tr><td>ResourceQuantity</td><td>int32</td><td>4</td><td>Quantity of resources to unload/load if &gt; 0. Otherwise max of given type</td></tr>
<tr><td>LoadType</td><td>int16</td><td>2</td><td>1 = Load, 2 = Unload. Sending anything else will result in rejected</td></tr>
<tr><td>LoadUnloadFlags</td><td>uint16</td><td>2</td><td>Special handling related to Load. 0 = no specials. Used for syncing resource state only. Bit flags:<p></p> 1 &lt;&lt; 0 = Reject message if AGV not on symbolic point.<br/>1 &lt;&lt; 1 = Changes behavior so that message is not rejected if symbolic point is missing specified resource<br/>1 &lt;&lt; 2 = Changes behavior so that resource will be always removed from system after unload<br/>1 &lt;&lt; 3 = Source should use LoadFromBottom configuration. Rejected if given resourceTypeId is not on bottom slot<br/>1 &lt;&lt; 4 = Source should use LoadFromTop configuration. Rejected if given resourceTypeId is not on top slot.<br/>1 &lt;&lt; 5 = Future SourceLoad option<br/>1 &lt;&lt; 6 = Future SourceLoad option<br/>1 &lt;&lt; 7 = RESERVE<br/>1 &lt;&lt; 8 = Target should be use UnloadToBottom configuration<br/>1 &lt;&lt; 9 = Target should use UnloadToTop configuration<br/>1 &lt;&lt; 10 = Future TargetUnload option<br/>1 &lt;&lt; 11 = Future TargetUnload option<br/>1 &lt;&lt; 12-15 = RESERVED</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>16</td><td>25</td><td>25</td></tr>
</tbody></table>
</div>
<p>Message will be rejected with AckOrReject message if:</p>
<ul>
<li>AGV with given MachineId was not found;</li>
<li>AGV is moving or in production or performing an order;</li>
<li>Specified ResourceTypeId is not valid;</li>
<li>LoadType was not correct;</li>
<li>Conflicting flags were being set for example both SourceLoadFromBottom and SourceLoadFromTop set;</li>
<li>Load was given with ResourceTypeId that is not found on symbolic point;</li>
<li>It is not possible to load/unload specified resource.</li>
</ul>
<p>Warning in Client will be given if:</p>
<ul>
<li>Load/unload was given when AGV was not on symbolic point;</li>
<li>Unload was given with ResourceTypeId that machine is not carrying.</li>
</ul>
<h4 id="getsymbolicpointgroupsetup-id--47"><a class="header" href="#getsymbolicpointgroupsetup-id--47">GetSymbolicPointGroupSetup (ID = 47)</a></h4>
<p>Gets the initial setup of symbolic point groups from Navithor.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>0</td><td>9</td><td>9</td></tr>
</tbody></table>
</div>
<h4 id="savelogs-id--48"><a class="header" href="#savelogs-id--48">SaveLogs (ID = 48)</a></h4>
<p>Sending this message will trigger Navithor to save logs.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>NumOfMachinesInvolved</td><td>uint16</td><td>2</td><td>Number of machines involved. Can be set to 0, if no logs from the machine are needed. Maximum value is 1000 (N)</td></tr>
<tr><td>MachineIDs</td><td>uint16[]</td><td>2 * N</td><td>Machine IDs as an array. Navithor sends a command to dump a Navitrol log and tries to download it to be included on the log package</td></tr>
<tr><td>DescStringLength</td><td>uint16</td><td>2</td><td>Length of the description. Can be set to 0, if no additional description is needed. Max 1000 chars</td></tr>
<tr><td>Description</td><td>string</td><td>0...1000</td><td>Custom description that is saved to the log package as explanation of the issue</td></tr>
<tr><td>IncidentTimeLength</td><td>uint16</td><td>2</td><td>If 0, incident time not defined. Current system time is used</td></tr>
<tr><td>IncidentTime</td><td>string</td><td>0 or 19</td><td>&quot;yyyy.mm.dd.hh.mm.ss&quot;</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>6 + MachineIDs length + DescStringLength + IncidentTimeLength</td><td>15</td><td>3034</td></tr>
</tbody></table>
</div>
<h4 id="ackalarms-id--49"><a class="header" href="#ackalarms-id--49">AckAlarms (ID = 49)</a></h4>
<p>Sending this message will acknowledge Navithor Alarms. Flag defines which alarms will be acknowledged.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>AcknowledgeFlags</td><td>uint16</td><td>2</td><td>Bit 0: 1 = Reset all alarms<br/>Bit 1-15: reserved</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2</td><td>11</td><td>11</td></tr>
</tbody></table>
</div>
<h4 id="setbufferlanestatus-id--50"><a class="header" href="#setbufferlanestatus-id--50">SetBufferLaneStatus (ID = 50)</a></h4>
<p>Sets symbolic point buffer lane status to full or to has space.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>SymbolicPointId</td><td>uint16</td><td>2</td><td>ID of symbolic point</td></tr>
<tr><td>BufferLaneStatus</td><td>uint16</td><td>2</td><td>0 = No change<br/>1 = Buffer full<br/>2 = Buffer has space</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>4</td><td>13</td><td>13</td></tr>
</tbody></table>
</div>
<h4 id="requestzonestatus-id--51"><a class="header" href="#requestzonestatus-id--51">RequestZoneStatus (ID = 51)</a></h4>
<p>Gets the status of all zones or the status of a specified zone.</p>
<p>Valid from Navithor 2.20.0.0 forward.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>Zone ID</td><td>uint32</td><td>4</td><td>The ID of the zone whose status needs to be received. ID = 0 for requesting all statuses</td></tr>
<tr><td>Requested information</td><td>uint16</td><td>2</td><td>Determines what information is requested from the Server as a bit field. <br/> Existing fields:<p></p>ZoneOccupancy status 1 &lt;&lt; 0<br/>AGVs inside zone (List of AGV ids) 1 &lt;&lt; 1</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>6</td><td>15</td><td>15</td></tr>
</tbody></table>
</div>
<h4 id="getproductionareainformation-id--52"><a class="header" href="#getproductionareainformation-id--52">GetProductionAreaInformation (ID = 52)</a></h4>
<p>Gets information about production area. Navithor will send a separate reply with requested information.</p>
<p>Valid from Navithor 2.21.0.0 forward.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>InfoType</td><td>uint16</td><td>2</td><td>Type of information to request:<p></p> 1 = MachineTypeInformation (Reply ID = 336)<br/>2 = MachineInformation (Reply ID = 337)<br/>3 = SymbolicPointInformation (Reply ID = 338)<br/>4 = SymbolicPointHoldInformation (Reply ID = 339)<br/>5 = SymbolicPointSpatialInformation (Reply ID = 340)<br/>6 = ResourceTypeInformation (Reply ID = 341)<br/>7 = ResourceTypeOffsetInformation (Reply ID = 342)<br/>8 = MachineLoadCapacityInformation (Reply ID = 343)<br/>9 = SymbolicPointLoadCapacityInformation (Reply ID = 344)</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2</td><td>11</td><td>11</td></tr>
</tbody></table>
</div>
<h4 id="setresourceatlocationwithextendedinfo-id--53"><a class="header" href="#setresourceatlocationwithextendedinfo-id--53">SetResourceAtLocationWithExtendedInfo (ID = 53)</a></h4>
<p>Sets a resource at a location with maximum of ten additional strings for extended information. Allows usage of transfer requests with a resource identifier which is not resource type ID (see message ID = 54).</p>
<p>ResContainerFlags can be used to determine behavior when same or different data is sent.</p>
<p>Supported from version 2.21.0.0.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>SymbolicPointId</td><td>uint16</td><td>2</td><td>ID of symbolic point</td></tr>
<tr><td>ResourceTypeId</td><td>int32</td><td>4</td><td>ID of resource type</td></tr>
<tr><td>Quantity</td><td>int32</td><td>4</td><td>How many of given resource types are at location</td></tr>
<tr><td>ResContainerFlags</td><td>uint16</td><td>2</td><td>Flags to determine rules for resource container options. 0 to use global rules. Other flags currently not implemented</td></tr>
<tr><td>ResIdStringLength</td><td>uint16</td><td>2</td><td>Length of resource identifier</td></tr>
<tr><td>ResourceIdentifier</td><td>string</td><td>0...100</td><td>A string that can be used to identify the resource instead of using the resource type ID</td></tr>
<tr><td>ExtInfoCount</td><td>uint16</td><td>2</td><td>Number of strings for extended info (from 0 to 10). Additional info shown only in Client</td></tr>
<tr><td>MESExtendedResInfos</td><td>MESExtendedResInfo[]</td><td>ExtInfoCount * MESExtendedResInfo length</td><td>MESExtendedResInfo structure list</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>16 + ResIdStringLength +  MESExtendedResInfos length</td><td>25</td><td>1145</td></tr>
</tbody></table>
</div>
<p><strong>MESExtendedResInfo</strong></p>
<p>MESExtendedResInfo structure</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>ResInfoStringLength</td><td>uint16</td><td>2</td><td>Length of resource info</td></tr>
<tr><td>ResInfo</td><td>string</td><td>0...100</td><td>Additional info as string</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>2</td><td>102</td></tr>
</tbody></table>
</div>
<h4 id="transferrequestwithresourceidentifier-id--54"><a class="header" href="#transferrequestwithresourceidentifier-id--54">TransferRequestWithResourceIdentifier (ID = 54)</a></h4>
<p>Sending this message will result Navithor to create a production order from the pick-up Symbolic Point to the Target. Navithor will assign machines that can carry the item type to fulfil the transfer request.</p>
<p>This message supports creating a transfer request with some other resource identifier besides resource type ID. Should be used in combination with the SetResourceAtLocationWithExtendedInfo (ID = 53) message.</p>
<p>If both ItemTypeId and ResourceIdentifier are defined, the resource needs to fulfil both requirements for creating a valid order.</p>
<p>This message can be also used with only one of the ItemTypeId or ResourceIdentifier defined, or even that neither of them are defined.</p>
<p>Supported from version 2.21.0.0.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>PickupSymbolicPoint</td><td>uint16</td><td>2</td><td>Symbolic point ID</td></tr>
<tr><td>TargetSymbolicPoint</td><td>uint16</td><td>2</td><td>Symbolic point ID</td></tr>
<tr><td>ItemsToPickup</td><td>uint16</td><td>2</td><td>Number of items</td></tr>
<tr><td>ItemTypeId</td><td>uint16</td><td>2</td><td>If 0, not defined, and only Resource Identifier used</td></tr>
<tr><td>Priority</td><td>uint16</td><td>2</td><td>1 to 32767, where 1 has the lowest priority. Value 0 means Navithor default priority</td></tr>
<tr><td>RequestID</td><td>uint32</td><td>4</td><td>ID sent by the planner. TransferRequest is initially answered by AckOrRejRequest (ID = 201) and later when production order is created for the TransferRequest, TransferRequestStatus message (ID = 323) is sent using this RequestID</td></tr>
<tr><td>PickupIDType</td><td>byte</td><td>1</td><td>0 = PickupSymbolicPoint-field points to symbolic point ID<br/>1 = PickupSymbolicPoint-field points to symbolic point group ID</td></tr>
<tr><td>TargetIDType</td><td>byte</td><td>1</td><td>0 = TargetSymbolicPoint-field points to symbolic point ID<br/>1 = TargetSymbolicPoint-field points to symbolic point group ID</td></tr>
<tr><td>ResIdStringLength</td><td>uint16</td><td>2</td><td>Length of the resource identifier. If 0, only resource type ID is used. Max length is 100</td></tr>
<tr><td>ResourceIdentifier</td><td>string</td><td>0...100</td><td>Resource identifier as string. This can be used instead of, or in combination with ItemTypeId</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>18 + ResIdStringLength</td><td>27</td><td>127</td></tr>
</tbody></table>
</div>
<h4 id="requestspresourcestatus-id--55"><a class="header" href="#requestspresourcestatus-id--55">RequestSPResourceStatus (ID = 55)</a></h4>
<p>Requests the status of all or a certain symbolic point. Answered with SymbolicPointResourceStatus (ID = 345).</p>
<p>Valid from Navithor 2.21.0.0.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>Identifier</td><td>uint32</td><td>4</td><td>ID of a single symbolic point or a group. If 0, status of all symbolic points will be sent</td></tr>
<tr><td>RequestFlags</td><td>uint16</td><td>2</td><td>Flags:<br/>bit 0:<br/>0 = Identifier field points to a symbolic point ID<br/>1 = Identifier field points to a symbolic point group ID<br/><br/>bit 1:<br/>1 = Send creation date of last resource added to the symbolic point in addition to the default data<br/><br/>bit 2:<br/>1 = Send resource slot and shelf information.<br/><br/>bit 3:<br/>1 = Send information of all resources at specific symbolicpoint or in a group.</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>6</td><td>15</td><td>15</td></tr>
</tbody></table>
</div>
<h4 id="errorsv2request-id--56"><a class="header" href="#errorsv2request-id--56">ErrorsV2Request (ID = 56)</a></h4>
<p>Requests the status of errors in the system. Answered with ErrorsV2 (ID = 349).</p>
<p>Valid from Navithor 2.21.0.0.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>ErrorType</td><td>byte</td><td>1</td><td>Apply exclusive filter by type of error:<p></p>0 = all errors<br/>1 = system errors<br/>2 = all entity errors<br/>3 = machine errors (belong to entity errors)<br/>4 = symbolic point errors (belong to entity errors)<br/>5 = waypoint errors (belong to entity errors)</td></tr>
<tr><td>ErrorLevel</td><td>byte</td><td>1</td><td>Apply filter by minimum level of error:<p></p>0 = all<br/>1 = warning<br/>2 = error<br/>3 = fatal error</td></tr>
<tr><td>EntityID</td><td>uint32</td><td>4</td><td>Request errors for specific EntityId (0 = all errors matching the other filters are sent). This filter does not affect on system errors</td></tr>
<tr><td>Options</td><td>uint32</td><td>4</td><td>Reserved for later use (0 = not defined)</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>10</td><td>19</td><td>19</td></tr>
</tbody></table>
</div>
<h4 id="reserved-id--57"><a class="header" href="#reserved-id--57">RESERVED (ID = 57)</a></h4>
<h4 id="reserved-id--58"><a class="header" href="#reserved-id--58">RESERVED (ID = 58)</a></h4>
<h4 id="initpositiontosymbolicpoint-id--59"><a class="header" href="#initpositiontosymbolicpoint-id--59">InitPositionToSymbolicPoint (ID = 59)</a></h4>
<p>Initializes AGV position to symbolic point with given heading in degrees. This works for any symbolic point unlike InitializePosition (ID = 6) which only works for symbolic points marked as position initialization locations.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>SymbolicPointId</td><td>int32</td><td>4</td><td>Id of symbolic point. X,Y position of symbolic point will be used when initializing position.</td></tr>
<tr><td>MachineId</td><td>int32</td><td>4</td><td>Id of machine.</td></tr>
<tr><td>HeadingDegrees</td><td>float</td><td>4</td><td>Heading of AGV in degrees. In coordinate system 0 degrees is map west and 90 degrees is map south.</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>12</td><td>21</td><td>21</td></tr>
</tbody></table>
</div>
<h4 id="trafficlightstatus-id--347"><a class="header" href="#trafficlightstatus-id--347">TrafficLightStatus (ID = 347)</a></h4>
<p>Message is sent by MES to inform current status of a traffic light.</p>
<div class="table-wrapper"><table><thead><tr><th>Field Name</th><th>Type</th><th>Length</th><th>Description</th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>TrafficLightID</td><td>uint32</td><td>4</td><td>ID of the traffic light</td></tr>
<tr><td>Status</td><td>uint16</td><td>2</td><td>ID of the group containing the trafficlight</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th>Frame Length</th><th>Data Length</th><th>Min Length</th><th>Max Length</th></tr></thead><tbody>
<tr><td>9</td><td>6</td><td>15</td><td>15</td></tr>
</tbody></table>
</div>
<h4 id="mesmessagesubscription-id--348"><a class="header" href="#mesmessagesubscription-id--348">MESMessageSubscription (ID = 348)</a></h4>
<p>Message is sent by MES to subscribe to different messages.</p>
<div class="table-wrapper"><table><thead><tr><th>Field Name</th><th>Type</th><th>Length</th><th>Description</th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>Subscriptions</td><td>Subscription[]</td><td>0...x</td><td>Multiple subscriptions in array</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th>Frame Length</th><th>Data Length</th><th>Min Length</th><th>Max Length</th></tr></thead><tbody>
<tr><td>9</td><td>0...65526</td><td>9</td><td>65535</td></tr>
</tbody></table>
</div>
<p><strong>Subscription</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Field Name</th><th>Type</th><th>Length</th><th>Description</th></tr></thead><tbody>
<tr><td>SubscriptionType</td><td>uint16</td><td>2</td><td>Type of the subscription</td></tr>
<tr><td>SubscriptionData</td><td>Opaque</td><td>2..x</td><td>Contains data of different subscriptions, data depends on type chosen</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>4</td><td>65526</td></tr>
</tbody></table>
</div>
<p><strong>Subscription Datas</strong></p>
<p>Different subscriptions listed.</p>
<p><strong>TrafficLight (Type = 1)</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Field Name</th><th>Type</th><th>Length</th><th>Description</th></tr></thead><tbody>
<tr><td>Subscribe</td><td>uint16</td><td>2</td><td>Unsubscribe when set 0, else subscribe</td></tr>
<tr><td>SubscriptionToGroup</td><td>uint16</td><td>2</td><td>Subscription to single trafficlight ID when set 0, else to group ID</td></tr>
<tr><td>ID</td><td>uint16</td><td>2</td><td>Group or trafficlight ID</td></tr>
<tr><td>IntervalGreen</td><td>uint16</td><td>2</td><td>Interval to send request while requested status is green.</td></tr>
<tr><td>IntervalNone</td><td>uint16</td><td>2</td><td>Interval to send request while not requesting a status</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>10</td><td>10</td></tr>
</tbody></table>
</div>
<p><strong>ElevatorRequest (Type = 3)</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Field Name</th><th>Type</th><th>Length</th><th>Description</th></tr></thead><tbody>
<tr><td>Subscribe</td><td>uint16</td><td>2</td><td>0 = unsubscribe, 1 = subscribe requests</td></tr>
<tr><td>ElevatorId</td><td>uint16</td><td>2</td><td>Subscription to single ElevatorID, or all requests if set to 0</td></tr>
<tr><td>StatusRequestInterval</td><td>uint16</td><td>2</td><td>Interval in seconds how often ElevatorRequest should be sent to MES client when no machines are reserving the Elevator. Value 0 means at every cycle (1 second cycle).</td></tr>
<tr><td>RequestToFloorInterval</td><td>uint16</td><td>2</td><td>Interval in seconds how often ElevatorRequest with type RequestToFloor should be sent to MES client when machine has reservation for Elevator. Value 0 means at every cycle (1 second cycle).</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>8</td><td>8</td></tr>
</tbody></table>
</div>
<p><strong>ProductionStatus (Type = 4)</strong></p>
<p>This subscription type can be used to request of sending ProductionStatus (ID = 313) message, and override default parameter <code>MES_ProductionStatusSendTimer</code>.</p>
<p>Parameters specified in this message are global, so if two clients subscribe the message, the later subscriber will define the parameters for sending the message.</p>
<p>If any client has subscribed the message, global interval parameter is overridden, and only subscribed client will receive the message. If all clients have unsubscribed the message, the interval defined in global parameter is used again.</p>
<div class="table-wrapper"><table><thead><tr><th>Field Name</th><th>Type</th><th>Length</th><th>Description</th></tr></thead><tbody>
<tr><td>Subscribe</td><td>uint16</td><td>2</td><td>Subscribe message when set to 1, unsubscribe when 0</td></tr>
<tr><td>SubscriptionType</td><td>uint16</td><td>2</td><td>Different subscription options:<br />1 = Sending of message is completely disabled.<br />2 = OnlyPeriodically - Message is sent by the given interval.<br />3 = OnlyWhenChanged - Message is only sent if there are changes in the content.<br />4 = WhenChangedOrPeriodically - Message is sent by the given interval or when there are changes in the content.</td></tr>
<tr><td>RequestInterval</td><td>uint16</td><td>2</td><td>Interval in milliseconds how often message is sent. The process cycle is 1000ms, so message can be sent every 1000ms or more seldom.</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>6</td><td>6</td></tr>
</tbody></table>
</div>
<h4 id="elevatorstatus--id--351"><a class="header" href="#elevatorstatus--id--351">ElevatorStatus  (ID = 351)</a></h4>
<p>Message is sent by MES client to publish the status of the single elevator. This message is sent as reply to message <strong>ElevatorRequest</strong> (ID = 352).</p>
<p>If <em>ElevatorId</em> is not found, Navithor will reply with <strong>AckOrReject</strong> (ID = 200) message with reject reason <strong>SymbolicPointNotFound (4)</strong>. If floors defined in Navithor Tools are not matching with the data in the message, the reject reason will be <strong>BadInputData (1)</strong>.</p>
<div class="table-wrapper"><table><thead><tr><th>Field Name</th><th>Type</th><th>Length</th><th>Description</th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>StatusType</td><td>uint16</td><td>2</td><td>Type of status message (default 0)</td></tr>
<tr><td>ElevatorId</td><td>uint16</td><td>2</td><td>ID of the elevator (symbolic point group ID)</td></tr>
<tr><td>ElevatorStatus</td><td>uint16</td><td>2</td><td>1 = automatic, 2 = automatic and moving, 3 = manual, 4 = out of service</td></tr>
<tr><td>CurrentLevel</td><td>uint16</td><td>2</td><td>Level where elevator is currently, or was previously if currently moving</td></tr>
<tr><td>DoorStatus</td><td>uint16</td><td>2</td><td>Door status at <strong>CurrentLevel</strong>: 1 = closed, 2 = open, 3 = broken and cannot be used (disabled)</td></tr>
<tr><td>TargetLevel</td><td>uint16</td><td>2</td><td>Level where elevator is currently going to. Must equal to <strong>CurrentLevel</strong>, if not moving or target is not known.</td></tr>
<tr><td>TargetReachTime</td><td>uint16</td><td>2</td><td>Estimation to reach target level in seconds, or 0 if not moving. 0 if no estimation available.</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th>Frame Length</th><th>Data Length</th><th>Min Length</th><th>Max Length</th></tr></thead><tbody>
<tr><td>9</td><td>14</td><td>23</td><td>23</td></tr>
</tbody></table>
</div>
<h4 id="deleteproductionorderwithid-id--353"><a class="header" href="#deleteproductionorderwithid-id--353">DeleteProductionOrderWithId (ID = 353)</a></h4>
<p>Sending this message with a production order ID will delete the given production order.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>ProductionOrderId</td><td>int32</td><td>4</td><td>Order ID, unique for each order</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>4</td><td>13</td><td>13</td></tr>
</tbody></table>
</div>
<h4 id="setsymbolicpointpriority-id--355"><a class="header" href="#setsymbolicpointpriority-id--355">SetSymbolicPointPriority (ID = 355)</a></h4>
<p>Sending this message will set the priority of the symbolic point.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>SymbolicPointID</td><td>int32</td><td>4</td><td>ID of the symbolic point</td></tr>
<tr><td>Priority</td><td>int16</td><td>2</td><td>Desired priority between 1 and 8. Priority 1 is lowest.</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>6</td><td>15</td><td>15</td></tr>
</tbody></table>
</div>
<h4 id="validateloadreply-id--358"><a class="header" href="#validateloadreply-id--358">ValidateLoadReply (ID = 358)</a></h4>
<p>Message used to reply to message ValidateLoad (ID = 357).</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>MessageContents</td><td>uint32</td><td>4</td><td>Bit flags of included message contents<br> 1 &lt;&lt; 0 = LoadValidationDataWithBarcode<br>1 &lt;&lt; 1 = ValidationResult<br>1 &lt;&lt; 2 = NewTransferTarget<br> Bits 4 to 32 reserved for later use.</td></tr>
</tbody></table>
</div>
<p><strong>LoadValidationDataWithBarcode</strong></p>
<p>Should be identical to the data sent in the ValidateLoad (ID = 357) request. Helps to determine which barcode is validated by the reply.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>ProductionOrderID</td><td>uint32</td><td>4</td><td>OrderID, unique for each order. 0 if no linked order.</td></tr>
<tr><td>RequestingAgvID</td><td>uint16</td><td>2</td><td>ID of the AGV requesting the validation of the load.</td></tr>
<tr><td>SymbolicPointID</td><td>uint16</td><td>2</td><td>Symbolic point ID of the location of the load.</td></tr>
<tr><td>LoadTypeID</td><td>int32</td><td>4</td><td>ID of the load type.</td></tr>
<tr><td>BarcodeStringLength</td><td>uint16</td><td>2</td><td>Barcode string length.</td></tr>
<tr><td>Barcode</td><td>string</td><td>0...255</td><td>Barcode of the load. If not available, nothing is sent. Minimum length is 0, maximum 255.</td></tr>
</tbody></table>
</div>
<p><strong>ValidationResult</strong></p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Result</td><td>uint32</td><td>4</td><td>Result of the validation:<br> 0 = Success, continue with the pickup task.<br> 1 = Error: Invalid barcode.<br> 2 = Error: Invalid resource type.</td></tr>
</tbody></table>
</div>
<p><strong>NewTransferTarget</strong></p>
<p>Gives a new transfer target for the load that is being validated. Typically WMS decides the end target for each load. Production Order of the AGV is updated accordingly.
If not given, AGV either continues to the old target, if such was given, or completes the pickup order and waits for a new order.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>SymbolicPointId</td><td>uint16</td><td>2</td><td>ID of the symbolic point where the load needs to be transferred to (can be 0, if RackId is given instead)</td></tr>
<tr><td>ShelfId</td><td>uint16</td><td>2</td><td>Shelf ID for the height where the load needs to be transferred to (0 for non-rack symbolic points)</td></tr>
<tr><td>RackIdLength</td><td>uint16</td><td>2</td><td>Length of the rack identifier. 0 if no rack ID given.</td></tr>
<tr><td>RackId</td><td>string</td><td>0...255</td><td>Rack identifier, max 255 chars. Specifies rackId. If given, this will override the given symbolic point id and specifies desired side of the rack for side loaders.</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>4 + Packet Lengths</td><td>13</td><td>547</td></tr>
</tbody></table>
</div>
<h4 id="startstopproductionbreak-id--359"><a class="header" href="#startstopproductionbreak-id--359">StartStopProductionBreak (ID = 359)</a></h4>
<p>Message is used to control production break feature of the Fleet Control. Activation of production break will make stop normal production activity and make the machines to drive into locations configured as production break locations.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>ProductionBreakMode</td><td>byte</td><td>1</td><td>0 = Normal mode, production break feature not active<br>1 = Production break active</td></tr>
<tr><td>ActivationReasonLength</td><td>uint16</td><td>2</td><td>Length of reason for activation, can be set to 0 when no reason specified</td></tr>
<tr><td>ActivationReason</td><td>string</td><td>0...200</td><td>Reason for break mode activation.</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>3</td><td>12</td><td>212</td></tr>
</tbody></table>
</div>
<h4 id="returntoroute-id--361"><a class="header" href="#returntoroute-id--361">ReturnToRoute (ID = 361)</a></h4>
<p>Message is used to request machine to return to the route, if it is nearby the route. Successful action requires that the machine is currently either in STBY or IDLE state.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineId</td><td>int32</td><td>4</td><td>Machine ID to request to return to the route.</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>4</td><td>13</td><td>13</td></tr>
</tbody></table>
</div>
<h4 id="releasestopandhold-id--362"><a class="header" href="#releasestopandhold-id--362">ReleaseStopAndHold (ID = 362)</a></h4>
<p>Message is used to release machine from StopAndHold symbolicpoint. This message can be used with either machine ID or symbolicpoint ID, both are not required.</p>
<p><strong>Note:</strong> StopAndHold feature is a separate feature from HOLD, so this message should not be mixed with <em>ReleaseHold (ID = 18)</em>.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineId</td><td>int32</td><td>4</td><td>Machine ID to release, or <code>0</code> if symbolicpointId is used.</td></tr>
<tr><td>SymbolicpointId</td><td>int32</td><td>4</td><td>The ID of the symbolicpoint where machine is at StopAndHold state, or <code>0</code> if machineId is used.</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>8</td><td>17</td><td>17</td></tr>
</tbody></table>
</div>
<h3 id="messages-from-navithor-to-mes"><a class="header" href="#messages-from-navithor-to-mes">Messages from Navithor to MES</a></h3>
<h4 id="versioninfo-id--101"><a class="header" href="#versioninfo-id--101">VersionInfo (ID = 101)</a></h4>
<p>Returns the version number of the communication protocol. Version of this document reflects the version of the communication protocol.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>InterfaceVersionMajor</td><td>uint16</td><td>2</td><td>Major number of the protocol version. When major number is changed the earlier protocol versions will be incompatible</td></tr>
<tr><td>InterfaceVersionMinor</td><td>uint16</td><td>2</td><td>Minor number of the protocol version</td></tr>
<tr><td>String Length</td><td>uint16</td><td>2</td><td></td></tr>
<tr><td>software_version</td><td>string</td><td>0...100</td><td>Navithor software version (eg. &quot;2.3.10.0&quot;). Major.Minor.Branch.Revision</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>6...106</td><td>15</td><td>115</td></tr>
</tbody></table>
</div>
<h4 id="initialsetup-id--102"><a class="header" href="#initialsetup-id--102">InitialSetup (ID = 102)</a></h4>
<p>Navithor sends this message as reply to message GetInitialSetup (ID = 2). GetInitialSetup should not be used in new installations, use GetProductionAreaInformation (ID = 52) instead. If production area is large enough then InitialSetup message cannot contain all of the information and will be trimmed at end.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineTypesCount</td><td>uint16</td><td>2</td><td>Number of machine types in Navithor</td></tr>
<tr><td>MachineTypes</td><td>MachineTypeData[]</td><td>MachineTypesCount * MachineTypeData length</td><td>Machine Type data</td></tr>
<tr><td>MachinesCount</td><td>uint16</td><td>2</td><td>Number of machines in Navithor</td></tr>
<tr><td>Machines</td><td>MachineData[]</td><td>MachinesCount * MachineData length</td><td>Machine Data</td></tr>
<tr><td>SymbolicPointsCount</td><td>uint16</td><td>2</td><td>Number of symbolic points in Navithor</td></tr>
<tr><td>SymbolicPointData</td><td>SymbolicPointData[]</td><td>SymbolicPointsCount * SymbolicPointData length</td><td>Struct defined below for each symbolic point in production area</td></tr>
<tr><td>ResourceTypesCount</td><td>uint16</td><td>2</td><td>Number of resource types</td></tr>
<tr><td>ResourceTypes</td><td>ResourceTypeData[]</td><td>ResourceTypesCount * ResourceTypeData length</td><td>Resource Type Data</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>8 + structs</td><td>17</td><td>65535</td></tr>
</tbody></table>
</div>
<p><strong>Machine Type Data</strong></p>
<p>Data structure for a single machine type.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>NameStringLength</td><td>uint16</td><td>2</td><td>Max 100 characters</td></tr>
<tr><td>Name</td><td>string</td><td>0...100</td><td>Machine type name</td></tr>
<tr><td>Id</td><td>uint32</td><td>4</td><td>Machine type ID</td></tr>
<tr><td>CarryItemStringLength</td><td>uint16</td><td>2</td><td>Max 100 characters</td></tr>
<tr><td>CarryItemString</td><td>string</td><td>0...100</td><td>Name of default resource type for machine type</td></tr>
<tr><td>CarryItemId</td><td>uint32</td><td>4</td><td>ID of default resource type for machine type</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>12</td><td>212</td></tr>
</tbody></table>
</div>
<p><strong>Machine Data</strong></p>
<p>Data structure for a single machine in the system.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>NameStringLength</td><td>uint16</td><td>2</td><td>Max 100 characters</td></tr>
<tr><td>Name</td><td>string</td><td>0...100</td><td>Machine name</td></tr>
<tr><td>Id</td><td>uint16</td><td>2</td><td>Machine ID</td></tr>
<tr><td>TypeId</td><td>uint32</td><td>4</td><td>Machine type ID</td></tr>
<tr><td>Enabled</td><td>byte</td><td>1</td><td>Machine enabled status</td></tr>
<tr><td>X</td><td>float</td><td>4</td><td>Machine x-coordinate</td></tr>
<tr><td>Y</td><td>float</td><td>4</td><td>Machine y-coordinate</td></tr>
<tr><td>H</td><td>float</td><td>4</td><td>Machine heading (radians)</td></tr>
<tr><td>PositionStatus</td><td>byte</td><td>1</td><td>0 if no position, 1 if position initialized</td></tr>
<tr><td>State</td><td>uint16</td><td>2</td><td>Machine state</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>24</td><td>124</td></tr>
</tbody></table>
</div>
<p><strong>Symbolic Point Data</strong></p>
<p>Data structure for a single Symbolic Point in the system.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Id</td><td>uint16</td><td>2</td><td>Symbolic Point ID</td></tr>
<tr><td>nameStringLength</td><td>uint16</td><td>2</td><td>Max 100 characters</td></tr>
<tr><td>Name</td><td>string</td><td>0...100</td><td>Symbolic point name</td></tr>
<tr><td>Enabled</td><td>byte</td><td>1</td><td>0 = Disabled, 1 = Enabled</td></tr>
<tr><td>numberOfMachineTypes</td><td>uint16</td><td>2</td><td>Machine types that can use symbolic point. Only first 20 will be sent</td></tr>
<tr><td>Machine Type IDs</td><td>uint32[]</td><td>numberOfMachineTypes * 4</td><td></td></tr>
<tr><td>x-coordinate</td><td>float</td><td>4</td><td></td></tr>
<tr><td>y-coordinate</td><td>float</td><td>4</td><td></td></tr>
<tr><td>posInitHeading1</td><td>float</td><td>4</td><td>In radians</td></tr>
<tr><td>posInitHeading2</td><td>float</td><td>4</td><td>In radians (opposite heading to posInitHeading1)</td></tr>
<tr><td>posInitId1</td><td>int32</td><td>4</td><td>-1 if not used</td></tr>
<tr><td>posInitId2</td><td>int32</td><td>4</td><td>-1 if not used</td></tr>
<tr><td>HoldPoint</td><td>byte</td><td>1</td><td>Hold point = 1</td></tr>
<tr><td>Default location</td><td>int32</td><td>4</td><td>Symbolic point ID for default location</td></tr>
<tr><td>Alternative 1 location</td><td>int32</td><td>4</td><td>Symbolic point ID for the first alternative location. -1 for not used</td></tr>
<tr><td>Alternative 2 location</td><td>int32</td><td>4</td><td>Symbolic point ID for the second alternative location. -1 for not used</td></tr>
<tr><td>Alternative 3 location</td><td>int32</td><td>4</td><td>Symbolic point ID for the third alternative location. -1 for not used</td></tr>
<tr><td>Timer</td><td>int32</td><td>4</td><td>Timer in seconds for releasing hold. -1 for not used</td></tr>
<tr><td>level</td><td>int32</td><td>4</td><td></td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>56</td><td>236</td></tr>
</tbody></table>
</div>
<p><strong>Resource Type Data</strong></p>
<p>Data structure for a single resource type definition in the system.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>ResourceTypeId</td><td>int32</td><td>4</td><td>ID of resource type</td></tr>
<tr><td>ResourceTypeNameStringLength</td><td>uint16</td><td>2</td><td>Max 100 characters</td></tr>
<tr><td>ResourceTypeName</td><td>string</td><td>0...100</td><td>Name of resource type</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>6</td><td>106</td></tr>
</tbody></table>
</div>
<h4 id="timeset-id--103"><a class="header" href="#timeset-id--103">TimeSet (ID = 103)</a></h4>
<p>Time is set message.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>0</td><td>9</td><td>9</td></tr>
</tbody></table>
</div>
<h4 id="fstopdone-id--104"><a class="header" href="#fstopdone-id--104">FSTOPDone (ID = 104)</a></h4>
<p>Machine(s) have stopped and are in FSTOP-state.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineId</td><td>int16</td><td>2</td><td>-1 for all</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2</td><td>11</td><td>11</td></tr>
</tbody></table>
</div>
<h4 id="fstopreleased-id--105"><a class="header" href="#fstopreleased-id--105">FSTOPReleased (ID = 105)</a></h4>
<p>Machine(s) have returned to normal operation mode.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineId</td><td>int16</td><td>2</td><td>-1 for all</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2</td><td>11</td><td>11</td></tr>
</tbody></table>
</div>
<h4 id="driveready-id--302"><a class="header" href="#driveready-id--302">DriveReady (ID = 302)</a></h4>
<p>Machine has stopped driving.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineID</td><td>uint16</td><td>2</td><td></td></tr>
<tr><td>X</td><td>double</td><td>8</td><td></td></tr>
<tr><td>Y</td><td>double</td><td>8</td><td></td></tr>
<tr><td>Heading</td><td>double</td><td>8</td><td></td></tr>
<tr><td>Level</td><td>int32</td><td>4</td><td></td></tr>
<tr><td>SymbolicPointId</td><td>uint16</td><td>2</td><td>If driving has finished at symbolic point SymbolicPointId &gt; 0</td></tr>
<tr><td>ProductionOrderID</td><td>uint32</td><td>4</td><td>ID of the production order, or 0 when drive task was not from production order</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>36</td><td>45</td><td>45</td></tr>
</tbody></table>
</div>
<h4 id="loadpickupstarted-id--303"><a class="header" href="#loadpickupstarted-id--303">LoadPickUpStarted (ID = 303)</a></h4>
<p>Machine has started loading task.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineID</td><td>uint16</td><td>2</td><td></td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2</td><td>11</td><td>11</td></tr>
</tbody></table>
</div>
<h4 id="loadpickupready-id--304"><a class="header" href="#loadpickupready-id--304">LoadPickupReady (ID = 304)</a></h4>
<p>Machine has completed loading task.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineID</td><td>uint16</td><td>2</td><td></td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2</td><td>11</td><td>11</td></tr>
</tbody></table>
</div>
<h4 id="loadpickupaborted-id--305"><a class="header" href="#loadpickupaborted-id--305">LoadPickupAborted (ID = 305)</a></h4>
<p>Machine has failed loading task.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineID</td><td>uint16</td><td>2</td><td></td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2</td><td>11</td><td>11</td></tr>
</tbody></table>
</div>
<h4 id="emptyloadstarted-id--306"><a class="header" href="#emptyloadstarted-id--306">EmptyLoadStarted (ID = 306)</a></h4>
<p>Machine has started unloading task.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineID</td><td>uint16</td><td>2</td><td></td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2</td><td>11</td><td>11</td></tr>
</tbody></table>
</div>
<h4 id="emptyloadready-id--307"><a class="header" href="#emptyloadready-id--307">EmptyLoadReady (ID = 307)</a></h4>
<p>Machine has completed unloading task.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineID</td><td>uint16</td><td>2</td><td></td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2</td><td>11</td><td>11</td></tr>
</tbody></table>
</div>
<h4 id="emptyloadaborted-id--308"><a class="header" href="#emptyloadaborted-id--308">EmptyLoadAborted (ID = 308)</a></h4>
<p>Machine has failed unloading task.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineID</td><td>uint16</td><td>2</td><td></td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2</td><td>11</td><td>11</td></tr>
</tbody></table>
</div>
<h4 id="errors-id--309"><a class="header" href="#errors-id--309">Errors (ID = 309)</a></h4>
<p>This message is sent periodically from Navithor to MES. Message contains current error status in the system.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>NumberOfErrors</td><td>uint16</td><td>2</td><td>Max 1000 entries</td></tr>
<tr><td>ErrorDataList</td><td>ErrorData[]</td><td>NumberOfErrors * ErrorData length</td><td>ErrorData-struct below</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2 + structs</td><td>11</td><td>65000</td></tr>
</tbody></table>
</div>
<p><strong>ErrorData</strong></p>
<p>Error Data struct.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>DescriptionStringLength</td><td>uint16</td><td>2</td><td>Length of the following Name-field. Limited by Server parameter: MES_MesMaxMsgInfoStringLen</td></tr>
<tr><td>Description</td><td>string</td><td>0...X</td><td>Error description with following format: ERROR_SOURCE.ENTITY.ERROR_TEXT<br/>Alarm source can be: &quot;FleetControl&quot;, &quot;NavigationSoftware&quot; or &quot;Supervisor&quot;<br/>Entity is either name of the AGV that the error is related to or &quot;SystemAlarm&quot;.</td></tr>
<tr><td>Id</td><td>uint16</td><td>2</td><td>Error ID</td></tr>
<tr><td>Value</td><td>uint16</td><td>2</td><td>Error level: 1 = warning, 2 = erropr, 3 = fatal error</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>6</td><td>6 + MES_MesMaxMsgInfoStringLen</td></tr>
</tbody></table>
</div>
<h4 id="agvstatus-id--310"><a class="header" href="#agvstatus-id--310">AGVStatus (ID = 310)</a></h4>
<p>Periodic status message from a single machine in the system. Sending interval can be changed from Navithor Server parameters: <strong>Machine_STATUS_TO_MES_INTERVAL_ENABLED_MS</strong> and <strong>Machine_STATUS_TO_MES_INTERVAL_DISABLED_MS</strong>. Parameter <strong>MES_DisabledOutMessageGroups</strong> can be used to disable message completely.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineId</td><td>uint16</td><td>2</td><td>Machine ID</td></tr>
<tr><td>X</td><td>double</td><td>8</td><td>X-coordinate location of the machine</td></tr>
<tr><td>Y</td><td>double</td><td>8</td><td>Y-coordinate location of the machine</td></tr>
<tr><td>H</td><td>double</td><td>8</td><td>Machine heading</td></tr>
<tr><td>Level</td><td>int16</td><td>2</td><td>Current level of the machine</td></tr>
<tr><td>PositionConfidence</td><td>byte</td><td>1</td><td>Position confidence level of the machine (0-100)</td></tr>
<tr><td>SpeedNavigationPoint</td><td>double</td><td>8</td><td>Current speed of the machine</td></tr>
<tr><td>State</td><td>byte</td><td>1</td><td>Navitrol state (e.g. STBY = 2, AUTO = 3)</td></tr>
<tr><td>BatteryLevel</td><td>double</td><td>8</td><td>Current battery level of the machine (0-100)</td></tr>
<tr><td>AutoOrManual</td><td>byte</td><td>1</td><td>Control status (0=manual control active, 1 = automatic control active)</td></tr>
<tr><td>PositionInitialized</td><td>byte</td><td>1</td><td>1 = position is initialized, 0 = position is not initialized</td></tr>
<tr><td>LastSymbolPoint</td><td>int32</td><td>4</td><td>ID of the symbolic point where machine previously visited</td></tr>
<tr><td>MachineAtLastSymbolPoint</td><td>byte</td><td>1</td><td>1 = machine is at &quot;LastSymbolPoint&quot;-symbolic point, 0 = machine is not at the location</td></tr>
<tr><td>TargetSymbolPoint</td><td>int32</td><td>4</td><td>ID of the symbolic point that is the current target for the machine</td></tr>
<tr><td>MachineAtTarget</td><td>byte</td><td>1</td><td>1 = machine is at &quot;TargetSymbolPoint&quot;, 0 = machine is not at the location</td></tr>
<tr><td>Operational</td><td>byte</td><td>1</td><td>1 if no errors, 0 if errors are stopping AGV</td></tr>
<tr><td>InProduction</td><td>byte</td><td>1</td><td>1 if in production, 0 if not in production</td></tr>
<tr><td>LoadStatus</td><td>byte</td><td>1</td><td>0 = unknown, 1 = empty, 2 = empty started, 3 = pickup started, 4 = full</td></tr>
<tr><td>Battery voltage</td><td>double</td><td>8</td><td>Battery voltage reported by machine</td></tr>
<tr><td>ChargingStatus</td><td>byte</td><td>1</td><td>0 = not charging, 1 = charging requested, 2 = charging</td></tr>
<tr><td>DistanceToTarget</td><td>float</td><td>4</td><td>Distance in meters to machine's current end target. <strong>(Optional: enable by setting parameter MES_StatusMessageProtocolVersion &gt;= 3)</strong></td></tr>
<tr><td>CurrentDriveThroughPoint</td><td>int32</td><td>4</td><td>Current drive through point of the machine. If drive is cut to either level change, NoStop or traffic light, reports the symbolic point ID of that location. If no drive through point is set, reports -1. <strong>(Optional: enable by setting parameter MES_StatusMessageProtocolVersion &gt;= 4)</strong></td></tr>
<tr><td>NextLevelChangePointId</td><td>int32</td><td>4</td><td>Symbolic point ID of next level change point along the route. If no level change point along the route, -1 is sent. <strong>(Optional: enable by setting parameter MES_StatusMessageProtocolVersion &gt;= 5)</strong></td></tr>
<tr><td>DistanceToNextLevelChange</td><td>float</td><td>4</td><td>Distance to next level change point. If no level change point assigned, 0 is sent. <strong>(Optional: enable by setting parameter MES_StatusMessageProtocolVersion &gt;= 5)</strong></td></tr>
<tr><td>LastSymbolPointDrivenOver</td><td>int32</td><td>4</td><td>ID of the symbolic point that was last driven over, regardless if it was a target or not. <strong>(Optional: enable by setting parameter MES_StatusMessageProtocolVersion &gt;= 6)</strong></td></tr>
<tr><td>NearSymbolicPoint</td><td>int32</td><td>4</td><td>ID of the symbolic point that we are currently within TrafficController_Strict_Target_Near_Distance from. AGV must not be moving and heading difference between AGV and symbolic point must also be within TrafficController_MAX_HEADING_DIFF_RAD. Value -1 if not set. <strong>(Optional: enable by setting parameter MES_StatusMessageProtocolVersion &gt;= 7)</strong></td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>70 [+ max 24]</td><td>79</td><td>103</td></tr>
</tbody></table>
</div>
<h4 id="chargingrequest-id--311"><a class="header" href="#chargingrequest-id--311">ChargingRequest (ID = 311)</a></h4>
<p>This message is sent when machine charging request status is changed (e.g. ChargeCommand-message (ID = 9) triggers this message with RequestType = 3).</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineId</td><td>uint16</td><td>2</td><td>Machine ID</td></tr>
<tr><td>RequestType</td><td>uint16</td><td>2</td><td>Charging request type:<p></p>0 = no request active, 1 = rules request, 2 = Navithor Client operator request, 3 = MES or PLC request (force), 4 = machine request, 5 = idle rule request</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>4</td><td>13</td><td>13</td></tr>
</tbody></table>
</div>
<h4 id="inputvalues-id--312"><a class="header" href="#inputvalues-id--312">InputValues (ID = 312)</a></h4>
<p>Current input values sent by the machine.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineId</td><td>uint16</td><td>2</td><td></td></tr>
<tr><td>DigitalInputlength</td><td>uint16</td><td>2</td><td></td></tr>
<tr><td>DigitalInputs</td><td>byte[]</td><td>0...n</td><td></td></tr>
<tr><td>IntegerInputLength</td><td>uint16</td><td>2</td><td></td></tr>
<tr><td>IntegerInputs</td><td>int[]</td><td>0...n</td><td></td></tr>
<tr><td>FloatInputLength</td><td>uint16</td><td>2</td><td></td></tr>
<tr><td>FloatInputs</td><td>float[]</td><td>0...n</td><td></td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>8 + Inputs</td><td>17</td><td>1000</td></tr>
</tbody></table>
</div>
<h4 id="productionstatus-id--313"><a class="header" href="#productionstatus-id--313">ProductionStatus (ID = 313)</a></h4>
<p>Periodic production status message sent by Navithor. Message is sent periodically defined by the interval parameter <code>MES_ProductionStatusSendTimer</code>.</p>
<p>Message can be also subscribed using <strong>MESMessageSubscription</strong> (ID = 348) message with subscription type 4 (ProductionStatus). This allows only specific clients to receive the message with specific interval, or when content of the message has changed.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>numberOfProductionOrders</td><td>uint16</td><td>2</td><td>Number of ProductionOrderData-structures in this message. Max 200</td></tr>
<tr><td>ProductionOrderData</td><td>ProductionOrderData[]</td><td>numberOfProductionOrders * ProductionOrderData length</td><td>Production Order Data structure below</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2 + structs</td><td>11</td><td>44411</td></tr>
</tbody></table>
</div>
<p><strong>Production Order Data</strong></p>
<p>Production order data struct containing information from a single production order.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>NameStringLength</td><td>uint16</td><td>2</td><td>Max 200 characters</td></tr>
<tr><td>Name</td><td>string</td><td>0...200</td><td>Production Order Name</td></tr>
<tr><td>Id</td><td>uint32</td><td>4</td><td>Production order ID</td></tr>
<tr><td>TargetSymbol</td><td>int32</td><td>4</td><td></td></tr>
<tr><td>AssignedToMachineId</td><td>uint16</td><td>2</td><td>0 if not assigned, machine ID if assigned machine</td></tr>
<tr><td>PickupSymbol</td><td>int32</td><td>4</td><td>-1 if no pickup symbol</td></tr>
<tr><td>ItemTypeToDeliver</td><td>int32</td><td>4</td><td>-1 if no items</td></tr>
<tr><td>CurrentStatus</td><td>byte</td><td>1</td><td>new_order = 0, loaded = 1, waiting = 2, executing = 3, interrupted = 4, completed = 5, cancelled = 6, paused = 7</td></tr>
<tr><td>ExecutionStatus</td><td>byte</td><td>1</td><td>none = 0, drive to load = 1, at load = 2, loading = 3, loaded = 4, driving to target = 5, at target = 6, unloading = 7, unloaded = 8, at hold = 9</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>22</td><td>222</td></tr>
</tbody></table>
</div>
<h4 id="productionordercompleted-id--314"><a class="header" href="#productionordercompleted-id--314">ProductionOrderCompleted (ID = 314)</a></h4>
<p>This message is sent by Navithor when machine has completed a production order.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>NameStringLength</td><td>uint16</td><td>2</td><td>Max 200 characters</td></tr>
<tr><td>Name</td><td>string</td><td>0...200</td><td>Production Order Name</td></tr>
<tr><td>ID</td><td>uint32</td><td>4</td><td>Unique ID of the production order</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>4 + Name length</td><td>15</td><td>215</td></tr>
</tbody></table>
</div>
<h4 id="productionorderlistactivatedresult-id--315"><a class="header" href="#productionorderlistactivatedresult-id--315">ProductionOrderListActivatedResult (ID = 315)</a></h4>
<p>Navithor replies to message ActivateProductionOrderList with this message.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>POLId</td><td>uint32</td><td>4</td><td>ID of the Production Order List template that was activated</td></tr>
<tr><td>OrderID</td><td>uint32</td><td>4</td><td>ID of the created active POL -&gt; 0 if failed</td></tr>
<tr><td>MachineID</td><td>int32</td><td>4</td><td>ID of the machine that is requested to execute the order or less than zero when any machine was requested</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>12</td><td>21</td><td>21</td></tr>
</tbody></table>
</div>
<h4 id="productionorderlistcompleted-id--316"><a class="header" href="#productionorderlistcompleted-id--316">ProductionOrderListCompleted (ID = 316)</a></h4>
<p>Navithor replies to message ActivateProductionOrderList with this message.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>OrderID</td><td>uint32</td><td>4</td><td>ID of the completed Production Order List</td></tr>
<tr><td>ExecutionTime</td><td>uint32</td><td>4</td><td>Seconds</td></tr>
<tr><td>TotalDist</td><td>double</td><td>8</td><td>Meters travelled during execution of this order</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>16</td><td>25</td><td>25</td></tr>
</tbody></table>
</div>
<h4 id="activeproductionorderliststatus-id--317"><a class="header" href="#activeproductionorderliststatus-id--317">ActiveProductionOrderListStatus (ID = 317)</a></h4>
<p>This message is sent when changes in statuses are reported or periodically if no changes detected.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>NumberOfActiveLists</td><td>uint16</td><td>2</td><td>Number of currently active (waiting for assign, assigned to machine) ProductionOrderLists in Navithor. Max 1000</td></tr>
<tr><td>POLDataList</td><td>POLData[]</td><td>NumberOfActiveLists * POLData length</td><td>List of ProductionOrderList-data structures</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2 + structs</td><td>11</td><td>49011</td></tr>
</tbody></table>
</div>
<p><strong>POLData</strong></p>
<p>Production Order List Data structure containing information of a single POL (active).</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>NameStringLength</td><td>uint16</td><td>2</td><td>Max 30 characters</td></tr>
<tr><td>POLName</td><td>string</td><td>0...30</td><td>Production Order List Name (max length = 30 chars)</td></tr>
<tr><td>POLId</td><td>uint32</td><td>4</td><td>Production order List ID</td></tr>
<tr><td>OrderID</td><td>uint32</td><td>4</td><td>OrderID generated by Navithor when a template list was activated</td></tr>
<tr><td>AssignedToMachineId</td><td>int32</td><td>4</td><td>-1 if not assigned, machine ID if assigned machine</td></tr>
<tr><td>POLStatus</td><td>byte</td><td>1</td><td>0 = none, 1 = loaded (waiting), 2 = active, 3 = cancelled, 4 = completed</td></tr>
<tr><td>CurrentTargetIndex</td><td>int16</td><td>2</td><td>-1 if not started, 0-&gt; index of the Production Order List location that is the current target</td></tr>
<tr><td>NumberOfTargets</td><td>uint16</td><td>2</td><td>Total number of locations in the POL</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>19</td><td>49</td></tr>
</tbody></table>
</div>
<h4 id="productionorderlisttemplateresult-id--318"><a class="header" href="#productionorderlisttemplateresult-id--318">ProductionOrderListTemplateResult (ID = 318)</a></h4>
<p>This message is as a reply to RequestProductionOrderListTemplates.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>NumberOfTemplates</td><td>uint16</td><td>2</td><td>Number of templates loaded in Navithor. Max 100</td></tr>
<tr><td>POLTemplateData</td><td>POLTemplateData[]</td><td>NumberOfTemplates * POLTemplateData length</td><td>List of ProductionOrderList-template data structures</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2 + structs</td><td>11</td><td>23811</td></tr>
</tbody></table>
</div>
<p><strong>POLTemplateData</strong></p>
<p>Production Order List Template Data structure containing information of a single POL Template.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>NameStringLength</td><td>uint16</td><td>2</td><td>Max 30 characters</td></tr>
<tr><td>POLName</td><td>string</td><td>0...30</td><td>Production Order List Name (max length = 30 chars)</td></tr>
<tr><td>POLId</td><td>uint32</td><td>4</td><td>Production order List ID</td></tr>
<tr><td>NumberOfDestinations</td><td>uint16</td><td>2</td><td>Number of destinations in execution order. Max 100</td></tr>
<tr><td>DestinationID</td><td>uint16[]</td><td>NumberOfDestinations * 2</td><td>SymbolicPointID of the destination</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>8</td><td>238</td></tr>
</tbody></table>
</div>
<h4 id="tagstatusrequest-id--319"><a class="header" href="#tagstatusrequest-id--319">TagStatusRequest (ID = 319)</a></h4>
<p>Navithor can request a certain status for a tag that is attached to production area entity. Currently supported entities are:</p>
<ul>
<li>Symbolic Point of type 'Door'</li>
</ul>
<p>When controlled tags are defined for the production system Navithor sends this message with regular interval and when status change is required. MES should answer to this message with TagStatus (ID = 24).</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>TagID</td><td>uint32</td><td>4</td><td>Tag ID defined in Navithor Tools for Symbolic Point</td></tr>
<tr><td>RequiredStatus</td><td>int32</td><td>4</td><td>Required status for entity linked to the tag. Defined values:<p></p>0 = OFFLINE (not requested)<br/>1 = DOOR CLOSED (default request)<br/>2 = DOOR CLOSING (not requested)<br/>3 = DOOR OPENING (not requested)<br/>4 = DOOR OPEN (when machine needs pass-through)</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>8</td><td>17</td><td>17</td></tr>
</tbody></table>
</div>
<h4 id="requestpickupresult-id--320"><a class="header" href="#requestpickupresult-id--320">RequestPickUpResult (ID = 320)</a></h4>
<p>Navithor's answer to RequestPickUp message (ID = 25).</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>Symbolic Point ID</td><td>uint32</td><td>4</td><td>Symbolic point ID defined in Navithor Tools for Symbolic Point</td></tr>
<tr><td>Result</td><td>uint32</td><td>4</td><td>Result of RequestPickUp message handling. Possible results:<p></p>0 = no error<br/>1 = bad input data, invalid combination of Symbolic Point ID and Shelf ID<br/>2 = no resource at the specified location<br/>4 = symbolic point with specified ID was not found<br/>Error ID (See chapter 9.5 &quot;Error IDs&quot;)</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>8</td><td>17</td><td>17</td></tr>
</tbody></table>
</div>
<h4 id="mesresourcestatus-id--321"><a class="header" href="#mesresourcestatus-id--321">MESResourceStatus (ID = 321)</a></h4>
<p>Periodic resource status message sent by Navithor.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>NumberOfResources</td><td>uint16</td><td>2</td><td>Number of ResourceData-structures in this message. Max 500</td></tr>
<tr><td>ResourceDataList</td><td>ResourceData[]</td><td>NumberOfResources * ResourceData length</td><td>ResourceData structure below</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2 + structs</td><td>11</td><td>10011</td></tr>
</tbody></table>
</div>
<p><strong>ResourceData</strong></p>
<p>Resource data struct containing information from a single resource</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>ResourceId</td><td>int32</td><td>4</td><td>Unique ID for the resource</td></tr>
<tr><td>ResourceTypeId</td><td>int32</td><td>4</td><td>Resource type ID</td></tr>
<tr><td>ResourceQuantity</td><td>uint16</td><td>2</td><td>Resource quantity</td></tr>
<tr><td>ResourceStatus</td><td>uint16</td><td>2</td><td>0 = not defined, 1 = at symbolic point, 2 = onboard of AGV</td></tr>
<tr><td>LocationID</td><td>int32</td><td>4</td><td>-1 if not defined, otherwise either SymbolicPointId or MachineId depending on the resource status given above</td></tr>
<tr><td>ProductionOrderId</td><td>int32</td><td>4</td><td>-1 if no production order linked to the resource</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>20</td><td>20</td></tr>
</tbody></table>
</div>
<h4 id="requestresourcestatusatlocation-id--322"><a class="header" href="#requestresourcestatusatlocation-id--322">RequestResourceStatusAtLocation (ID = 322)</a></h4>
<p>Navithor sends this message to request a specific resource status to a location. The request can be:</p>
<ul>
<li>Navithor asks for a specific resource type to be added to a specific symbolic point
<ul>
<li>Use case: Transfer request is linked to a pickup location but there is no resource at the pickup location. The transfer request cannot proceed until the correct resource is added to the symbolic point</li>
</ul>
</li>
<li>Navithor requests that a resource must be removed from a specific symbolic point
<ul>
<li>Use case 1: unload location needs to be set empty so that next AGV arriving to the location can unload its resource</li>
<li>Use case 2: pickup location has wrong resource type compared to the resource type of transfer request</li>
</ul>
</li>
</ul>
<p>This message is not automatically sent by default. Enabling requires a mapping file configuration for Navithor to understand the correct MES client IDs that handles the request(s). Mapping file:</p>
<ul>
<li>File 'LocationMESRequestLinkings.txt' must be found in 'Overrides'-subfolder of Navithor Server's running folder</li>
<li>One configuration per line (Symbolic Point ID:MES ID). E.g:
<ul>
<li>1:1001
<ul>
<li>Symbolic Point 1 is monitored for required resource status and RequestResourceStatusAtLocation-message will be sent to MES Client that is identified as 1001</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Parameters MES_ResRequestSendInterval and MES_ResRequestSendInterval_NoAck affect the periodic interval of sending this message. The request is also sent in case the data in the message gets changed.</p>
<p>MES should reply with message ID = 201 AckOrRejRequest. Acknowleding the request does not create any changes in the production. The requests can be fulfilled only by changing the resource status at needed symbolic point(s). This can be done with messages SetStatusAtSymbolicPoint (ID = 20), SetResourceAtLocationWithExtendedInfo (ID = 53) or SetResourcesAtLocation (ID = 32). Bada</p>
<p>MES Client can also reject the request with AckOrRejRequest. Rejecting a request will either cause the related transfer request to be postponed or cancelled. See section <em>Error IDs</em> for information about reason codes. Postponing means the transfer request will unlink from the symbolic point and become inactive for a specified time (parameter ProductionManager_TRANSFER_REQUEST_POSTPONE_TIME) until it can link to a symbolic point again.</p>
<p>This message is supported in Navithor version 1.9.59.X -&gt; MES interface updated to version 1.6.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>RequestID</td><td>uint16</td><td>2</td><td>A running number to identify reply to this specific request</td></tr>
<tr><td>SymbolicPointID</td><td>uint16</td><td>2</td><td>ID of the symbolic point</td></tr>
<tr><td>CurrResTypeAtLoc</td><td>int32</td><td>4</td><td>Type ID of the resource currently at symbolic point. 0 if location is empty</td></tr>
<tr><td>CurrResCountAtLoc</td><td>uint16</td><td>2</td><td>Number of resources currently at the location. 0 if location is empty</td></tr>
<tr><td>CurrPickUpReqStatus</td><td>uint16</td><td>2</td><td>Current Pickup request-status:<p></p>0 = No request<br/>1 = Pickup request active<br/>2 = Pickup request active and AGV routed to location</td></tr>
<tr><td>RequestedResTypeID</td><td>int32</td><td>4</td><td>Type ID of the resource needed at the location</td></tr>
<tr><td>RequestedResCount</td><td>uint16</td><td>2</td><td>Number of resources requested to be at location</td></tr>
<tr><td>RequestReason</td><td>uint16</td><td>2</td><td>Navithor has reason for the request:<p></p>0 = Production Request. E.g. transfer request received but no resource at pickup location<br/>1 = AGV is currently picking up current resource<br/>2 = AGV is currently dropping a resource to this location<br/>100 = Error – wrong resource at symbolic point<br/>200 = Error – delivery of current resource is not possible<br/>300 = Error – AGV fails to load current resource at location<br/>301 = Error – AGV fails to unload resource to location</td></tr>
<tr><td>ReqResIdentifierLen</td><td>uint16</td><td>2</td><td>Length of following ReqResIdentifier-string field. Max len = 256 characters</td></tr>
<tr><td>ReqResIndentifier</td><td>string</td><td>0...255</td><td>Resource identifier number or code</td></tr>
<tr><td>RequestInfoStrLen</td><td>uint16</td><td>2</td><td>Length of following RequestInformation-string field. Max len = 256 characters</td></tr>
<tr><td>RequestInformation</td><td>string</td><td>0...255</td><td>Information from Navithor about the request</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>24 + ReqResIdentifierLen + RequestInfoStrLen</td><td>33</td><td>543</td></tr>
</tbody></table>
</div>
<h4 id="transferrequeststatus-id--323"><a class="header" href="#transferrequeststatus-id--323">TransferRequestStatus (ID = 323)</a></h4>
<p>If TransferRequest message was sent with a RequestID, Navithor sends this message with the same RequestID when the status of TransferRequest changes. The message is sent first time, when production order is created and linked to the transfer request.</p>
<p>This message is supported in Navithor version 2.0.2.X -&gt; MES interface updated to version 2.4.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>RequestID</td><td>uint32</td><td>4</td><td>ID sent by the planner in TransferRequest message to identify reply to that specific request</td></tr>
<tr><td>ProductionOrderID</td><td>uint32</td><td>4</td><td>Production order ID linked to the transfer request</td></tr>
<tr><td>TransferStatus</td><td>uint16</td><td>2</td><td>None = 0, waiting pickup = 1, assigned to machine = 2, transporting = 3, unloaded = 4, cancelled = 6</td></tr>
<tr><td>MachineID</td><td>uint32</td><td>4</td><td>0 = not assigned to any machine, otherwise tells the machine ID</td></tr>
<tr><td>PickupLocationID</td><td>uint16</td><td>2</td><td>ID of the pickup location (symbolic point or group). <strong>(Optional: enable by setting parameter MES_StatusMessageProtocolVersion &gt;= 2)</strong></td></tr>
<tr><td>TargetLocationID</td><td>uint16</td><td>2</td><td>ID of the current target location (symbolic point or group). <strong>(Optional: enable by setting parameter MES_StatusMessageProtocolVersion &gt;= 2)</strong></td></tr>
<tr><td>PickupIDType</td><td>byte</td><td>1</td><td>0 = PickupLocationID-field points to symbolic point ID<br/>1 = PickupLocationID-field points to symbolic point group ID<br/><strong>(Optional: enable by setting parameter MES_StatusMessageProtocolVersion &gt;= 2)</strong></td></tr>
<tr><td>TargetIDType</td><td>byte</td><td>1</td><td>0 = TargetLocationID-field points to symbolic point ID<br/> 1 = TargetLocationID-field points to symbolic point group ID<br/><strong>(Optional: enable by setting parameter MES_StatusMessageProtocolVersion &gt;= 2)</strong></td></tr>
<tr><td>OrderedAmount</td><td>uint16</td><td>2</td><td>Total amount of resources to be delivered in the order. <strong>(Optional: enable by setting parameter MES_StatusMessageProtocolVersion &gt;= 2)</strong></td></tr>
<tr><td>AGVsTransporting</td><td>uint16</td><td>2</td><td>Total amount of AGVs currently transporting resources. <strong>(Optional: enable by setting parameter MES_StatusMessageProtocolVersion &gt;= 2)</strong></td></tr>
<tr><td>DeliveredCount</td><td>uint16</td><td>2</td><td>Amount of resources delivered so far. <strong>(Optional: enable by setting parameter MES_StatusMessageProtocolVersion &gt;= 2)</strong></td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>14 [+ 12]</td><td>23</td><td>35</td></tr>
</tbody></table>
</div>
<h4 id="symbolicpointgroupstatus-id--324"><a class="header" href="#symbolicpointgroupstatus-id--324">SymbolicPointGroupStatus (ID = 324)</a></h4>
<p>This message can be used to set resource related status for a SymbolicPointGroup.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>SympointGroupID</td><td>uint16</td><td>2</td><td>ID of the SymbolicPointGroup</td></tr>
<tr><td>NumberOfSyms</td><td>uint16</td><td>2</td><td>Number of enabled Symbolic Points in this group</td></tr>
<tr><td>NumberOfAvailableSyms</td><td>uint16</td><td>2</td><td>Number of Symbolic Points in this group that are available for resources</td></tr>
<tr><td>MaxResCount</td><td>uint16</td><td>2</td><td>Total number of resources possible for Symbolic Points in this group</td></tr>
<tr><td>CurrResCount</td><td>uint16</td><td>2</td><td>Current number of resources at Symbolic Points of this group</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>10</td><td>19</td><td>19</td></tr>
</tbody></table>
</div>
<h4 id="groupedtagstatusrequest-id--325"><a class="header" href="#groupedtagstatusrequest-id--325">GroupedTagStatusRequest (ID = 325)</a></h4>
<p>Navithor can request a certain status for a tag that is attached to production area entity. Currently supported entities are:</p>
<ul>
<li>Symbolic Point of type 'Door'</li>
</ul>
<p>When controlled tags are defined for the production system Navithor sends this message with regular interval and when status change is required. MES should answer to this message with TagStatus (ID = 24) or with GroupedTagStatus (ID = 35).</p>
<p>This message is only sent if MES_GroupTagStatusRequests parameter is set to true. Available from Navithor server versions 2.1.2.0 onwards.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Number of tags</td><td>uint16</td><td>2</td><td>Number of tags in this request</td></tr>
<tr><td>Requests for tags</td><td>TagData[]</td><td>Number of tags * TagData length</td><td></td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2 + structs</td><td>11</td><td>4011</td></tr>
</tbody></table>
</div>
<p><strong>TagData</strong></p>
<p>Data structure for a single machine type.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>TagID</td><td>uint16</td><td>2</td><td>Tag ID defined in Navithor Tools for Symbolic Point</td></tr>
<tr><td>TagStatus</td><td>uint16</td><td>2</td><td>Status of the tag. Defined values:<p></p>0 = OFFLINE<br/>1 = DOOR CLOSED<br/>2 = DOOR CLOSING<br/>3 = DOOR OPENING<br/>4 = DOOR OPEN</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>4</td><td>4</td></tr>
</tbody></table>
</div>
<h4 id="activefirealarmstatus-id--326"><a class="header" href="#activefirealarmstatus-id--326">ActiveFireAlarmStatus (ID = 326)</a></h4>
<p>Navithor sends this message periodically for each active fire alarm.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>FireAlarmID</td><td>uint32</td><td>4</td><td>ID of the active fire alarm</td></tr>
<tr><td>MachineCount</td><td>uint16</td><td>2</td><td>Number of machines that are still in the zones belonging to the alarm</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>6</td><td>15</td><td>15</td></tr>
</tbody></table>
</div>
<h4 id="stoppedatstoppoint-id--328"><a class="header" href="#stoppedatstoppoint-id--328">StoppedAtStopPoint (ID = 328)</a></h4>
<p>Machine has stopped driving.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>MachineID</td><td>uint16</td><td>2</td><td></td></tr>
<tr><td>StopPointIndex</td><td>int16</td><td>2</td><td>The index of the current point where AGV stopped. Might be used for sending notification when light curtain triggered with negative index</td></tr>
<tr><td>ProductionOrderID</td><td>int32</td><td>4</td><td>ID of the production order, or 0 when drive task was not from production order</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>8</td><td>17</td><td>17</td></tr>
</tbody></table>
</div>
<h4 id="estimationofdrivetostartsymbolicpoint-id--329"><a class="header" href="#estimationofdrivetostartsymbolicpoint-id--329">EstimationOfDriveToStartSymbolicPoint (ID = 329)</a></h4>
<p>Navithor will reply with this message to valid EstimateDriveToStartSymbolicPoint message.</p>
<p>Navithor replies with driving distances and times in the ascending order of the SortingField specified in EstimateDriveToStartSymbolicPoint. The distances and times are calculated to the start symbolic point for each possible machine.</p>
<p>Estimation of the driving distances and times are only possible for enabled machines in production. If some machine is not enabled, or is not in production, or is executing another order, it will not appear in the estimation results.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>NumberOfMachines</td><td>uint16</td><td>2</td><td>Number of machines, from 0 to 200</td></tr>
<tr><td>MachineIds</td><td>uint16[]</td><td>NumberOfMachines * 2</td><td>Array of machine IDs</td></tr>
<tr><td>DrivingDistances</td><td>float[]</td><td>NumberOfMachines * 4</td><td>Estimated driving distances in meters</td></tr>
<tr><td>DrivingTimes</td><td>uint16[]</td><td>NumberOfMachines * 2</td><td>Estimated driving times in seconds</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2 + NumberOfMachines * 8</td><td>11</td><td>1611</td></tr>
</tbody></table>
</div>
<h4 id="racksetupreply-id--330"><a class="header" href="#racksetupreply-id--330">RackSetupReply (ID = 330)</a></h4>
<p>This message will be sent by Navithor back to the same MES client as a reply to its GetRackSetup message.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>NumberOfSps</td><td>int32</td><td>4</td><td>If GetRackSetup message had positive MachineTypeId, then this field contains the number of symbolic points which are racks with defined MachineTypeId. Else, this field contains the number of all symbolic points which are racks</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>4</td><td>13</td><td>13</td></tr>
</tbody></table>
</div>
<h4 id="racksetup-id--331"><a class="header" href="#racksetup-id--331">RackSetup (ID = 331)</a></h4>
<p>This message will be sent by Navithor back to the same MES client as an additional part of the reply to its GetRackSetup message.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>SpId</td><td>int32</td><td>4</td><td>Symbolic point ID which is a rack with defined MachineTypeId</td></tr>
<tr><td>MachineTypeId</td><td>int32</td><td>4</td><td>Machine type ID</td></tr>
<tr><td>NumberOfShelves</td><td>uint16</td><td>2</td><td>Number of shelves in this rack (maximum is 100)</td></tr>
<tr><td>Shelves</td><td>&lt;int32, int32&gt;[]</td><td>0...800</td><td>Shelves passed as list of tuples containing &lt;Shelf ID, Actuator height (mm)&gt;. Number of the list elements is equal to NumberOfShelves</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>10 + length of shelves</td><td>19</td><td>819</td></tr>
</tbody></table>
</div>
<h4 id="symbolicpointgroupsetup-id--332"><a class="header" href="#symbolicpointgroupsetup-id--332">SymbolicPointGroupSetup (ID = 332)</a></h4>
<p>This message will be sent by Navithor back to the same MES client as an answer to the GetSymbolicPointGroupSetup message.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>NumOfGroups</td><td>uint16</td><td>2</td><td>Number of symbolic point groups in the system</td></tr>
<tr><td>SymbolicPointGroups</td><td>SymbolicPointGroupData[]</td><td>NumOfGroups * SymbolicPointGroupData length</td><td>Array of SymbolicPointGroupData structs containing information about each group. Data defined below</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2 + structs</td><td>11</td><td>6011</td></tr>
</tbody></table>
</div>
<p><strong>SymbolicPointGroupData</strong></p>
<p>Data structure for a single symbolic point group.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Group ID</td><td>uint16</td><td>2</td><td>Symbolic point group ID</td></tr>
<tr><td>NameStringLength</td><td>uint16</td><td>2</td><td>Max 100 characters</td></tr>
<tr><td>Name</td><td>string</td><td>0...100</td><td>Name of the symbolic point group</td></tr>
<tr><td>NumberOfSPs</td><td>uint16</td><td>2</td><td>Number of Symbolic Points in this group (SPN)</td></tr>
<tr><td>SympointID</td><td>uint16[]</td><td>2 * SPN</td><td>Symbolic point IDs as array</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>6</td><td>600</td></tr>
</tbody></table>
</div>
<h4 id="zonestatusreply-id--333"><a class="header" href="#zonestatusreply-id--333">ZoneStatusReply (ID = 333)</a></h4>
<p>Reply to the Request zone status message (ID = 51).</p>
<p>Valid from Navithor 2.20.0.0 forward.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>Zone ID</td><td>uint32</td><td>4</td><td>The ID of the zone</td></tr>
<tr><td>Requested information</td><td>uint16</td><td>2</td><td>Flags that were set in the request so that the Client can read the message:<p></p>ZoneOccupancy status 1 &lt;&lt; 0<br/>AGVs inside zone (List of AGV ids) 1 &lt;&lt; 1</td></tr>
<tr><td>Zone occupancy status</td><td>uint16</td><td>2</td><td>1 if occupied and 0 if no AGVs inside the zone. <strong>(Optional: is only sent when Requested information flags have first bit set to 1 (1 &lt;&lt; 0))</strong></td></tr>
<tr><td>Number of AGVs inside zone</td><td>uint16</td><td>2</td><td>How many AGVs are inside the zone. Denoted as N <strong>(Optional: is only sent when Requested information flags have second bit set to 1 (1 &lt;&lt; 1))</strong></td></tr>
<tr><td>AGV IDs of the AGVs inside</td><td>uint32[]</td><td>N * 4</td><td>The IDs of the AGVs inside the zone. <strong>(Optional: is only sent when Requested information flags have second bit set to 1 (1 &lt;&lt; 1))</strong></td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>6 [+ 2] [+ 2 + N * 4]</td><td>15</td><td>1617</td></tr>
</tbody></table>
</div>
<h4 id="mesbatterytemperaturewarning-id--334"><a class="header" href="#mesbatterytemperaturewarning-id--334">MesBatteryTemperatureWarning (ID = 334)</a></h4>
<p>This message is sent when machine battery reports too high temperature.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>MachineID</td><td>int32</td><td>4</td><td>MachineID</td></tr>
<tr><td>PositionX</td><td>float</td><td>4</td><td>Machine X position</td></tr>
<tr><td>PositionY</td><td>float</td><td>4</td><td>Machine Y position</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>12</td><td>21</td><td>21</td></tr>
</tbody></table>
</div>
<h4 id="productionareachanged-id--335"><a class="header" href="#productionareachanged-id--335">ProductionAreaChanged (ID = 335)</a></h4>
<p>Message will be sent by Navithor when production area has been changed or reloaded. Will be also sent at startup.</p>
<p>Available from Navithor server versions 2.21.0.0 onwards.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>ProductionAreaID</td><td>uint16</td><td>2</td><td>The ID of the production area</td></tr>
<tr><td>ProductionAreaVersion</td><td>uint16</td><td>2</td><td>The version number of the production area</td></tr>
<tr><td>NameStringLength</td><td>uint16</td><td>2</td><td>Length of the Production Area Name. Max 128 characters</td></tr>
<tr><td>ProductionAreaName</td><td>string</td><td>0...128</td><td>Production Area Name. Max length = 128 characters</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>6 + ProductionAreaName length</td><td>15</td><td>143</td></tr>
</tbody></table>
</div>
<h4 id="machinetypeinformationreply-id--336"><a class="header" href="#machinetypeinformationreply-id--336">MachineTypeInformationReply (ID = 336)</a></h4>
<p>Message sent as reply to GetProductionAreaInformation (ID = 52). Contains information about currently active machine types.</p>
<p>Available from Navithor server versions 2.21.0.0 onwards.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>NumberOfMachineTypes</td><td>uint16</td><td>2</td><td>How many MachineTypeInfo data structures are included</td></tr>
<tr><td>Information</td><td>MachineTypeInfo[]</td><td>NumberOfMachineTypes * MachineTypeInfo length</td><td>Machine type information</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2 + structs</td><td>11</td><td>65535</td></tr>
</tbody></table>
</div>
<p><strong>MachineTypeInfo</strong></p>
<p>Machine type information.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>ID</td><td>int32</td><td>4</td><td>ID of machine type</td></tr>
<tr><td>NameStringLength</td><td>uint16</td><td>2</td><td>Length machine type name</td></tr>
<tr><td>Name</td><td>string</td><td>0...50</td><td>Name of machine type</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>6</td><td>56</td></tr>
</tbody></table>
</div>
<h4 id="machineinformationreply-id--337"><a class="header" href="#machineinformationreply-id--337">MachineInformationReply (ID = 337)</a></h4>
<p>Message sent as reply to GetProductionAreaInformation (ID = 52). Contains information about currently active machines.</p>
<p>Available from Navithor server versions 2.21.0.0 onwards.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>NumberOfMachineEntries</td><td>uint16</td><td>2</td><td>How many MESMachineInformation data structures are included</td></tr>
<tr><td>Information</td><td>MESMachineInformation[]</td><td>NumberOfMachineEntries * MESMachineInformation length</td><td>Machine information</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2 + structs</td><td>11</td><td>65535</td></tr>
</tbody></table>
</div>
<p><strong>MESMachineInformation</strong></p>
<p>Machine information.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>ID</td><td>int32</td><td>4</td><td>ID of machine</td></tr>
<tr><td>TypeId</td><td>int32</td><td>4</td><td>ID of machine type</td></tr>
<tr><td>NameStringLength</td><td>uint16</td><td>2</td><td>Length machine name</td></tr>
<tr><td>Name</td><td>string</td><td>0...50</td><td>Name of machine</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>10</td><td>60</td></tr>
</tbody></table>
</div>
<h4 id="symbolicpointinformationreply-id--338"><a class="header" href="#symbolicpointinformationreply-id--338">SymbolicPointInformationReply (ID = 338)</a></h4>
<p>Message sent as reply to GetProductionAreaInformation (ID = 52). Contains information about currently active symbolic points.</p>
<p>Available from Navithor server versions 2.21.0.0 onwards.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>NumberOfMachineEntries</td><td>uint16</td><td>2</td><td>How many MESSymbolicPointInformation data structures are included</td></tr>
<tr><td>Information</td><td>SPInformation[]</td><td>NumberOfMachineEntries * SPInformation length</td><td>Symbolic point information</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2 + structs</td><td>11</td><td>65535</td></tr>
</tbody></table>
</div>
<p><strong>SPInformation</strong></p>
<p>Symbolic point information. Max length can be determined from 62 + (number of machine types in production area * 4).</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>ID</td><td>int32</td><td>4</td><td>ID of symbolic point</td></tr>
<tr><td>Type</td><td>int32</td><td>4</td><td>Type of symbolic point</td></tr>
<tr><td>AvailableForMachineTypesCount</td><td>uint16</td><td>2</td><td>How many machine types are valid for this symbolic point</td></tr>
<tr><td>AvailableForMachineTypes</td><td>int32[]</td><td>AvailableForMachineTypesCount * 4</td><td>ID's of machine types that are valid for this symbolic point</td></tr>
<tr><td>NameStringLength</td><td>uint16</td><td>2</td><td>Length of name</td></tr>
<tr><td>Name</td><td>string</td><td>0...50</td><td>Name of symbolic point</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>12</td><td>102</td></tr>
</tbody></table>
</div>
<h4 id="symbolicpointholdinformationreply-id--339"><a class="header" href="#symbolicpointholdinformationreply-id--339">SymbolicPointHoldInformationReply (ID = 339)</a></h4>
<p>Message sent as reply to GetProductionAreaInformation (ID = 52). Contains hold information of currently active symbolic points.</p>
<p>Available from Navithor server versions 2.21.0.0 onwards.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>NumberOfHoldEntries</td><td>uint16</td><td>2</td><td>How many HoldInformation data structures are included</td></tr>
<tr><td>Information</td><td>HoldInformation[]</td><td>NumberOfHoldEntries * HoldInformation length</td><td>Symbolic point hold information</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2 + structs</td><td>11</td><td>65535</td></tr>
</tbody></table>
</div>
<p><strong>HoldInformation</strong></p>
<p>Symbolic point hold information.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Id</td><td>int32</td><td>4</td><td>ID of symbolic point</td></tr>
<tr><td>MachineTypeId</td><td>int32</td><td>4</td><td>For which machine type this hold information is for</td></tr>
<tr><td>DefaultReleaseLocation</td><td>int32</td><td>4</td><td>ID of default destination for hold-release. -1 if not defined</td></tr>
<tr><td>Alt1Location</td><td>int32</td><td>4</td><td>ID of first alternative location where AGV will be released to if default location is not available. -1 if not defined</td></tr>
<tr><td>Alt2Location</td><td>int32</td><td>4</td><td>ID of second alternative location where AGV will be release to if first alternative is not available. -1 if not defined</td></tr>
<tr><td>Alt3Location</td><td>int32</td><td>4</td><td>ID of third alternative location where AGV will be released to if second alternative is not available. -1 if not defined</td></tr>
<tr><td>ReleaseTimeOutSecond</td><td>uint32</td><td>4</td><td>How many seconds before AGV will be automatically released from hold location. If not set = 4294967295 (uint32 max value)</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>28</td><td>28</td></tr>
</tbody></table>
</div>
<h4 id="symbolicpointspatialinformationreply-id--340"><a class="header" href="#symbolicpointspatialinformationreply-id--340">SymbolicPointSpatialInformationReply (ID = 340)</a></h4>
<p>Message sent as reply to GetProductionAreaInformation (ID = 52). Contains spatial information of currently active symbolic points.</p>
<p>Available from Navithor server versions 2.21.0.0 onwards.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>NumberOfEntries</td><td>uint16</td><td>2</td><td>How many SymbolicPointSpatialInformation data structures are included</td></tr>
<tr><td>Information</td><td>SymbolicPoint<br>SpatialInformation[]</td><td>NumberOfEntries * SymbolicPoint<br>SpatialInformation length</td><td>Symbolic point spatial information</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2 + structs</td><td>11</td><td>65535</td></tr>
</tbody></table>
</div>
<p><strong>SymbolicPointSpatialInformation</strong></p>
<p>Symbolic point spatial information.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Id</td><td>int32</td><td>4</td><td>ID of symbolic point</td></tr>
<tr><td>X</td><td>double</td><td>8</td><td>X coordinate of symbolic point</td></tr>
<tr><td>Y</td><td>double</td><td>8</td><td>Y coordinate of symbolic point</td></tr>
<tr><td>Z</td><td>double</td><td>8</td><td>Z coordinate of symbolic point  Not in use</td></tr>
<tr><td>Level</td><td>int32</td><td>4</td><td>Which level/floor this symbolic point is located at. Not in use</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>32</td><td>32</td></tr>
</tbody></table>
</div>
<h4 id="resourcetypeinformationreply-id--341"><a class="header" href="#resourcetypeinformationreply-id--341">ResourceTypeInformationReply (ID = 341)</a></h4>
<p>Message sent as reply to GetProductionAreaInformation (ID = 52). Contains information about currently active resource types.</p>
<p>Available from Navithor server versions 2.21.0.0 onwards.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>NumberOfEntries</td><td>uint16</td><td>2</td><td>How many ResourceTypeInformation data structures are included</td></tr>
<tr><td>Information</td><td>ResourceType<br />Information[]</td><td>NumberOfEntries * ResourceTypeInformation length</td><td>Resource type information</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2 + structs</td><td>11</td><td>65535</td></tr>
</tbody></table>
</div>
<p><strong>ResourceTypeInformation</strong></p>
<p>Resource type information.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Id</td><td>int32</td><td>4</td><td>ID of resource type</td></tr>
<tr><td>NameStringLength</td><td>uint16</td><td>2</td><td>Length of name</td></tr>
<tr><td>Name</td><td>string</td><td>0...50</td><td>Name of resource type</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>6</td><td>56</td></tr>
</tbody></table>
</div>
<h4 id="resourcetypeoffsetinformationreply-id--342"><a class="header" href="#resourcetypeoffsetinformationreply-id--342">ResourceTypeOffsetInformationReply (ID = 342)</a></h4>
<p>Message sent as reply to GetProductionAreaInformation (ID = 52). Contains offset information of currently active resource types.</p>
<p>Available from Navithor server versions 2.21.0.0 onwards.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>NumberOfOffsetEntries</td><td>uint16</td><td>2</td><td>How many MESResourceTypeOffsetInformation data structures are included</td></tr>
<tr><td>Information</td><td>MESResourceType<br>OffsetInformation[]</td><td>NumberOfOffsetEntries * MESResourceType<br>OffsetInformation length</td><td>Resource type offset information</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2 + structs</td><td>11</td><td>65535</td></tr>
</tbody></table>
</div>
<p><strong>MESResourceTypeOffsetInformation</strong></p>
<p>Resource type offset information.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Id</td><td>int32</td><td>4</td><td>ID of resource type</td></tr>
<tr><td>AppliesForMachineType</td><td>int32</td><td>4</td><td>ID of machine type these offsets are for</td></tr>
<tr><td>OffsetX</td><td>double</td><td>8</td><td>X offset</td></tr>
<tr><td>OffsetY</td><td>double</td><td>8</td><td>Y offset</td></tr>
<tr><td>OffsetZ</td><td>double</td><td>8</td><td>Z offset. Not used</td></tr>
<tr><td>RotationX</td><td>double</td><td>8</td><td>Rotation around X axis. Not used</td></tr>
<tr><td>RotationY</td><td>double</td><td>8</td><td>Rotation around Y axis Not used</td></tr>
<tr><td>RotationZ</td><td>double</td><td>8</td><td>Rotation around Z axis</td></tr>
<tr><td>ScaleX</td><td>double</td><td>8</td><td>Scale on X axis</td></tr>
<tr><td>ScaleY</td><td>double</td><td>8</td><td>Scale on Y axis</td></tr>
<tr><td>ScaleZ</td><td>double</td><td>8</td><td>Scale on Z axis</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>80</td><td>80</td></tr>
</tbody></table>
</div>
<h4 id="machineloadcapacityinformationreply-id--343"><a class="header" href="#machineloadcapacityinformationreply-id--343">MachineLoadCapacityInformationReply (ID = 343)</a></h4>
<p>Message sent as reply to GetProductionAreaInformation (ID = 52). Contains load capacity information for currently active machines.</p>
<p>Available from Navithor server versions 2.21.0.0 onwards.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>NumberOfEntries</td><td>uint16</td><td>2</td><td>How many MachineLoadCapacityInformation data structures are included</td></tr>
<tr><td>Information</td><td>Machine<br>LoadCapacityInformation[]</td><td>NumberOfEntries * Machine<br>LoadCapacityInformation length</td><td>Machine load capacity information</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2 + structs</td><td>11</td><td>65535</td></tr>
</tbody></table>
</div>
<p><strong>MachineLoadCapacityInformation</strong></p>
<p>Machine load capacity information.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>MachineId</td><td>int32</td><td>4</td><td>ID of machine</td></tr>
<tr><td>ResourcetypeId</td><td>int32</td><td>4</td><td>ID of resource type</td></tr>
<tr><td>Capacity</td><td>int32</td><td>4</td><td>How many of given resource type AGV is allowed to carry at once</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>12</td><td>12</td></tr>
</tbody></table>
</div>
<h4 id="symbolicpointloadcapacityinformationreply-id--344"><a class="header" href="#symbolicpointloadcapacityinformationreply-id--344">SymbolicPointLoadCapacityInformationReply (ID = 344)</a></h4>
<p>Message sent as reply to GetProductionAreaInformation (ID = 52). Contains load capacity information for currently active symbolic points.</p>
<p>Available from Navithor server versions 2.21.0.0 onwards.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>NumberOfEntries</td><td>uint16</td><td>2</td><td>How many MachineLoadCapacityInformation data structures are included</td></tr>
<tr><td>Information</td><td>SymbolicPoint<br>LoadCapacityInformation[]</td><td>NumberOfEntries * SymbolicPoint<br>LoadCapacityInformation length</td><td>Symbolic point load capacity information</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2 + structs</td><td>11</td><td>65535</td></tr>
</tbody></table>
</div>
<p><strong>SymbolicPointLoadCapacityInformation</strong></p>
<p>Symbolic point load capacity information.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>SymbolicPointId</td><td>int32</td><td>4</td><td>ID of symbolic point</td></tr>
<tr><td>ResourcetypeId</td><td>int32</td><td>4</td><td>ID of resource type</td></tr>
<tr><td>Capacity</td><td>int32</td><td>4</td><td>How many of given resource type symbolic point is allowed to hold at once</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>12</td><td>12</td></tr>
</tbody></table>
</div>
<h4 id="symbolicpointresourcestatus-id--345"><a class="header" href="#symbolicpointresourcestatus-id--345">SymbolicPointResourceStatus (ID = 345)</a></h4>
<p>Reply to the RequestSPResourceStatus message (ID = 55).</p>
<p>Valid from Navithor 2.21.0.0.</p>
<p>Included since Navithor version 2.51.0.0,
if you create an empty text file <em>Navithor Server/Overrides/SendRequestFlagsInResourceStatusReply.txt</em> and reload the override files,
this message will contain <em>RequestFlags</em> field as two extra bytes after the frame. These flags match with the requested flags sent in the request this message is replying to.
In this case minimum length of the message is 15 bytes and maximum is 64015.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>SymbolicPointCount</td><td>uint16</td><td>2</td><td>Count of for how many symbolic points the status will be returned. Maximum amount is 500.</td></tr>
<tr><td>ResourceData</td><td>MESResourceData<br>WithIdentifier[]</td><td>SymbolicPointCount * MESResourceData<br>WithIdentifier length</td><td>MESResourceDataWithIdentifier data structure</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2 + structs</td><td>13</td><td>64013</td></tr>
</tbody></table>
</div>
<p><strong>MESResourceDataWithIdentifier</strong></p>
<p>MESResourceDataWithIdentifier.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>SymbolicPointId</td><td>uint32</td><td>4</td><td>Symbolic point ID where status was requested</td></tr>
<tr><td>SPStatus</td><td>uint16</td><td>2</td><td>Status of the symbolic point. 0 = Disabled, 1 = Enabled</td></tr>
<tr><td>NoOfResources</td><td>uint16</td><td>2</td><td>The value of this field depends on the bits enabled in the RequestFlags field of the RequestSPResourceStatus message.<br/>- Bit 3 = 0: The value is the total number of resources at the location.<br/>- Bit 3 = 1: The value is the number of items for the individual resource.</td></tr>
<tr><td>ResourceType</td><td>uint16</td><td>2</td><td>Resource type ID. Returned as 0, if no resources at SP. If multiple resource types, only the last type is returned</td></tr>
<tr><td>ResIdentifierLength</td><td>uint16</td><td>2</td><td>Length of the resource identifier. 0 if resource identifier is not defined. If multiple resource identifiers found, only the last is returned.</td></tr>
<tr><td>ResIdentifier</td><td>string</td><td>0...ResIdentifierLength</td><td>Resource identifier. Maximum length is limited to 100.</td></tr>
<tr><td>DateStringLength</td><td>uint16</td><td>2</td><td><strong>Optional field, send only if requested</strong> Length of the date string. If no resource present, length is 0, otherwise 14</td></tr>
<tr><td>ResourceCreationDate</td><td>String</td><td>0-14</td><td><strong>Optional field, send only if requested</strong>  Format: Year, month, day, hours, minutes, seconds (yyyymmddhhmmss) using 24-hour UTC time (not adjusted to local time zone). If location has multiple resources, the creation date of last resource added to the symbolic point is given.</td></tr>
<tr><td>ResourceShelf</td><td>uint16</td><td>2</td><td><strong>Optional field, send only if requested</strong>. Resource shelf index, if resource is located in rack or in resource buffer. In buffer lane, the shelf index represents the resource y-position from the ground, so that resources on the ground have shelf index 0, and if resource is stacked, it will have value 1 or higher. To be used with a requestFlag <em>AllResources</em>.</td></tr>
<tr><td>ResourceSlot</td><td>uint16</td><td>2</td><td><strong>Optional field, send only if requested</strong>. Resource slot index, if resource is located on buffer lane. Slot index 0 is closest to symbolicpoint. To be used with a requestFlag <em>AllResources</em>.</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>12</td><td>132</td></tr>
</tbody></table>
</div>
<h4 id="trafficlightstatusrequest-id--346"><a class="header" href="#trafficlightstatusrequest-id--346">TrafficLightStatusRequest (ID = 346)</a></h4>
<p>Message is sent by Navithor to inform requested status for a trafficlight.</p>
<div class="table-wrapper"><table><thead><tr><th>Field Name</th><th>Type</th><th>Length</th><th>Description</th></tr></thead><tbody>
<tr><td>TrafficLightID</td><td>uint32</td><td>4</td><td>ID of the traffic light</td></tr>
<tr><td>GroupID</td><td>uint32</td><td>4</td><td>ID of the group containing the trafficlight</td></tr>
<tr><td>RequestedStatus</td><td>uint16</td><td>2</td><td>0 = None, 1 = Green, 2 = Yellow, 3 = Red</td></tr>
<tr><td>Priority</td><td>int16</td><td>2</td><td>Highest priority of the AGVs in queue</td></tr>
<tr><td>QueueCount</td><td>uint16</td><td>2</td><td>Amount of AGVs queued behind this light within the trafficlight distance</td></tr>
<tr><td>PassCount</td><td>uint16</td><td>2</td><td>Amount of AGVS passing the intersection that have passed this light.</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th>Frame</th><th>Data Length</th><th>Min Length</th><th>Max Length</th></tr></thead><tbody>
<tr><td>9</td><td>16</td><td>25</td><td>25</td></tr>
</tbody></table>
</div>
<h4 id="errorsv2-id--349"><a class="header" href="#errorsv2-id--349">ErrorsV2 (ID = 349)</a></h4>
<p>This message is sent as a response to ErrorsV2 request (ID = 56).</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>NumberOfErrors</td><td>uint16</td><td>2</td><td>Max 1000 entries, or number of entries that can fit the message frame</td></tr>
<tr><td>ErrorData</td><td>ErrorDataV2[]</td><td>NumberOfErrors * ErrorDataV2 length</td><td>ErrorDataV2-struct below. Length of individual data entry will vary</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>2 + structs</td><td>11</td><td>65535</td></tr>
</tbody></table>
</div>
<p><strong>ErrorDataV2</strong></p>
<p>Error Data V2 struct.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Id</td><td>uint16/uint32</td><td>2-4</td><td>Error ID. NOTE: <strong>Error ID is not globally unique</strong>, instead it depends on the source of the error. Meaning that error from the Supervisor can have the same ID as error from the Fleet Control.<br><strong>By default ID is sent as uint16. If MES_StatusMessageProtocolVersion is set to at least 8, ID is sent as uint32.</strong></td></tr>
<tr><td>NameStringLength</td><td>uint16</td><td>2</td><td>Length of the following Name-field. Limited by Server parameter: MESStringFieldFillMaxLen</td></tr>
<tr><td>Name</td><td>string</td><td>0...X</td><td>Error name / identifier</td></tr>
<tr><td>ErrorType</td><td>uint16</td><td>2</td><td>Unknown = 0,<br />SystemAlarm = 1,<br />EntityAlarm = 2,<br />MachineAlarm = 3,<br />SymbolicPointAlarm = 4,<br />WaypointAlarm = 5</td></tr>
<tr><td>EntityID</td><td>uint32</td><td>4</td><td>0 = not defined, otherwise tells entity ID. EntityID reflects the ID of the machine (ErrorType = 3) or symbolic point (ErrorType = 4), depending on what the errorType is. If errorType is System alarm, then EntityID is 0.</td></tr>
<tr><td>Source</td><td>byte</td><td>1</td><td>Unknown = 0,<br />FleetControl = 1,<br />Machine = 2,<br />Supervisor = 3,<br />Component = 4,<br />MES = 5</td></tr>
<tr><td>Level</td><td>byte</td><td>1</td><td>1 = warning, 2 = error, 3 = fatal error</td></tr>
<tr><td>Value</td><td>uint16</td><td>2</td><td>Error value</td></tr>
<tr><td>Priority</td><td>int16</td><td>2</td><td>Error priority</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>16</td><td>18 + MESStringFieldFillMaxLen</td></tr>
</tbody></table>
</div>
<h4 id="elevatorrequest-id--352"><a class="header" href="#elevatorrequest-id--352">ElevatorRequest (ID = 352)</a></h4>
<p>Message is sent by Navithor to specific MES client to request <strong>ElevatorStatus</strong> (ID = 351) message or to request elevator to specific floor. Both requestTypes should be always replied with <strong>ElevatorStatus</strong> message.</p>
<p>MES Client which is responsible for controlling the specific elevator should subscribe these messages by sending <strong>MESMessageSubscription</strong> (ID = 348) message to Navithor once connection is established.</p>
<div class="table-wrapper"><table><thead><tr><th>Field Name</th><th>Type</th><th>Length</th><th>Description</th></tr></thead><tbody>
<tr><td>RequestType</td><td>uint16</td><td>2</td><td>Type of the request: 0 = status request, 1 = request to drive to given <em>RequestToFloor</em>.</td></tr>
<tr><td>ElevatorId</td><td>uint16</td><td>2</td><td>ID of the elevator (symbolic point group ID)</td></tr>
<tr><td>RequestId</td><td>uint16</td><td>2</td><td>ID of the request to distinguish different requests (currently always 0).</td></tr>
<tr><td>-</td><td>-</td><td>-</td><td>Following data is sent only if RequestType = 1.</td></tr>
<tr><td>MachineId</td><td>uint16</td><td>2</td><td>ID of the machine which is going to use elevator first.</td></tr>
<tr><td>RequestToFloor</td><td>uint16</td><td>2</td><td>Floor ID where elevator is required. ID should match to ones defined in the Navithor Tools.</td></tr>
<tr><td>MachineTargetFloor</td><td>uint16</td><td>2</td><td>Target floor ID which machine is supposed to reach. If elevator has only two levels, this can be ignored, as machine will always change the level.</td></tr>
<tr><td>Priority</td><td>uint16</td><td>2</td><td>Priority of the request, value between 1 and 7. Default value is MED priority (4).</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th>Frame</th><th>Data Length</th><th>Min Length</th><th>Max Length</th></tr></thead><tbody>
<tr><td>9</td><td>6-14</td><td>15</td><td>23</td></tr>
</tbody></table>
</div>
<h4 id="transferrequestreply-id--356"><a class="header" href="#transferrequestreply-id--356">TransferRequestReply (ID = 356)</a></h4>
<p>Response that is sent after receiving a transfer request message to signal success of creation.</p>
<p>More specific statuses describing reason for failure may be implemented at a later date.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>FieldName</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>RequestID</td><td>uint32</td><td>4</td><td>ID sent by the planner in TransferRequest message to identify reply to that specific request. 0 if ID was not given.</td></tr>
<tr><td>Status</td><td>uint16</td><td>2</td><td>1 = Success,<br />2 = Failure</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>6</td><td>15</td><td>15</td></tr>
</tbody></table>
</div>
<h4 id="validateload-id--357"><a class="header" href="#validateload-id--357">ValidateLoad (ID = 357)</a></h4>
<p>Message is used by Fleet Control to request load verification from the MES Client (ie. WMS of the host).</p>
<p>The message includes the data fields that needs to be matched with the load to be picked up.</p>
<p>There can be multiple sources for this data, ie. MES interface or configuration file in Navithor or Navitrol/Supervisor if sent by Navitrol to Navithor.</p>
<p>Navithor expects to receive the message ValidateLoadReply (ID = 358) in response to this message.
If no reply is received, Navithor periodically once per second requests the validation again.</p>
<p>The response can either indicate success or error. A successful respond can also contain a new transfer target for the load.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>MessageContents</td><td>uint32</td><td>4</td><td>Bit flags of included message contents<br> 1 &lt;&lt; 0 = RequestLoadValidationWithBarcode<br>1 &lt;&lt; 1 = RackData (sent if the load is on a rack)<br> Bits 3 to 32 reserved for later use.</td></tr>
</tbody></table>
</div>
<p><strong>RequestLoadValidationWithBarcode</strong></p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>ProductionOrderID</td><td>uint32</td><td>4</td><td>OrderID, unique for each order. 0 if no linked order.</td></tr>
<tr><td>RequestingAgvID</td><td>uint16</td><td>2</td><td>ID of the AGV requesting the validation of the load.</td></tr>
<tr><td>SymbolicPointID</td><td>uint16</td><td>2</td><td>Symbolic point ID of the location of the load.</td></tr>
<tr><td>LoadTypeID</td><td>int32</td><td>4</td><td>ID of the load type.</td></tr>
<tr><td>BarcodeStringLength</td><td>uint16</td><td>2</td><td>Barcode string length.</td></tr>
<tr><td>Barcode</td><td>string</td><td>0...255</td><td>Barcode of the load. If not available, nothing is sent. Minimum length is 0, maximum 255.</td></tr>
</tbody></table>
</div>
<p><strong>RackData</strong></p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>ShelfId</td><td>uint16</td><td>2</td><td>Shelf ID of the pickup location.</td></tr>
<tr><td>RackIdLength</td><td>uint16</td><td>2</td><td>Length of the rack identifier. 0 if no rack ID given.</td></tr>
<tr><td>RackId</td><td>string</td><td>0...255</td><td>Rack identifier, max 255 chars. Sent if the pickup location has any rack ID defined.</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>4 + Packet Lengths</td><td>13</td><td>541</td></tr>
</tbody></table>
</div>
<h3 id="message-acknowledgement"><a class="header" href="#message-acknowledgement">Message acknowledgement</a></h3>
<p>These messages can be sent either end of the communication to verify message receival. Navithor replies with message ID = 200 to all successfully parsed messages.</p>
<h4 id="ackorreject-id--200"><a class="header" href="#ackorreject-id--200">AckOrReject (ID = 200)</a></h4>
<p>This message can be sent either by Navithor or MES Client as a reply to all received messages. Navithor sends automatically AckOrReject (acknowledging) after receiving a correctly formatted message. Navithor can still later send another AckOrReject-message (rejecting) in case the received message cannot be fulfilled for some reason. In case MES Client does not receive an AckOrReject-message after successfully sending a message to Navithor, then the message data is not in correct format or network is blocking the message.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>AckReject</td><td>byte</td><td>1</td><td>0 for Ack, 1-254 rejection reason. See section ErrorIDs for information about possible reasons for rejected message</td></tr>
<tr><td>MessageID</td><td>uint16</td><td>2</td><td>Acked/Rejected message ID</td></tr>
<tr><td>ResponseID</td><td>uint16</td><td>2</td><td>0 do not wait, 1-65535 response ID</td></tr>
<tr><td>ResponseTimeOut</td><td>uint32</td><td>4</td><td>Amount of time to wait for response (ms)</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>9</td><td>18</td><td>18</td></tr>
</tbody></table>
</div>
<h4 id="ackorrejrequest-id--201"><a class="header" href="#ackorrejrequest-id--201">AckOrRejRequest (ID = 201)</a></h4>
<p>This message should be send as a reply to request messages that have a RequestID-field specified. For example MES client is required to reply to RequestResourceStatusAtLocation-message with this message.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>AckReject</td><td>byte</td><td>1</td><td>0 for Ack, 1-254 rejection reason. See section ErrorIDs for information about possible rejection reasons</td></tr>
<tr><td>MessageID</td><td>uint16</td><td>2</td><td>Acked/Rejected message ID</td></tr>
<tr><td>RequestID</td><td>uint16</td><td>2</td><td>Running ID number copied from the received request message</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>5</td><td>14</td><td>14</td></tr>
</tbody></table>
</div>
<h3 id="heartbeat"><a class="header" href="#heartbeat">Heartbeat</a></h3>
<p>These messages can be sent between Navithor Server and MES Clients to verify communication socket is still open. On default heartbeat is not required, but it can be activated with parameters from Navithor:</p>
<p><code>MES_HeartbeatRequired</code>: Signals whether MES communication requires periodic heartbeat messages to clients.</p>
<p><code>MES_HeartbeatInterval</code>: Interval to send heartbeat in seconds, received heartbeat is valid for three times this interval. Once heartbeat is no longer valid, MES connection will be closed to the client. <em>HeartbeatRequired</em> must be set true for this to apply.</p>
<h4 id="heartbeat-id--203"><a class="header" href="#heartbeat-id--203">Heartbeat (ID = 203)</a></h4>
<p>This is sent as a heartbeat from MES to all connected Clients. It has to be answered with message ID = 204 HeartbeatResponse, or the communication will close after a time.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Field Name</strong></th><th><strong>Type</strong></th><th><strong>Length</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>Frame</td><td>header</td><td>9</td><td>Every message has a frame that consists of the same data</td></tr>
<tr><td>NavithorStatus</td><td>uint16</td><td>2</td><td>Flags:<p></p>Bit 0: AreaOK<br/>Bit 1: DatabaseOK<br/>Bit 2: TrafficControllerOk<br/>Bit 3: AGVCommsOk<br/>All OK = 15 in decimal format</td></tr>
<tr><td>Count</td><td>uint16</td><td>2</td><td>Running index for heartbeat, starts from 0 for each Client and increases by one for each heartbeat. Each Client has its own heartbeat counter</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>4</td><td>13</td><td>13</td></tr>
</tbody></table>
</div>
<h4 id="heartbeatresponse-id--204"><a class="header" href="#heartbeatresponse-id--204">HeartbeatResponse (ID = 204)</a></h4>
<p>This is sent as a reply to Heartbeat message (ID = 203). No additional data in the message.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Frame Length</strong></th><th><strong>Data Length</strong></th><th><strong>Min Length</strong></th><th><strong>Max Length</strong></th></tr></thead><tbody>
<tr><td>9</td><td>0</td><td>9</td><td>9</td></tr>
</tbody></table>
</div>
<h3 id="error-ids"><a class="header" href="#error-ids">Error IDs</a></h3>
<h4 id="rejecting-a-received-message-with-ackorreject-message"><a class="header" href="#rejecting-a-received-message-with-ackorreject-message">Rejecting a received message with AckOrReject-message</a></h4>
<p>Following error IDs can be informed to MES Client when rejecting a received message.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Error ID</strong></th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>1</td><td>Bad input</td></tr>
<tr><td>2</td><td>Resource not at the location</td></tr>
<tr><td>3</td><td>Machine was not found</td></tr>
<tr><td>4</td><td>Symbolic point with specified ID was not found</td></tr>
<tr><td>5</td><td>Database error</td></tr>
<tr><td>6</td><td>MES Client connection not found</td></tr>
<tr><td>7</td><td>Resource not valid for pickup</td></tr>
<tr><td>8</td><td>Received message not supported</td></tr>
<tr><td>9</td><td>Machine is disabled</td></tr>
<tr><td>10</td><td>Symbolic Point is disabled</td></tr>
<tr><td>11</td><td>Order is not found</td></tr>
<tr><td>12</td><td>Bad state</td></tr>
<tr><td>254</td><td>Logic error</td></tr>
</tbody></table>
</div>
<h4 id="rejecting-a-request-type-message-with-ackorrejrequest-message"><a class="header" href="#rejecting-a-request-type-message-with-ackorrejrequest-message">Rejecting a request-type message with AckOrRejRequest-message</a></h4>
<p>Following reject reasons are handled by Navithor when Navithor is sending a request-message to MES Client(s). MES Client can reject the request with following reasons in AckOrRejRequest-message:</p>
<div class="table-wrapper"><table><thead><tr><th>**Reject reason</th><th><strong>Description</strong></th></tr></thead><tbody>
<tr><td>4</td><td>Request cannot be fulfilled at the moment. Postpone related order (Transfer request)</td></tr>
<tr><td>5</td><td>Request cannot be fulfilled at all. Cancel related order</td></tr>
</tbody></table>
</div>
<h2 id="building-a-data-message-in-navithor-mes-interface---example"><a class="header" href="#building-a-data-message-in-navithor-mes-interface---example">Building a data message in Navithor-MES interface - Example</a></h2>
<p>In this chapter you will find an example of communication between Navithor Server and Manufacturing Execution System (MES).
All values follow little-endian format (LSB first).
First, the overall structure is shown and then same thing byte by byte written to TCP/IP socket.</p>
<p>The example is represented with Production status message (ID = 313).
Server sends Production status message periodically.
The message includes both Frame and Message Data.</p>
<h3 id="structure"><a class="header" href="#structure">Structure</a></h3>
<div class="table-wrapper"><table><thead><tr><th></th><th>Length</th></tr></thead><tbody>
<tr><td>Frame</td><td>9</td></tr>
<tr><td>Message Data</td><td>0-65535</td></tr>
</tbody></table>
</div>
<h4 id="frame-1"><a class="header" href="#frame-1">Frame</a></h4>
<div class="table-wrapper"><table><thead><tr><th>Field</th><th>Type</th><th>Length (bytes)</th><th>Value</th><th>Description</th></tr></thead><tbody>
<tr><td>ID</td><td>uint16</td><td>2</td><td>0-65535</td><td>Message ID</td></tr>
<tr><td>Sender ID</td><td>uint16</td><td>2</td><td>0-65535</td><td>Unique ID of the sender</td></tr>
<tr><td>Receiver ID</td><td>uint16</td><td>2</td><td>0 Any, 1-65535 receiver ID</td><td>Unique ID of the receiver</td></tr>
<tr><td>Message type</td><td>byte</td><td>1</td><td>1 reply needed, 2 reply not needed</td><td>Tells if the message needs to be replied</td></tr>
<tr><td>Data length</td><td>uint16</td><td>2</td><td>0-65535</td><td>Message data length in bytes (0 means that no other data than frame is sent)</td></tr>
</tbody></table>
</div>
<h4 id="message-data-1"><a class="header" href="#message-data-1">Message Data</a></h4>
<div class="table-wrapper"><table><thead><tr><th>Field Name</th><th>Type</th><th>Length</th><th>Description</th></tr></thead><tbody>
<tr><td>numberOfProductionOrders</td><td>uint16</td><td>2</td><td>Number of ProductionOrderData-structures in this message. Max 200</td></tr>
<tr><td>ProductionOrderData</td><td>ProductionOrderData[]</td><td>numberOfProductionOrders * ProductionOrderData length</td><td>Production Order Data structure below</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th>Frame Length</th><th>Data Length</th><th>Min Length</th><th>Max Length</th></tr></thead><tbody>
<tr><td>9</td><td>2 + structs</td><td>11</td><td>44411</td></tr>
</tbody></table>
</div>
<p><strong>Production Order Data</strong></p>
<p>Production order data struct containing information from a single production order.</p>
<div class="table-wrapper"><table><thead><tr><th>Field Name</th><th>Type</th><th>Length</th><th>Description</th></tr></thead><tbody>
<tr><td>NameStringLength</td><td>uint16</td><td>2</td><td>Max 200 characters</td></tr>
<tr><td>Name</td><td>string</td><td>0...200</td><td>Production Order Name</td></tr>
<tr><td>Id</td><td>uint32</td><td>4</td><td>Production order ID</td></tr>
<tr><td>TargetSymbol</td><td>int32</td><td>4</td><td></td></tr>
<tr><td>AssignedToMachineId</td><td>uint16</td><td>2</td><td>0 if not assigned, machine ID if assigned machine</td></tr>
<tr><td>PickupSymbol</td><td>int32</td><td>4</td><td>-1 if no pickup symbol</td></tr>
<tr><td>ItemTypeToDeliver</td><td>int32</td><td>4</td><td>-1 if no items</td></tr>
<tr><td>CurrentStatus</td><td>byte</td><td>1</td><td>new_order = 0, loaded = 1, waiting = 2, executing = 3, interrupted = 4, completed = 5, cancelled = 6, paused = 7</td></tr>
<tr><td>ExecutionStatus</td><td>byte</td><td>1</td><td>none = 0, drive to load = 1, at load = 2, loading = 3, loaded = 4, driving to target = 5, at target = 6, unloading = 7, unloaded = 8, at hold = 9</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th>Min Length</th><th>Max Length</th></tr></thead><tbody>
<tr><td>22</td><td>222</td></tr>
</tbody></table>
</div>
<h3 id="byte-by-byte"><a class="header" href="#byte-by-byte">Byte by byte</a></h3>
<p>The message example is represented with the following structure:</p>
<pre><code>&lt;Index of byte value in message&gt; : &lt;Byte value in HEX&gt;    Description
</code></pre>
<p>Empty lines are used to differentiate each item/variable in the message.</p>
<p><strong>Production status (Frame + MessageData):</strong></p>
<pre><code>00 : 39
01 : 01    Message ID = 313

02 : E8
03 : 03    Sender ID = 1000

04 : E9
05 : 03    Receiver ID = 1001

06 : 01    Message type = 1 (this can be ignored)

07 : 23 	 
08 : 00    Data Length = 36 bytes

09 : 01 	
10 : 00    Number of production orders = 1

11 : 0C 	
12 : 00    Name string length = 12

13 : 4D    'M'
14 : 61    'a'
15 : 6E    'n'
16 : 75    'u'
17 : 61    'a'
18 : 6C    'l'
19 : 20    ' '
20 : 6F    'o'
21 : 72    'r'
22 : 64    'd'
23 : 65    'e'
24 : 72    'r' (Production Order Name = &quot;Manual order&quot;)

25 : D9
26 : 80
27 : 00
28 : 00    Production order ID = 32985

29 : 13
30 : 00
31 : 00
32 : 00    Target symbol = 19

33 : F5
34 : 06    Assigned to machine ID = 1781

35 : FF
36 : FF
37 : FF
38 : FF    Pickup symbol = -1 (no pickup symbol target)

39 : FF
40 : FF
41 : FF
42 : FF    Item type to deliver = -1 (no items)

43 : 03    Current status = 3 (executing)

44 : 05    Execution status = 5 (driving to target)
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="MachineInterfaces.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="NavithorHttpApi.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="MachineInterfaces.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="NavithorHttpApi.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
