<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Using Buffer Lanes - NAVITHOR USER INSTRUCTIONS</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Front page</a></li><li class="chapter-item expanded affix "><li class="part-title">Configuration</li><li class="chapter-item expanded "><a href="Installation_NavithorHardwareRequirements.html"><strong aria-hidden="true">1.</strong> System Hardware Requirement Specifications</a></li><li class="chapter-item expanded "><a href="Installation_SQLServerAndDatabaseInstallationGuide.html"><strong aria-hidden="true">2.</strong> Configuring database</a></li><li class="chapter-item expanded "><a href="fleetSim.html"><strong aria-hidden="true">3.</strong> Fleet Simulator - Setup and Configuration</a></li><li class="chapter-item expanded "><a href="Installation_NavithorServerAsAService.html"><strong aria-hidden="true">4.</strong> Server as a service</a></li><li class="chapter-item expanded "><a href="Installation_ConfiguringHotSwap.html"><strong aria-hidden="true">5.</strong> Server Hot Swap with Failover Cluster</a></li><li class="chapter-item expanded "><a href="Installation_RebrandingNavithor.html"><strong aria-hidden="true">6.</strong> Server and Client Rebranding</a></li><li class="chapter-item expanded "><a href="Machinetool.html"><strong aria-hidden="true">7.</strong> Machine Tool</a></li><li class="chapter-item expanded "><a href="MesTester3.html"><strong aria-hidden="true">8.</strong> MES Tester</a></li><li class="chapter-item expanded affix "><li class="part-title">Desktop client</li><li class="chapter-item expanded "><a href="navithorServerAndClientMegaDocument.html"><strong aria-hidden="true">9.</strong> System Overview and user instructions for Client UI</a></li><li class="chapter-item expanded "><a href="Feature_ClientUpdater.html"><strong aria-hidden="true">10.</strong> Client Updater</a></li><li class="chapter-item expanded affix "><li class="part-title">Web client</li><li class="chapter-item expanded "><a href="Installation_SettingUpNavithorWebServer.html"><strong aria-hidden="true">11.</strong> Setting up Web server to enable Web client</a></li><li class="chapter-item expanded "><a href="webClient.html"><strong aria-hidden="true">12.</strong> Web Client - User Instructions</a></li><li class="chapter-item expanded affix "><li class="part-title">Guides</li><li class="chapter-item expanded "><a href="bestProductionPractices.html"><strong aria-hidden="true">13.</strong> Best Practices for Creating Production Area</a></li><li class="chapter-item expanded affix "><li class="part-title">Logs</li><li class="chapter-item expanded "><a href="Navithor logs.html"><strong aria-hidden="true">14.</strong> Navithor Logs</a></li><li class="chapter-item expanded "><a href="Feature_VisualReplay.html"><strong aria-hidden="true">15.</strong> Visual Replay</a></li><li class="chapter-item expanded "><a href="Feature_DownloadManager.html"><strong aria-hidden="true">16.</strong> Log Download Manager</a></li><li class="chapter-item expanded affix "><li class="part-title">Users</li><li class="chapter-item expanded "><a href="Installation_UsingActiveDirectoryForAuthentication.html"><strong aria-hidden="true">17.</strong> User authentication against Active Directory</a></li><li class="chapter-item expanded "><a href="userRoles.html"><strong aria-hidden="true">18.</strong> User Management</a></li><li class="chapter-item expanded "><a href="userRolesRightsMatrix.html"><strong aria-hidden="true">19.</strong> Default User roles and User rights matrix</a></li><li class="chapter-item expanded affix "><li class="part-title">Features</li><li class="chapter-item expanded "><a href="symbolicPointGroups.html"><strong aria-hidden="true">20.</strong> Symbolic Point Groups</a></li><li class="chapter-item expanded "><a href="ResourceHandling.html"><strong aria-hidden="true">21.</strong> Resource handling</a></li><li class="chapter-item expanded "><a href="hold-release.html"><strong aria-hidden="true">22.</strong> Hold-Release reasoning and production order lists</a></li><li class="chapter-item expanded "><a href="transfer requests.html"><strong aria-hidden="true">23.</strong> Transfer requests</a></li><li class="chapter-item expanded "><a href="racking.html"><strong aria-hidden="true">24.</strong> Using warehouse racking feature</a></li><li class="chapter-item expanded "><a href="bufferLanes.html" class="active"><strong aria-hidden="true">25.</strong> Using Buffer Lanes</a></li><li class="chapter-item expanded "><a href="Feature_ChargingManagement.html"><strong aria-hidden="true">26.</strong> Managing Battery Levels</a></li><li class="chapter-item expanded "><a href="oneMachineZones.html"><strong aria-hidden="true">27.</strong> Using One Machine Zones</a></li><li class="chapter-item expanded "><a href="distanceControlZones.html"><strong aria-hidden="true">28.</strong> Distance Control Zones</a></li><li class="chapter-item expanded "><a href="FireAlarmZones.html"><strong aria-hidden="true">29.</strong> Fire Alarm Zones</a></li><li class="chapter-item expanded "><a href="Zone status use cases.html"><strong aria-hidden="true">30.</strong> Zone status use cases</a></li><li class="chapter-item expanded "><a href="tagStatuses.html"><strong aria-hidden="true">31.</strong> Tag Statuses</a></li><li class="chapter-item expanded "><a href="Trafficlights.html"><strong aria-hidden="true">32.</strong> Traffic Lights</a></li><li class="chapter-item expanded "><a href="Feature_Elevators.html"><strong aria-hidden="true">33.</strong> Elevators</a></li><li class="chapter-item expanded "><a href="ProductionBreak.html"><strong aria-hidden="true">34.</strong> Production Break</a></li><li class="chapter-item expanded "><a href="DynamicSafetyBounds.html"><strong aria-hidden="true">35.</strong> Virtual Dynamic Safety Bounds</a></li><li class="chapter-item expanded "><a href="WaitingSlots.html"><strong aria-hidden="true">36.</strong> Wait Queue Locations</a></li><li class="chapter-item expanded "><a href="CoupledDrive.html"><strong aria-hidden="true">37.</strong> Coupled Drive</a></li><li class="chapter-item expanded "><a href="Feature_StoppingPointOffsetsForSymbolicPoints.html"><strong aria-hidden="true">38.</strong> Stopping Point Offsets</a></li><li class="chapter-item expanded "><a href="TCStopPoint.html"><strong aria-hidden="true">39.</strong> Safe stopping point calculation</a></li><li class="chapter-item expanded "><a href="Navithor statistics.html"><strong aria-hidden="true">40.</strong> System Statistics</a></li><li class="chapter-item expanded "><a href="MachineInterfaces.html"><strong aria-hidden="true">41.</strong> Machine Interfaces</a></li><li class="chapter-item expanded affix "><li class="part-title">Interfaces</li><li class="chapter-item expanded "><a href="Communication specification between Navithor and MES.html"><strong aria-hidden="true">42.</strong> MES Interface</a></li><li class="chapter-item expanded "><a href="NavithorHttpApi.html"><strong aria-hidden="true">43.</strong> HTTP API</a></li><li class="chapter-item expanded "><a href="NavithorWebApi.html"><strong aria-hidden="true">44.</strong> WebSocket API</a></li><li class="chapter-item expanded "><a href="opcuadoc.html"><strong aria-hidden="true">45.</strong> OPC UA Server interface</a></li><li class="chapter-item expanded affix "><li class="part-title">Alarms</li><li class="chapter-item expanded "><a href="Fleet Control Alarms.html"><strong aria-hidden="true">46.</strong> Alarms</a></li><li class="chapter-item expanded "><a href="Alarms configuration override.html"><strong aria-hidden="true">47.</strong> Alarms configuration override</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="dark">Dark</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">NAVITHOR USER INSTRUCTIONS</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="using-buffer-lanes"><a class="header" href="#using-buffer-lanes">Using Buffer Lanes</a></h1>
<p>This document contains information on buffer lanes in Navithor.</p>
<p>Updated 03.02.2022</p>
<h2 id="version-history"><a class="header" href="#version-history">Version History</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Version</th><th>Date</th><th>Author</th><th>Change</th></tr></thead><tbody>
<tr><td>1.0</td><td>23.05.2019</td><td>Samuli Vaara</td><td>First version</td></tr>
<tr><td>1.1</td><td>28.05.2019</td><td>Aleksi Ålander</td><td>Added Navitrol chapter</td></tr>
<tr><td>1.2</td><td>02.12.2020</td><td>Toni Liski</td><td>Updated document after adding a new BufferResourceContainer</td></tr>
<tr><td>1.3</td><td>10.03.2021</td><td>Toni Liski</td><td>Added three new parameters</td></tr>
<tr><td>1.4</td><td>28.04.2021</td><td>Toni Liski</td><td>Added description for Maximum resource capacity</td></tr>
<tr><td>1.5</td><td>11.06.2021</td><td>Aleksi Ålander</td><td>Renamed title</td></tr>
<tr><td>1.6</td><td>23.07.2021</td><td>Evgenii Kuzminskii</td><td>Updated &quot;Buffer Lanes in production&quot; chapter and added sub-chapter with examples how to run the production and related MES messages</td></tr>
<tr><td>1.7</td><td>03.02.2022</td><td>Toni Liski</td><td>Add Block Stacking chapter</td></tr>
</tbody></table>
</div>
<hr />
<h2 id="introduction"><a class="header" href="#introduction">Introduction</a></h2>
<p>Buffer lanes were created to allow different type of loading or
unloading to a symbolic point to be done when we have a buffer area
defined. Within the buffer area unloading or loading is done when the
AGV detects the first pallet/obstacle, so it does not need to go all the
way to the symbolic point.</p>
<h2 id="creating-buffer-lanes"><a class="header" href="#creating-buffer-lanes">Creating Buffer Lanes</a></h2>
<p>Creating a buffer lane for a Load or Unload point is done by setting a
buffer distance and enabling the buffer. This can only be done for
symbolic points with the type Load or Unload. The size of the lane is
visualized in magenta. The UI is displayed in figure 1.</p>
<p>As a limitation buffer lane cannot currently span across multiple links.
Additionally, the load or unload point must only have a single link
connected thus it needs to be at the end of a link.</p>
<p><img src="Images/bufferLanes/image3.png" alt="" /></p>
<blockquote>
<p>Creating buffer lanes</p>
</blockquote>
<p>In addition to buffer length (<em>buffer distance</em>), the number of resources allowed into buffer can be configured. Dialog opens when pressing Edit button in <em>Edit Allowed Resources</em> section (See Navithor Tools documentation for further details).</p>
<p>Number of allowed resources can be determined separately for each resource type, and in the bottom the calculated <em>Maximum resource capacity</em> is shown. This capacity specifies the maximum amount of resources in total allowed in buffer. Maximum resource capacity is automatically set as highest amount of any resource type allowed.</p>
<p>In the following example, if considered only resource types Box and Carbody, the following combinations in one buffer are possible:</p>
<ul>
<li>3 boxes, 1 carbody</li>
<li>2 boxes, 2 carbody</li>
<li>less than 3 boxes and less than 2 carbodies</li>
</ul>
<p><img src="Images/bufferLanes/image5.png" alt="" /></p>
<blockquote>
<p>Configuring allowed amount of resources</p>
</blockquote>
<h2 id="buffer-lanes-in-production"><a class="header" href="#buffer-lanes-in-production">Buffer Lanes in Production</a></h2>
<p>Using buffer lanes in production requires that Symbolic Point is configured as buffer, and distance (buffer size) is defined. Optionally, the following Parameters can be used (recommended values in brackets):</p>
<ul>
<li>
<p><strong>ProductionManager_UnloadLocationAssingRule</strong> (buffer_balance)</p>
<p>Option <strong>buffer_balance</strong> prioritizes unload point with most space is left in the buffer. Navithor updates the  space left in buffer always when a resource is unloaded to a buffer type unload point. If the point is set empty, the space left in buffer is also reset.</p>
</li>
<li>
<p><strong>SymbolicPoint_BUFFER_FULL_DISTANCE_REMAINING</strong> (minimum resource size along buffer lane)</p>
<p>The parameter specifies when we consider the buffer to be full. The buffer is considered full when Navithor believes that the space left in buffer is lower than this value. Disabled if the value is zero.</p>
</li>
<li>
<p><strong>SymbolicPoint_BUFFER_EMPTY_DISTANCE_REMAINING</strong> (0)</p>
<p>The parameter sets buffer empty, if loading machine is located closer to buffer symbolic point than specified distance. Disabled if value is zero.</p>
</li>
<li>
<p><strong>ResourceManager_BufferUnloadPositionMode</strong> (MachinePosition)</p>
<p>The parameter specifies how resource position is determined in unload buffer. <strong>MachinePosition</strong> means that resource is placed on the position where the machine is located while unloading. <strong>Calculated</strong> means that position is calculated based on the number of resources in the buffer and given margin parameter.</p>
</li>
<li>
<p><strong>ResourceManager_BufferResourceMargin</strong> (0.1)</p>
<p>The parameter specifies the distance in meters between resources in the buffer. Distance is used to calculate buffer fillgrade and resource positions in a load buffer, and in an unload buffer, if mode is <strong>Calculated</strong> (see previous parameter).</p>
</li>
<li>
<p><strong>SymbolicPoint_ResourceBufferAllowedResourcesRule</strong> (AnyResource)</p>
<p>The parameter defines rules to allow different resources combined in the same buffer. Resources in one buffer can be limited by resource type, external resource identifier (See <em>TransferRequestWithResourceIdentifier (ID = 54)</em> in MES documentation), or by their combination.</p>
</li>
<li>
<p><strong>MissionManager_AbortDriveToLoadIfNoResourceAtLocation</strong> (true)</p>
<p>Machine reports that buffer is empty, if it gets pickup order from the buffer and scanner cannot find any object within the buffer lane. If buffer is reported empty, it will be marked empty also in Fleet Control, and all the resources will be removed. If this parameter is set true, machine automatically aborts the current drive order to buffer because no resources are left in the pickup location.</p>
</li>
<li>
<p><strong>MissionManager_DeleteOrderTriggerRules</strong> (BufferReportedEmpty)</p>
<p>This parameter determines if the current pickup order and related unhandled order are removed automatically when the machine reports that the pickup buffer is empty.</p>
</li>
</ul>
<h3 id="examples-of-mes-messages-affecting-buffer-lanes-in-production"><a class="header" href="#examples-of-mes-messages-affecting-buffer-lanes-in-production">Examples of MES Messages Affecting Buffer Lanes in Production</a></h3>
<p>Production can be run with <strong>TransferRequest</strong> MES message (ID = 21), for instance. Pickup and target points can be either defined as single buffer lanes or as a group of buffer lanes. If either of them is a group Navithor Fleet Control will select a valid location from all the options.</p>
<p>The following MES messages can also be used to affect the production (the specifications can be found from &quot;Communication specification between Navithor and MES&quot; document):</p>
<ul>
<li><strong>SetSymbolicPointAvailability</strong> (ID = 31) to temporarily disable/enable a single buffer lane;</li>
<li><strong>SetBufferLaneStatus</strong> (ID = 50) to set buffer lanes empty/full (no knowledge about each resource required);</li>
<li><strong>SetResourcesAtLocation</strong> (ID = 32) to add resources to a single buffer lane;</li>
<li><strong>SetSymbolicPointGroupStatus</strong> (ID = 34) to fill group of buffer lanes with multiple resources (or remove them);</li>
<li><strong>RequestSPResourceStatus</strong> (ID = 55) to request status of resources on the buffer lanes.</li>
</ul>
<p>Status of the buffer lane group is sent by Navithor to MES in <strong>SymbolicPointGroupStatus</strong> message (ID = 324). Status of a single buffer lane is sent by Navithor to MES in <strong>SymbolicPointResourceStatus</strong> message (ID = 345).</p>
<h2 id="buffer-lanes-in-navithor-client"><a class="header" href="#buffer-lanes-in-navithor-client">Buffer Lanes in Navithor Client</a></h2>
<p>Buffers have all the same options as other symbolic points, but only resources are visualized differently and Navithor is internally keeping track of free space in the buffer. Each resource in the buffer is visualized at the location where it has been unloaded. The resource which has been unloaded first will be closest to the symbolic point and the resource unloaded last will be furthest away from the symbolic point.</p>
<p>If a resource has to be removed manually from the buffer, the selected resource is highlighted with a green frame.</p>
<p><img src="Images/bufferLanes/image4.png" alt="" /></p>
<blockquote>
<p>Buffer lane with resources. Selected resource is highlighted with a green color.</p>
</blockquote>
<h2 id="block-stacking"><a class="header" href="#block-stacking">Block stacking</a></h2>
<p>Block stacking is an extended feature of the normal resource buffer lane, where resources can be stacked on top of other resources, according to the specified rules. For automatic stacking in buffer without possibility for external control, see Navitrol <em>Block Stacking Instructions</em> documentation.</p>
<p><img src="Images/bufferLanes/image6.png" alt="" /></p>
<blockquote>
<p>Visualization of buffer lane with resources stacked in Navithor Client.</p>
</blockquote>
<p>Block stacking functionality is based on RackTransferRequest (ID = 39) message over the MES interface (see MES interface documentation for more details). Block stacking can be activated by setting <strong>BlockStacking</strong> (1 &lt;&lt; 2) flag for <em>ExtraInformation</em> field, and by defining the optional packet <em>BlockStacking</em>.</p>
<h3 id="simple-use-case"><a class="header" href="#simple-use-case">Simple use case</a></h3>
<p>Idea is that each transfer request specifies the transfer of one resource from pickup location to a target block stacking buffer. In the simplest case FleetControl will give machine a hint of possible drop location in buffer, and estimated height of the actuator for unload operation (actuator height) to speed up the process of looking for free slot, but the machine itself takes care of the rest. In this case the only limiting factor for stacking the resource on top of the previous one is the physical lifting height of the actuator.</p>
<p>Example of <em>RackTransferRequest</em> message with <strong>BlockStacking</strong> data packet:</p>
<div class="table-wrapper"><table><thead><tr><th>Field</th><th>Value</th><th>Comment</th></tr></thead><tbody>
<tr><td>Flags</td><td>3</td><td>Stacking allowed (on top and below)</td></tr>
<tr><td>MaximumStackingHeight</td><td>0</td><td>Maximum height is not limited, instead maximum actuator height can be used.</td></tr>
<tr><td>ResourceHeight</td><td>0</td><td>Height of the resource, if known. Can be used to speed up the unload process.</td></tr>
<tr><td>ResourcesInStack</td><td>0</td><td>Maximum number of resources in stack is not defined.</td></tr>
</tbody></table>
</div>
<h3 id="maximum-stack-height"><a class="header" href="#maximum-stack-height">Maximum stack height</a></h3>
<p>There are two ways to limit the allowed stacking height in the block stacking buffer. They can also be combined.</p>
<p>First is <em>MaximumStackingHeight</em> field in <strong>BlockStacking</strong> packet, which defines maximum possible height where actuator can be lifted. Note that this value cannot be higher where machine actually can reach (maximum physical height). If the given value is lower, it is used instead of maximum physical actuating height.</p>
<p>Following configuration will allow stacking of two resources with height of 600mm on top of each other.</p>
<div class="table-wrapper"><table><thead><tr><th>Field</th><th>Value</th><th>Comment</th></tr></thead><tbody>
<tr><td>Flags</td><td>3</td><td>Stacking allowed (on top and below)</td></tr>
<tr><td>MaximumStackingHeight</td><td>1000</td><td>Millimeters.</td></tr>
<tr><td>ResourceHeight</td><td>600</td><td>Millimeters.</td></tr>
<tr><td>ResourcesInStack</td><td>0</td><td>Maximum number of resources in stack is not defined.</td></tr>
</tbody></table>
</div>
<p>Another way is to limit maximum amount of resources on top of each other. Note, that this limitation is done on FleetControl side, so the buffer resource book keeping must then match to the real buffer situation in order this to work reliable.</p>
<p>Following configuration will allow stacking three resources on top of each other, even if maximum stacking height would allow more.</p>
<div class="table-wrapper"><table><thead><tr><th>Field</th><th>Value</th><th>Comment</th></tr></thead><tbody>
<tr><td>Flags</td><td>3</td><td>Stacking allowed (on top and below)</td></tr>
<tr><td>MaximumStackingHeight</td><td>1000</td><td>Millimeters.</td></tr>
<tr><td>ResourceHeight</td><td>200</td><td>Millimeters.</td></tr>
<tr><td>ResourcesInStack</td><td>3</td><td>Three resources allowed in stack.</td></tr>
</tbody></table>
</div>
<p>If resource height is not known, only maximum number of resources in stack can be used instead:</p>
<div class="table-wrapper"><table><thead><tr><th>Field</th><th>Value</th><th>Comment</th></tr></thead><tbody>
<tr><td>Flags</td><td>3</td><td>Stacking allowed (on top and below)</td></tr>
<tr><td>MaximumStackingHeight</td><td>0</td><td>Not defined.</td></tr>
<tr><td>ResourceHeight</td><td>0</td><td>Not known.</td></tr>
<tr><td>ResourcesInStack</td><td>3</td><td>Three resources allowed in stack.</td></tr>
</tbody></table>
</div>
<h3 id="stacking-flags"><a class="header" href="#stacking-flags">Stacking flags</a></h3>
<p>It is possible to allow resource to be stacked on top of another resources, but prevent other resource from being stacked on this resource. This handling relies on FleetControl book keeping in buffers, and is not checked among the real situation in the buffer when pickup or dropdown operations are performed.</p>
<ol>
<li>Normal pallet with rigid products, can be stacked normally
<ul>
<li>Flags: 3</li>
</ul>
</li>
<li>&quot;Open top&quot; box, can be stacked on top of other
<ul>
<li>Flags: 1</li>
</ul>
</li>
<li>High pallet, cannot be stacked on another pallet, but something low can be but on top
<ul>
<li>Flags: 2</li>
</ul>
</li>
<li>Unstable pallet, cannot be used for stacking at all
<ul>
<li>Flags: 0</li>
</ul>
</li>
</ol>
<p><strong>Note!</strong> If <em>BlockStacking</em> packet is not specified in Transfer Request, transported resource will have stacking flags 3 (stacking under and on top allowed). If such resource is transferred to resource buffer, it can be always used for stacking on, if next resource allows stacking.</p>
<h3 id="navithor-client"><a class="header" href="#navithor-client">Navithor Client</a></h3>
<p>Resources can be stacked also in Navithor Client. While modifying the resources on the buffer symbolic point, there is option to stack the newly created resource on previous resource in the buffer. No stacking rules are used when creating resources manually in the buffer lane.</p>
<p><img src="Images/bufferLanes/image7.png" alt="" /></p>
<blockquote>
<p>Creating a stacked resource in Navithor Client.</p>
</blockquote>
<h2 id="navitrol"><a class="header" href="#navitrol">Navitrol</a></h2>
<p>Using buffer buffer lanes requires support from Navitrol. Currently it is implemented in Navitrol version 6.21.40. See updated specifications in corresponding Navitrol documentation.</p>
<p>Parameters that have to be changed:</p>
<p><strong>I,target_detection_type_selection,</strong> <strong>3</strong> # Enables ref docking
or pallet detection, 0 = disabled, 1 = refl docking, 2 = pallet
detection, 3 = pallet detection ver 2 (allows buffer detection)</p>
<p><strong>I,target_detection_scan_selection, 3</strong> # Defines which scanners
are used for target detection: 1 = rear scanner only, 2 = front scanner
only, 3 = both scanners (supported only in refl docking and pallet
detection ver 2)</p>
<p>Pallet model should be set into the parameters with array index of 0.
Important parameters for buffers are:</p>
<p><strong>I,pallet_model_enabled[0], 1</strong> # 1 = pallet model enabled</p>
<p><strong>F,pallet_model_width_y[0], 0.80</strong> # Used for determining width
of the buffer to check if it is free or not</p>
<p>Parameters that can be added to params.txt to change how close to the
object the AGV stops in the buffer zone and how early it starts
checking, if the buffer is free or not:</p>
<p><strong>F,buffer_stop_dist_from_object_when_unloading, -2.0</strong> #
Stopping distance (m) from the closest object, when unloading in a
buffer. Calculated from navigation point to the first scanner
measurements seen on the buffer zone.</p>
<p><strong>F,buffer_check_start_dist_offset_m, 2.0</strong> # The minimum distance
from navigation point to the buffer zone, when the AGV starts checking
if the buffer is free or not</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="racking.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="Feature_ChargingManagement.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="racking.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="Feature_ChargingManagement.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
