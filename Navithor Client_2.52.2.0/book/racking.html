<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Using warehouse racking feature - NAVITHOR USER INSTRUCTIONS</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Front page</a></li><li class="chapter-item expanded affix "><li class="part-title">Configuration</li><li class="chapter-item expanded "><a href="Installation_NavithorHardwareRequirements.html"><strong aria-hidden="true">1.</strong> System Hardware Requirement Specifications</a></li><li class="chapter-item expanded "><a href="Installation_SQLServerAndDatabaseInstallationGuide.html"><strong aria-hidden="true">2.</strong> Configuring database</a></li><li class="chapter-item expanded "><a href="fleetSim.html"><strong aria-hidden="true">3.</strong> Fleet Simulator - Setup and Configuration</a></li><li class="chapter-item expanded "><a href="Installation_NavithorServerAsAService.html"><strong aria-hidden="true">4.</strong> Server as a service</a></li><li class="chapter-item expanded "><a href="Installation_ConfiguringHotSwap.html"><strong aria-hidden="true">5.</strong> Server Hot Swap with Failover Cluster</a></li><li class="chapter-item expanded "><a href="Installation_RebrandingNavithor.html"><strong aria-hidden="true">6.</strong> Server and Client Rebranding</a></li><li class="chapter-item expanded "><a href="Machinetool.html"><strong aria-hidden="true">7.</strong> Machine Tool</a></li><li class="chapter-item expanded "><a href="MesTester3.html"><strong aria-hidden="true">8.</strong> MES Tester</a></li><li class="chapter-item expanded affix "><li class="part-title">Desktop client</li><li class="chapter-item expanded "><a href="navithorServerAndClientMegaDocument.html"><strong aria-hidden="true">9.</strong> System Overview and user instructions for Client UI</a></li><li class="chapter-item expanded "><a href="Feature_ClientUpdater.html"><strong aria-hidden="true">10.</strong> Client Updater</a></li><li class="chapter-item expanded affix "><li class="part-title">Web client</li><li class="chapter-item expanded "><a href="Installation_SettingUpNavithorWebServer.html"><strong aria-hidden="true">11.</strong> Setting up Web server to enable Web client</a></li><li class="chapter-item expanded "><a href="webClient.html"><strong aria-hidden="true">12.</strong> Web Client - User Instructions</a></li><li class="chapter-item expanded affix "><li class="part-title">Guides</li><li class="chapter-item expanded "><a href="bestProductionPractices.html"><strong aria-hidden="true">13.</strong> Best Practices for Creating Production Area</a></li><li class="chapter-item expanded affix "><li class="part-title">Logs</li><li class="chapter-item expanded "><a href="Navithor logs.html"><strong aria-hidden="true">14.</strong> Navithor Logs</a></li><li class="chapter-item expanded "><a href="Feature_VisualReplay.html"><strong aria-hidden="true">15.</strong> Visual Replay</a></li><li class="chapter-item expanded "><a href="Feature_DownloadManager.html"><strong aria-hidden="true">16.</strong> Log Download Manager</a></li><li class="chapter-item expanded affix "><li class="part-title">Users</li><li class="chapter-item expanded "><a href="Installation_UsingActiveDirectoryForAuthentication.html"><strong aria-hidden="true">17.</strong> User authentication against Active Directory</a></li><li class="chapter-item expanded "><a href="userRoles.html"><strong aria-hidden="true">18.</strong> User Management</a></li><li class="chapter-item expanded "><a href="userRolesRightsMatrix.html"><strong aria-hidden="true">19.</strong> Default User roles and User rights matrix</a></li><li class="chapter-item expanded affix "><li class="part-title">Features</li><li class="chapter-item expanded "><a href="symbolicPointGroups.html"><strong aria-hidden="true">20.</strong> Symbolic Point Groups</a></li><li class="chapter-item expanded "><a href="ResourceHandling.html"><strong aria-hidden="true">21.</strong> Resource handling</a></li><li class="chapter-item expanded "><a href="hold-release.html"><strong aria-hidden="true">22.</strong> Hold-Release reasoning and production order lists</a></li><li class="chapter-item expanded "><a href="transfer requests.html"><strong aria-hidden="true">23.</strong> Transfer requests</a></li><li class="chapter-item expanded "><a href="racking.html" class="active"><strong aria-hidden="true">24.</strong> Using warehouse racking feature</a></li><li class="chapter-item expanded "><a href="bufferLanes.html"><strong aria-hidden="true">25.</strong> Using Buffer Lanes</a></li><li class="chapter-item expanded "><a href="Feature_ChargingManagement.html"><strong aria-hidden="true">26.</strong> Managing Battery Levels</a></li><li class="chapter-item expanded "><a href="oneMachineZones.html"><strong aria-hidden="true">27.</strong> Using One Machine Zones</a></li><li class="chapter-item expanded "><a href="distanceControlZones.html"><strong aria-hidden="true">28.</strong> Distance Control Zones</a></li><li class="chapter-item expanded "><a href="FireAlarmZones.html"><strong aria-hidden="true">29.</strong> Fire Alarm Zones</a></li><li class="chapter-item expanded "><a href="Zone status use cases.html"><strong aria-hidden="true">30.</strong> Zone status use cases</a></li><li class="chapter-item expanded "><a href="tagStatuses.html"><strong aria-hidden="true">31.</strong> Tag Statuses</a></li><li class="chapter-item expanded "><a href="Trafficlights.html"><strong aria-hidden="true">32.</strong> Traffic Lights</a></li><li class="chapter-item expanded "><a href="Feature_Elevators.html"><strong aria-hidden="true">33.</strong> Elevators</a></li><li class="chapter-item expanded "><a href="ProductionBreak.html"><strong aria-hidden="true">34.</strong> Production Break</a></li><li class="chapter-item expanded "><a href="DynamicSafetyBounds.html"><strong aria-hidden="true">35.</strong> Virtual Dynamic Safety Bounds</a></li><li class="chapter-item expanded "><a href="WaitingSlots.html"><strong aria-hidden="true">36.</strong> Wait Queue Locations</a></li><li class="chapter-item expanded "><a href="CoupledDrive.html"><strong aria-hidden="true">37.</strong> Coupled Drive</a></li><li class="chapter-item expanded "><a href="Feature_StoppingPointOffsetsForSymbolicPoints.html"><strong aria-hidden="true">38.</strong> Stopping Point Offsets</a></li><li class="chapter-item expanded "><a href="TCStopPoint.html"><strong aria-hidden="true">39.</strong> Safe stopping point calculation</a></li><li class="chapter-item expanded "><a href="Navithor statistics.html"><strong aria-hidden="true">40.</strong> System Statistics</a></li><li class="chapter-item expanded "><a href="MachineInterfaces.html"><strong aria-hidden="true">41.</strong> Machine Interfaces</a></li><li class="chapter-item expanded affix "><li class="part-title">Interfaces</li><li class="chapter-item expanded "><a href="Communication specification between Navithor and MES.html"><strong aria-hidden="true">42.</strong> MES Interface</a></li><li class="chapter-item expanded "><a href="NavithorHttpApi.html"><strong aria-hidden="true">43.</strong> HTTP API</a></li><li class="chapter-item expanded "><a href="NavithorWebApi.html"><strong aria-hidden="true">44.</strong> WebSocket API</a></li><li class="chapter-item expanded "><a href="opcuadoc.html"><strong aria-hidden="true">45.</strong> OPC UA Server interface</a></li><li class="chapter-item expanded affix "><li class="part-title">Alarms</li><li class="chapter-item expanded "><a href="Fleet Control Alarms.html"><strong aria-hidden="true">46.</strong> Alarms</a></li><li class="chapter-item expanded "><a href="Alarms configuration override.html"><strong aria-hidden="true">47.</strong> Alarms configuration override</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="dark">Dark</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">NAVITHOR USER INSTRUCTIONS</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="using-warehouse-racking-feature"><a class="header" href="#using-warehouse-racking-feature">Using warehouse racking feature</a></h1>
<p>This document contains information on the warehouse racking feature.</p>
<p>Updated 09.09.2021</p>
<h2 id="version-history"><a class="header" href="#version-history">Version History</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Version</th><th>Date</th><th>Author</th><th>Change</th></tr></thead><tbody>
<tr><td>1.0</td><td>11.02.2020</td><td>Antti Parkkonen</td><td>1st Version of the document</td></tr>
<tr><td>1.1</td><td>03.04.2020</td><td>Evgenii Kuzminskii</td><td>Added specification for GetRackSetup, RackSetupReply and RackSetup messages</td></tr>
<tr><td>1.2</td><td>09.04.2020</td><td>Evgenii Kuzminskii</td><td>Added specification for RequestPickUp and RequestPickUpResult messages</td></tr>
<tr><td>1.3</td><td>21.04.2020</td><td>Evgenii Kuzminskii</td><td>Added Parameters section and description for ResourceManager_RemoveResourcesOnUnloading parameter</td></tr>
<tr><td>1.4</td><td>28.04.2020</td><td>Evgenii Kuzminskii</td><td>Added description for ProductionManager_ResourceMismatchRules parameter</td></tr>
<tr><td>1.5</td><td>29.04.2020</td><td>Evgenii Kuzminskii</td><td>Added DriveMachineToRack message<br>Updated RackTransferRequest message name<br>Updated maximum length of SetRackStatus message and its fields</td></tr>
<tr><td>1.6</td><td>29.04.2020</td><td>Evgenii Kuzminskii</td><td>Changed title page and updated DriveMachineToRack message</td></tr>
<tr><td>1.7</td><td>03.06.2020</td><td>Evgenii Kuzminskii</td><td>Updated Machine_DriveAwayFromRackDistance parameter description</td></tr>
<tr><td>1.8</td><td>13.07.2020</td><td>Evgenii Kuzminskii</td><td>Added driving away from rack info and screenshots to a separate section</td></tr>
<tr><td>1.9</td><td>23.09.2020</td><td>Evgenii Kuzminskii</td><td>Added ProductionManager_AllowMultipleOrdersFromDifferentRackShelves and ProductionManager_AllowMultipleOrdersFromLoadLocFlags parameters' descriptions</td></tr>
<tr><td>1.10</td><td>14.01.2021</td><td>Evgenii Kuzminskii</td><td>Added description and limitations for LoadAboardStatusChange message handling</td></tr>
<tr><td>1.11</td><td>28.04.2021</td><td>Evgenii Kuzminskii</td><td>Updated description for Item type ID field of ShelfStatus struct for SetRackStatus message, removed dependency on ProductionManager_PickupReserveRuleMode parameter</td></tr>
<tr><td>1.12</td><td>11.06.2021</td><td>Aleksi Ålander</td><td>Renamed title</td></tr>
<tr><td>1.13</td><td>03.08.2021</td><td>Evgenii Kuzminskii</td><td>Updated name and description for Machine_DriveAwayFromTargetDistance parameter (previous Machine_DriveAwayFromRackDistance)</td></tr>
<tr><td>1.14</td><td>09.09.2021</td><td>Evgenii Kuzminskii</td><td>Added MissionManager_DriveAwayRules parameter</td></tr>
</tbody></table>
</div>
<hr />
<h2 id="introduction"><a class="header" href="#introduction">Introduction</a></h2>
<p>Warehouse racking feature introduces large inventory and warehouse support in Navitec software products.</p>
<p>Navithor gets information of the racks and shelves from the map created in Navithor tools. Navithor keeps track of the units moved and gives orders to Navitrol for moving the units from one rack to another.</p>
<p>For more information of creating the map of the warehouse, please read the Navithor Tools warehouse racking document.</p>
<h2 id="requirements"><a class="header" href="#requirements">Requirements</a></h2>
<ul>
<li>Usual Navithor requirements</li>
<li>Correctly configured production area.</li>
<li>Navitrol with license for using warehouse racks.</li>
<li>MES Interface</li>
</ul>
<h2 id="racking-in-practice"><a class="header" href="#racking-in-practice">Racking in practice</a></h2>
<h3 id="functionality"><a class="header" href="#functionality">Functionality</a></h3>
<p>Move orders are given to Navithor via the MES interface. Moves from racks to another use the same logic as Transfer requests but the transfer requests are given with a different message than normal transfer requests as some of the information in the existing message is not valid for racks and the requests from and to racks also need information on the pickup and target heights.</p>
<p>The MES messages are defined at the end of this document.</p>
<p>Current limitations:</p>
<ul>
<li>Scheduling in a rack system is not optimized so the correct functionality is more probable with only single AGV systems.</li>
</ul>
<h4 id="handling-agv-load-status-changes-not-initiated-by-navithor"><a class="header" href="#handling-agv-load-status-changes-not-initiated-by-navithor">Handling AGV load status changes not initiated by Navithor</a></h4>
<p>Navitrol (version 6.30.0.0 onwards) can send LoadAboardStatusChange message (ID = 124) after loading/unloading was done manually. Navithor has several limitations related to the message handling:</p>
<ul>
<li>Requests for additional info from an operator are not currently supported.</li>
<li>Handling of lingering resources is not currently supported.</li>
<li>The only supported load statuses are 1 (Empty) and 4 (Full).</li>
<li>Only valid shelf IDs are currently supported and must be specified for both racks (existing shelf ID &gt; 0) and not specified for regular symbolic points (shelf ID = -1). If no valid loading/unloading location is found when specified then nothing will be done.</li>
</ul>
<p>In a case where an operator loads the AGV using a joystick or manually places something on top of the AGV and the AGV can detect this load, Navitrol informs Navithor that the load status has changed. The same applies in the case where the AGV is unloaded or the item taken away from the AGV. Navithor then handles the load status change with the following logic:</p>
<ul>
<li>
<p>On loading:</p>
<ul>
<li>If a loading resource is found and there is no resource aboard then the loading resource will be placed aboard.</li>
<li>If a loading resource is found but there is already a resource aboard then the resource aboard will be replaced with the loading resource.</li>
<li>If no loading resource is found or a loading location is not specified and there is no resource aboard then a default resource will be loaded.</li>
<li>If no loading resource is found or a loading location is not specified but there is already a resource aboard then nothing will be done.</li>
</ul>
</li>
<li>
<p>On unloading:</p>
<ul>
<li>If there is a resource aboard and no resource at an unloading location then the resource aboard will be moved to the unloading location.</li>
<li>If there is a resource aboard and there is a resource at an unloading location then the resource at the unloading location will be replaced with the resource unloaded from aboard.</li>
<li>If there is a resource aboard and an unloading location is not specified then the resource aboard will be removed.</li>
<li>If there is no resource aboard then nothing will be done.</li>
</ul>
</li>
</ul>
<h3 id="visualization"><a class="header" href="#visualization">Visualization</a></h3>
<p>Rack status will change the symbolic point’s color. Full racks will be marked black, partially taken racks are blue and empty racks are cyan like normal symbolic points.</p>
<p><img src="./Images/racking/rackStatusesOnMap.png" alt="image-20200406152557004" /></p>
<p>Hovering mouse on a rack will show on white which shelves are available.</p>
<p><img src="./Images/racking/rackHover.png" alt="image-20200406152656884" /></p>
<p>Clicking a rack will open the symbolic point status as with normal symbolic points. However, rack status shows also controls for each shelf in the rack.</p>
<p><img src="./Images/racking/rackStatusFrom.png" alt="image-20200406152725043" /></p>
<p>When giving a go to order for an AGV in Navithor Client, the user needs to also select the shelf after selecting the symbolic point. The shelf is selected by clicking the desired shelf with the mouse. Current selection is shown with green background. When selecting the shelf, clicking on the map and not on a shelf will revert back to symbolic point / route selection mode and right clicking will cancel the go to selection all together.</p>
<p><img src="./Images/racking/goToRack.png" alt="image-20200406152748190" /></p>
<p>If Target shelf and Pickup shelf columns are selected as shown columns in the production orders view, the transfer requests and production orders to racks will show the pickup and target shelves in the production order view.</p>
<p><img src="./Images/racking/rackOrders.png" alt="image-20200406152810089" /></p>
<h3 id="driving-away-from-rack"><a class="header" href="#driving-away-from-rack">Driving away from rack</a></h3>
<p>In general driving away from rack requires <code>MissionManager_DriveAwayRules</code> parameter to have either <code>DriveAwayFromTargetOnMachineRequest</code> or <code>DriveAwayFromRackIfTooClose</code> options enabled depending on the desired behavior.
The following example requires only <code>DriveAwayFromRackIfTooClose</code> option to be enabled.</p>
<p>The easiest way to demonstrate the case of driving away from a rack is a transfer request from a rack shelf to a different shelf on the same rack. It is represented step-by-step on the screenshots below:</p>
<ol>
<li>
<p>Transfer request is assigned to machine, drive to the target rack with height 1.
<img src="./Images/racking/drive_away_from_rack/1_drive_to_rack.png" alt="" /></p>
</li>
<li>
<p>Start loading the resource from the rack shelf at height 1.
<img src="./Images/racking/drive_away_from_rack/2_start_loading.png" alt="" /></p>
</li>
<li>
<p>The resource is loaded.
<img src="./Images/racking/drive_away_from_rack/3_loaded.png" alt="" /></p>
</li>
<li>
<p>Drive away from the rack to safely change the actuator position to height 2.
<img src="./Images/racking/drive_away_from_rack/4_drive_away.png" alt="" /></p>
</li>
<li>
<p>Drive back to the rack with height 2.
<img src="./Images/racking/drive_away_from_rack/5_drive_back.png" alt="" /></p>
</li>
<li>
<p>Start unloading the resource to the shelf at height 2.
<img src="./Images/racking/drive_away_from_rack/6_start_unloading.png" alt="" /></p>
</li>
<li>
<p>The resource is unloaded, transfer request is completed successfully.
<img src="./Images/racking/drive_away_from_rack/7_unloaded.png" alt="" /></p>
</li>
</ol>
<p>Navithor may drive an AGV away from rack automatically in the following cases:</p>
<ul>
<li>AGV executes a production order from rack A height 1 to the same rack A height 2. In this case Navithor first drives the AGV to the target rack with height 1 for loading, then drives away from the rack to safely change actuator position and finally drives back to the rack with height 2 for unloading.</li>
<li>AGV starts a drive order related to a production order closer than Machine_DriveAwayFromTargetDistance meters from the target rack with actuator position different from the target height. In this case Navithor drives the AGV away from the rack to safely change actuator position and then back to the rack.</li>
<li>Navitrol rejects a drive order to rack with the rejection reason value set to 10 (REJ_CLOSE_TO_RACK). If the drive was related to a production order then Navithor drives the AGV away from the target rack and then back in to resolve this. If the drive order is a GOTO drive then it will be aborted and Navithor Client will show a message to drive the AGV away from rack first.</li>
</ul>
<h2 id="mes-interface-messages"><a class="header" href="#mes-interface-messages">MES Interface messages</a></h2>
<p>See more detailed explanations from the document  Communication specification between Navithor
and MES.</p>
<h3 id="racktransferrequest-id--39"><a class="header" href="#racktransferrequest-id--39">RackTransferRequest (ID = 39)</a></h3>
<p>Sending this message will result Navithor to create a production source to the pick-up Symbolic Point. Navithor will assign machines that can carry the item type to the target Symbolic Point to fulfil the transfer request.</p>
<h3 id="setrackstatus-id--40"><a class="header" href="#setrackstatus-id--40">SetRackStatus (ID = 40)</a></h3>
<p>Equivalent to SetStatusAtSymbolicPoint for a warehouse rack.</p>
<h3 id="getracksetup-id--43"><a class="header" href="#getracksetup-id--43">GetRackSetup (ID = 43)</a></h3>
<p>Sending this message will result Navithor to send back RackSetupReply message. In addition, if MachineTypeId is positive, then for each rack with defined MachineTypeId RackSetup message will be sent back. If MachineTypeId is not positive, then for each rack and for each MachineTypeId defined on that rack RackSetup message will be sent back.</p>
<h3 id="racksetupreply-id--330"><a class="header" href="#racksetupreply-id--330">RackSetupReply (ID = 330)</a></h3>
<p>This message will be sent by Navithor back to the same MES client as a reply to its GetRackSetup message.</p>
<h3 id="racksetup-id--331"><a class="header" href="#racksetup-id--331">RackSetup (ID = 331)</a></h3>
<p>This message will be sent by Navithor back to the same MES client as an additional part of the reply to its GetRackSetup message.</p>
<h3 id="requestpickup-id--25"><a class="header" href="#requestpickup-id--25">RequestPickUp (ID = 25)</a></h3>
<p>Sending this message will result Navithor to create an unhandled pickup order and/or send back RequestPickUpResult message. If symbolic point is a rack, then ShelfId field must be set to a positive value of valid shelf ID on the rack. If symbolic point is not a rack, then ShelfId field must be skipped or set to zero or any negative value.</p>
<h3 id="requestpickupresult-id--320"><a class="header" href="#requestpickupresult-id--320">RequestPickUpResult (ID = 320)</a></h3>
<p>This message will be sent by Navithor to MES clients as a reply to RequestPickUp message.</p>
<h3 id="drivemachinetorack-id--44"><a class="header" href="#drivemachinetorack-id--44">DriveMachineToRack (ID = 44)</a></h3>
<p>Sending this message will result Navithor to create a production order for the machine if MachineId is greater than 0. Negative MachineId values are not supported.</p>
<h2 id="parameters"><a class="header" href="#parameters">Parameters</a></h2>
<h3 id="resourcemanager_removeresourcesonunloading"><a class="header" href="#resourcemanager_removeresourcesonunloading">ResourceManager_RemoveResourcesOnUnloading</a></h3>
<p>If this parameter is set to true, the resources will be removed on unloading at a target location. This parameter can be used in cases when there is no need for Navithor to track the resources on locations. The resource is shown on pickup location until it is waiting for pickup and on an AGV until it is delivered to its target location. After that it will be marked as deleted and will not appear in any resource container.</p>
<h3 id="productionmanager_resourcemismatchrules"><a class="header" href="#productionmanager_resourcemismatchrules">ProductionManager_ResourceMismatchRules</a></h3>
<p>This parameter defines rules which are applied when resource mismatch is detected on machine. If ProductionManager_DisableResourceMismatch parameter is set to true it turns the check for resource mismatch off, so these rules are ignored. If ProductionManager_AlwaysCheckResourceMismatch parameter is set to false the check is done only for driving tasks. It has the following flags:</p>
<ul>
<li>None: none of the following rules are applied. This option becomes active when no other option is set to checked. This is default value.</li>
<li>MoveResourceIfLoadDetected: if machine detects a load but Navithor has no resource on the machine, it will move the resource from the closest symbolic point and, if the symbolic point is a rack, from the shelf closest to machine's actuator position to the machine. If moving is not possible Navithor will create a new default resource on the machine.</li>
<li>MoveResourceIfNoLoadDetected: if machine detects no load but Navithor has a resource on the machine, it will move the resource from the machine to the closest symbolic point and, if the symbolic point is a rack, to the shelf closest to machine's actuator position. If moving is not possible Navithor will remove the resource from the machine.</li>
</ul>
<h3 id="machine_driveawayfromtargetdistance"><a class="header" href="#machine_driveawayfromtargetdistance">Machine_DriveAwayFromTargetDistance</a></h3>
<p>Determines how far away from a target location the AGV needs to drive in order to safely actuate. This parameter is used for example when an AGV needs to move a pallet from one level in a rack to another level in the same rack. The AGV drives the distance set to this parameter away from the rack between the loading and unloading.</p>
<p>This parameter is also used to define the distance machine drives away from target before trying to drive there again, in case machine has rejected the route to the target.</p>
<p>The value must be less than maximum drive order distance parameter value and not too close to it in order to drive to a target location normally, else the AGV may stop at the specified distance before the target location.</p>
<p>If drive task scheduling mode parameter has flag bits 5 or 6 set to 1 and there is a NoStop symbolic point on a drive route closer than this parameter value from the target location then the AGV may get stuck on the NoStop symbolic point.</p>
<h3 id="productionmanager_allowmultipleordersfromdifferentrackshelves"><a class="header" href="#productionmanager_allowmultipleordersfromdifferentrackshelves">ProductionManager_AllowMultipleOrdersFromDifferentRackShelves</a></h3>
<p>If True then multiple AGVs can start orders from the same rack but different shelves. Else only one AGV can start an order from the same rack.</p>
<p>This parameter is not taken into account if <code>ProductionManager_AllowMultipleOrdersFromLoadLocFlags</code> parameter has Rack flag enabled.
Setting this parameter to True may cause more deadlocks. For example, several AGVs going to the same dead-end rack at the same time will likely end up with a deadlock.</p>
<h3 id="productionmanager_allowmultipleordersfromloadlocflags"><a class="header" href="#productionmanager_allowmultipleordersfromloadlocflags">ProductionManager_AllowMultipleOrdersFromLoadLocFlags</a></h3>
<p>If true a new unhandled order can be assigned to an agv when there is already another agv executing an order from the same pickup location. This parameter should be true only if there are multiple unloading possibilities or if unloading is done to a conveyor.</p>
<h3 id="missionmanager_driveawayrules"><a class="header" href="#missionmanager_driveawayrules">MissionManager_DriveAwayRules</a></h3>
<p>The rules which define the options for drive-away feature.</p>
<ul>
<li>Disabled: Navithor never drives machines away from target.</li>
<li>DriveAwayFromTargetOnMachineRequest: If machine rejects drive order with a certain error code (12) Navithor drives the machine away from the current target using <code>Machine_DriveAwayFromTargetDistance</code> value and then back to the target.</li>
<li>DriveAwayFromRackIfTooClose: If machine rejects drive order with a certain error code (10) or production order to a different Rack shelf starts closer than <code>Machine_DriveAwayFromTargetDistance</code> from the target Rack Navithor drives the machine away from the Rack using <code>Machine_DriveAwayFromTargetDistance</code> value and then back to the Rack.</li>
<li>DriveOutOfBufferLane: If machine is inside a Buffer lane and starts a new drive order to the same Buffer Navithor will first drive the machine out of the Buffer lane and then back into it.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="transfer requests.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="bufferLanes.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="transfer requests.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="bufferLanes.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
